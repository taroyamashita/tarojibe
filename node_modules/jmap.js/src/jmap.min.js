/*!
*
* @license
* jmap.js - v4.6.0
*
* Copyright (c) 2017 Jibestream Inc.
* Licensed under the Jibestream license
* http://www.jibestream.com
*
* Compiled - Thu Nov 22 2018 18:21:08 GMT+0000 (UTC)
**/
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.jmap=e():t.jmap=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=259)}([function(t,e,n){"use strict";e.__esModule=!0;e.VERSION="4.5.3",e.PI_2=2*Math.PI,e.RAD_TO_DEG=180/Math.PI,e.DEG_TO_RAD=Math.PI/180,e.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},e.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},e.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},e.SCALE_MODES={LINEAR:0,NEAREST:1},e.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},e.GC_MODES={AUTO:0,MANUAL:1},e.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,e.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},e.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},e.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},e.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},e.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},function(t,e,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":i(window))&&(r=window)}t.exports=r},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(){return++B}function a(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function s(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)}function u(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}function l(t,e){var n=E.default.RETINA_PREFIX.exec(t);return n?parseFloat(n[1]):void 0!==e?e:1}function c(t){var e=T.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,encoding:e[3]?e[3].toLowerCase():void 0,data:e[4]}}function h(t){var e=T.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase()}function f(t){var e=T.SVG_SIZE.exec(t),n={};return e&&(n[e[1]]=Math.round(parseFloat(e[3])),n[e[5]]=Math.round(parseFloat(e[7]))),n}function p(){F=!0}function d(t){if(!F){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c Pixi.js "+T.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("Pixi.js "+T.VERSION+" - "+t+" - http://www.pixijs.com/");F=!0}}function y(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!n||!n.getContextAttributes().stencil);if(n){var i=n.getExtension("WEBGL_lose_context");i&&i.loseContext()}return n=null,r}catch(t){return!1}}function v(t){return 0===t?0:t<0?-1:1}function g(){var t=void 0;for(t in U)U[t].destroy();for(t in W)W[t].destroy()}function m(){var t=void 0;for(t in U)delete U[t];for(t in W)delete W[t]}function b(t,e){return V[e?1:0][t]}function _(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var n=t>>16&255,r=t>>8&255,i=255&t;return n=n*e+.5|0,r=r*e+.5|0,i=i*e+.5|0,(255*e<<24)+(n<<16)+(r<<8)+i}function w(t,e,n,r){return n=n||new Float32Array(4),r||void 0===r?(n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e):(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=e,n}function x(t,e,n,r){return n=n||new Float32Array(4),n[0]=(t>>16&255)/255,n[1]=(t>>8&255)/255,n[2]=(255&t)/255,(r||void 0===r)&&(n[0]*=e,n[1]*=e,n[2]*=e),n[3]=e,n}e.__esModule=!0,e.premultiplyBlendMode=e.BaseTextureCache=e.TextureCache=e.mixins=e.pluginTarget=e.EventEmitter=e.removeItems=e.isMobile=void 0,e.uid=o,e.hex2rgb=a,e.hex2string=s,e.rgb2hex=u,e.getResolutionOfUrl=l,e.decomposeDataUri=c,e.getUrlFileExtension=h,e.getSvgSize=f,e.skipHello=p,e.sayHello=d,e.isWebGLSupported=y,e.sign=v,e.destroyTextureCache=g,e.clearTextureCache=m,e.correctBlendMode=b,e.premultiplyTint=_,e.premultiplyRgba=w,e.premultiplyTintToRgba=x;var T=n(0),S=n(4),E=i(S),O=n(12),M=i(O),P=n(225),C=i(P),A=n(224),k=r(A),I=n(87),R=r(I),j=n(251),D=i(j),L=n(222),N=i(L),B=0,F=!1;e.isMobile=R,e.removeItems=D.default,e.EventEmitter=M.default,e.pluginTarget=C.default,e.mixins=k;var U=e.TextureCache=Object.create(null),W=e.BaseTextureCache=Object.create(null),V=e.premultiplyBlendMode=(0,N.default)()},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.TextMetrics=e.TextStyle=e.Text=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var o=n(0);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var a=n(5);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var s=n(9);Object.defineProperty(e,"glCore",{enumerable:!0,get:function(){return i(s).default}});var u=n(43);Object.defineProperty(e,"Bounds",{enumerable:!0,get:function(){return i(u).default}});var l=n(101);Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return i(l).default}});var c=n(21);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return i(c).default}});var h=n(102);Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return i(h).default}});var f=n(103);Object.defineProperty(e,"TransformStatic",{enumerable:!0,get:function(){return i(f).default}});var p=n(44);Object.defineProperty(e,"TransformBase",{enumerable:!0,get:function(){return i(p).default}});var d=n(48);Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return i(d).default}});var y=n(212);Object.defineProperty(e,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return i(y).default}});var v=n(49);Object.defineProperty(e,"CanvasTinter",{enumerable:!0,get:function(){return i(v).default}});var g=n(214);Object.defineProperty(e,"SpriteRenderer",{enumerable:!0,get:function(){return i(g).default}});var m=n(216);Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return i(m).default}});var b=n(114);Object.defineProperty(e,"TextStyle",{enumerable:!0,get:function(){return i(b).default}});var _=n(113);Object.defineProperty(e,"TextMetrics",{enumerable:!0,get:function(){return i(_).default}});var w=n(184);Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return i(w).default}});var x=n(104);Object.defineProperty(e,"GraphicsData",{enumerable:!0,get:function(){return i(x).default}});var T=n(187);Object.defineProperty(e,"GraphicsRenderer",{enumerable:!0,get:function(){return i(T).default}});var S=n(185);Object.defineProperty(e,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return i(S).default}});var E=n(217);Object.defineProperty(e,"Spritesheet",{enumerable:!0,get:function(){return i(E).default}});var O=n(13);Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return i(O).default}});var M=n(16);Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return i(M).default}});var P=n(50);Object.defineProperty(e,"RenderTexture",{enumerable:!0,get:function(){return i(P).default}});var C=n(115);Object.defineProperty(e,"BaseRenderTexture",{enumerable:!0,get:function(){return i(C).default}});var A=n(117);Object.defineProperty(e,"VideoBaseTexture",{enumerable:!0,get:function(){return i(A).default}});var k=n(116);Object.defineProperty(e,"TextureUvs",{enumerable:!0,get:function(){return i(k).default}});var I=n(108);Object.defineProperty(e,"CanvasRenderTarget",{enumerable:!0,get:function(){return i(I).default}});var R=n(28);Object.defineProperty(e,"Shader",{enumerable:!0,get:function(){return i(R).default}});var j=n(23);Object.defineProperty(e,"WebGLManager",{enumerable:!0,get:function(){return i(j).default}});var D=n(31);Object.defineProperty(e,"ObjectRenderer",{enumerable:!0,get:function(){return i(D).default}});var L=n(32);Object.defineProperty(e,"RenderTarget",{enumerable:!0,get:function(){return i(L).default}});var N=n(112);Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return i(N).default}});var B=n(111);Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return i(B).default}});var F=n(110);Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return i(F).default}});var U=n(99);Object.defineProperty(e,"Application",{enumerable:!0,get:function(){return i(U).default}});var W=n(100);Object.defineProperty(e,"autoDetectRenderer",{enumerable:!0,get:function(){return W.autoDetectRenderer}});var V=n(2),H=r(V),z=n(51),G=r(z),X=n(4),q=i(X),Y=n(22),J=i(Y),K=n(30),Z=i(K);e.settings=q.default,e.utils=H,e.ticker=G,e.CanvasRenderer=J.default,e.WebGLRenderer=Z.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(223),o=r(i),a=n(220),s=r(a);e.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,o.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,s.default)()}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(46);Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return r(i).default}});var o=n(106);Object.defineProperty(e,"ObservablePoint",{enumerable:!0,get:function(){return r(o).default}});var a=n(45);Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return r(a).default}});var s=n(105);Object.defineProperty(e,"GroupD8",{enumerable:!0,get:function(){return r(s).default}});var u=n(194);Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return r(u).default}});var l=n(195);Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return r(l).default}});var c=n(196);Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return r(c).default}});var h=n(47);Object.defineProperty(e,"Rectangle",{enumerable:!0,get:function(){return r(h).default}});var f=n(197);Object.defineProperty(e,"RoundedRectangle",{enumerable:!0,get:function(){return r(f).default}})},function(t,e,n){t.exports=n(145)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),this._={},Object.keys(n).forEach(function(t){e._[t]=n[t]})}return i(t,[{key:"get",value:function(t,e){return void 0!==this._[t]?this._[t]:e}},{key:"set",value:function(t,e,n){e&&e.constructor===n&&(this._[t]=e)}},{key:"export",value:function(){return JSON.parse(JSON.stringify(this._))}},{key:"id",get:function(){return this.get("id",null)},set:function(t){this.set("id",t,Number,null)}},{key:"externalId",get:function(){return this.get("externalId",null)},set:function(t){this.set("externalId",t,String,null)}}]),t}();t.exports=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){r(this,t),this._={index:{id:{}}},this._items=[],this.CollectionItemType=e}return i(t,[{key:"create",value:function(t){var e=null;return t&&t.constructor===Object&&(e=new this.CollectionItemType(t),this._items.push(e),this._.index.id[e.id]=e),e}},{key:"createBatch",value:function(t){var e=this,n=[];return t&&t.constructor===Array&&(n=t.map(function(t){var n=new e.CollectionItemType(t);return e._.index.id[n.id]=n,n}),this._items=this._items.concat(n)),n}},{key:"isCollectionItemType",value:function(t){return t&&t.constructor===this.CollectionItemType}},{key:"getAll",value:function(){return this._items}},{key:"getCount",value:function(){return this._items.length}},{key:"filter",value:function(){var t;return(t=this._items).filter.apply(t,arguments)}},{key:"find",value:function(){var t;return(t=this._items).find.apply(t,arguments)||null}},{key:"mmap",value:function(){var t;return(t=this._items).map.apply(t,arguments)}},{key:"each",value:function(){var t;return(t=this._items).forEach.apply(t,arguments)}},{key:"getById",value:function(t){return this._.index.id[t]||this.find(function(e){return e.id===t})}},{key:"getByExternalId",value:function(t){return this.filter(function(e){return e.externalId===t})}}]),t}();t.exports=o},function(t,e,n){"use strict";var r={createContext:n(182),setVertexAttribArrays:n(91),GLBuffer:n(178),GLFramebuffer:n(179),GLShader:n(180),GLTexture:n(90),VertexArrayObject:n(181),shader:n(183)};void 0!==t&&t.exports&&(t.exports=r),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=r)},function(t,e,n){"use strict";(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,i="/"===a.charAt(0))}return e=n(r(e.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+e||"."},e.normalize=function(t){var i=e.isAbsolute(t),o="/"===a(t,-1);return t=n(r(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}for(var l=[],u=s;u<i.length;u++)l.push("..");return l=l.concat(o.slice(s)),l.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},e.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){return o(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(e,n(129))},function(t,e,n){"use strict";var r=n(12);t.exports=new r},function(t,e,n){"use strict";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(){this._events=new r,this._eventsCount=0}var a=Object.prototype.hasOwnProperty,s="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(s=!1)),o.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)a.call(t,e)&&n.push(s?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t,e){var n=s?s+t:t,r=this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},o.prototype.emit=function(t,e,n,r,i,o){var a=s?s+t:t;if(!this._events[a])return!1;var u,l,c=this._events[a],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,i),!0;case 6:return c.fn.call(c.context,e,n,r,i,o),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,r);break;default:if(!u)for(f=1,u=new Array(h-1);f<h;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},o.prototype.on=function(t,e,n){var r=new i(e,n||this),o=s?s+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},o.prototype.once=function(t,e,n){var r=new i(e,n||this,!0),o=s?s+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},o.prototype.removeListener=function(t,e,n,i){var o=s?s+t:t;if(!this._events[o])return this;if(!e)return 0==--this._eventsCount?this._events=new r:delete this._events[o],this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||(0==--this._eventsCount?this._events=new r:delete this._events[o]);else{for(var u=0,l=[],c=a.length;u<c;u++)(a[u].fn!==e||i&&!a[u].once||n&&a[u].context!==n)&&l.push(a[u]);l.length?this._events[o]=1===l.length?l[0]:l:0==--this._eventsCount?this._events=new r:delete this._events[o]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=s?s+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new r:delete this._events[e])):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=s,o.EventEmitter=o,t.exports=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":u(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(16),h=r(c),f=n(117),p=r(f),d=n(116),y=r(d),v=n(12),g=r(v),m=n(5),b=n(2),_=n(4),w=r(_),x=function(t){function e(n,r,a,s,u){i(this,e);var l=o(this,t.call(this));if(l.noFrame=!1,r||(l.noFrame=!0,r=new m.Rectangle(0,0,1,1)),n instanceof e&&(n=n.baseTexture),l.baseTexture=n,l._frame=r,l.trim=s,l.valid=!1,l.requiresUpdate=!1,l._uvs=null,l.orig=a||r,l._rotate=Number(u||0),!0===u)l._rotate=2;else if(l._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return n.hasLoaded?(l.noFrame&&(r=new m.Rectangle(0,0,n.width,n.height),n.on("update",l.onBaseTextureUpdated,l)),l.frame=r):n.once("loaded",l.onBaseTextureLoaded,l),l._updateID=0,l.transform=null,l.textureCacheIds=[],l}return a(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new m.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(b.TextureCache[this.baseTexture.imageUrl]&&e.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new y.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,n,r,i){var o=b.TextureCache[t];return o||(o=new e(h.default.fromImage(t,n,r,i)),e.addToCache(o,t)),o},e.fromFrame=function(t){var e=b.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new e(h.default.fromCanvas(t,n,r))},e.fromVideo=function(t,n){return"string"==typeof t?e.fromVideoUrl(t,n):new e(p.default.fromVideo(t,n))},e.fromVideoUrl=function(t,n){return new e(p.default.fromUrl(t,n))},e.from=function(t){if("string"==typeof t){var n=b.TextureCache[t];if(!n){return null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?e.fromVideoUrl(t):e.fromImage(t)}return n}return t instanceof HTMLImageElement?new e(h.default.from(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t,w.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof h.default?new e(t):t},e.fromLoader=function(t,n,r){var i=new h.default(t,void 0,(0,b.getResolutionOfUrl)(n)),o=new e(i);return i.imageUrl=n,r||(r=n),h.default.addToCache(o.baseTexture,r),e.addToCache(o,r),r!==n&&(h.default.addToCache(o.baseTexture,n),e.addToCache(o,n)),o},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),b.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),b.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=b.TextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete b.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete b.TextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},l(e,[{key:"frame",get:function(){return this._frame},set:function(t){if(this._frame=t,this.noFrame=!1,t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: X: "+t.x+" + "+t.width+" > "+this.baseTexture.width+" Y: "+t.y+" + "+t.height+" > "+this.baseTexture.height);this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(g.default);e.default=x,x.EMPTY=new x(new h.default),s(x.EMPTY),s(x.EMPTY.baseTexture),x.WHITE=function(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new x(new h.default(t))}(),s(x.WHITE),s(x.WHITE.baseTexture)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(74),u=n(8),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s))}return o(e,t),a(e,[{key:"isUri",value:function(t){return this.isCollectionItemType(t)}},{key:"getByMimeType",value:function(t){return this.filter(function(e){return e.mimeType===t})}},{key:"getByResourceType",value:function(t){return this.filter(function(e){return e.resourceType===t})}}]),e}(u);t.exports=l},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(6),s=n(11),u=function(){function t(e){var n=e.id,r=e.name,o=e.meta,a=e.fill,s=e.opacity,u=void 0===s?1:s,l=e.stroke,c=e.strokeWidth,h=e.strokeOpacity;i(this,t),this.id=n,this.name=r,this.setMeta(o||{}),this.setFill(a),this.setOpacity(u),this.setStroke(l),this.setStrokeWidth(c),this.setStrokeOpacity(h),this.initialStyle={fill:a,stroke:l,strokeWidth:c,strokeOpacity:h,opacity:u},this._visible=!0}return o(t,[{key:"getSegmentsFromShape",value:function(){return[]}},{key:"updateInitialStyle",value:function(){return this.initialStyle={fill:this.getFill(),opacity:this.getOpacity(),stroke:this.getStroke(),strokeWidth:this.getStrokeWidth(),strokeOpacity:this.getStrokeOpacity()},this}},{key:"resetStyle",value:function(t){var e=this,n=function(t){var n=e["set"+a.capitalizeFirstLetter(t)],r=e.initialStyle[t];n&&n.call(e,r)};return t?n(t):["fill","stroke","strokeWidth","strokeOpacity","opacity"].forEach(n),this.updateGraphic()}},{key:"getMeta",value:function(){return this.meta}},{key:"setMeta",value:function(t){return this.meta=Object.assign(this.meta||{},a.validate(t,Object,{})),this}},{key:"requestRender",value:function(){s.emit("REQUEST_RENDER")}},{key:"getOpacity",value:function(){return this.opacity}},{key:"setOpacity",value:function(t){return this.opacity=t,this}},{key:"getFill",value:function(){return this.fill}},{key:"setFill",value:function(t){return this.fill=a.validate(t,Number,null),this}},{key:"getStroke",value:function(){return this.stroke}},{key:"setStroke",value:function(t){return this.stroke=a.validate(t,Number,null),this}},{key:"getStrokeWidth",value:function(){return this.strokeWidth}},{key:"setStrokeWidth",value:function(t){return this.strokeWidth=a.validate(t,Number,null),this}},{key:"getStrokeOpacity",value:function(){return this.strokeOpacity}},{key:"setStrokeOpacity",value:function(t){return this.strokeOpacity=a.validate(t,Number,1),this}},{key:"clear",value:function(){if(this.graphic&&this.graphic.parent&&this.graphic.parent.removeChild(this.graphic),this.parent){var t=this.parent.shapes.indexOf(this);t>-1&&this.parent.shapes.splice(t,1)}this.requestRender()}},{key:"getIntersectingSegments",value:function(t){return this.segments.filter(function(e){return a.doLinesIntersect(t,e)})}},{key:"isWithinBounds",value:function(t){var e=a.boundsToPoints(t);return this.segments.find(function(t){return a.pointInPolygon(t[0],e)||a.pointInPolygon(t[1],e)})}},{key:"containsPoint",value:function(){return!1}},{key:"draw",value:function(){return this}},{key:"updateGraphic",value:function(){var t,e=this.graphic;if(!e)return this;e.clear(),e.alpha=this.getOpacity(),(this.getStroke()||0===this.getStroke())&&e.lineStyle(this.getStrokeWidth(),this.getStroke(),this.getStrokeOpacity());var n=this.getFill();return(n||0===n)&&e.beginFill(n),this.draw(),this.hidden&&(e.visible=!1),(t=e.position).set.apply(t,r(this.localPosition)),this.fill&&e.endFill(),this.requestRender(),this}},{key:"segments",get:function(){return this._segments||(this._segments=this.getSegmentsFromShape()),this._segments}},{key:"visible",get:function(){return this._visible},set:function(t){this._visible=!!t,this.graphic&&!this.hidden&&(this.graphic.visible=this._visible),this.requestRender()}},{key:"hidden",get:function(){return this.parent?!this.parent.visible:this._hidden},set:function(t){this._hidden=!!t,this.graphic&&(this.graphic.visible=!this._hidden),this.requestRender()}}],[{key:"makeLocalPoints",value:function(t,e){var n=function(e){return e.map(function(e,n){return+(e-t[n]).toFixed(3)})};return e.map(n)}}]),t}();e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=n(2),l=n(4),c=r(l),h=n(12),f=r(h),p=n(221),d=r(p),y=n(41),v=r(y),g=function(t){function e(n,r,a){i(this,e);var s=o(this,t.call(this));return s.uid=(0,u.uid)(),s.touched=0,s.resolution=a||c.default.RESOLUTION,s.width=100,s.height=100,s.realWidth=100,s.realHeight=100,s.scaleMode=void 0!==r?r:c.default.SCALE_MODE,s.hasLoaded=!1,s.isLoading=!1,s.source=null,s.origSource=null,s.imageType=null,s.sourceScale=1,s.premultipliedAlpha=!0,s.imageUrl=null,s.isPowerOfTwo=!1,s.mipmap=c.default.MIPMAP_TEXTURES,s.wrapMode=c.default.WRAP_MODE,s._glTextures={},s._enabled=0,s._virtalBoundId=-1,s._destroyed=!1,s.textureCacheIds=[],n&&s.loadSource(n),s}return a(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},e.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=v.default.isPow2(this.realWidth)&&v.default.isPow2(this.realHeight)},e.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var n=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),n&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var r=this;if(t.onload=function(){if(r._updateImageType(),t.onload=null,t.onerror=null,r.isLoading){if(r.isLoading=!1,r._sourceLoaded(),"svg"===r.imageType)return void r._loadSvgSource();r.emit("loaded",r)}},t.onerror=function(){t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===r.imageType)return void r._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,u.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var n=t.subType.split("+")[0];if(!(e=(0,u.getUrlFileExtension)("."+n)))throw new Error("Invalid image type in data URI.")}else(e=(0,u.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,u.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var n=(0,u.getSvgSize)(t),r=n.width,i=n.height;if(!r||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(i*this.sourceScale),this._updateDimensions();var o=document.createElement("canvas");o.width=this.realWidth,o.height=this.realHeight,o._pixiId="canvas_"+(0,u.uid)(),o.getContext("2d").drawImage(this.source,0,0,r,i,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=o,e.addToCache(this,o._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete u.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,n,r,i){var o=u.BaseTextureCache[t];if(!o){var a=new Image;void 0===n&&0!==t.indexOf("data:")?a.crossOrigin=(0,d.default)(t):n&&(a.crossOrigin="string"==typeof n?n:"anonymous"),o=new e(a,r),o.imageUrl=t,i&&(o.sourceScale=i),o.resolution=(0,u.getResolutionOfUrl)(t),a.src=t,e.addToCache(o,t)}return o},e.fromCanvas=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=r+"_"+(0,u.uid)());var i=u.BaseTextureCache[t._pixiId];return i||(i=new e(t,n),e.addToCache(i,t._pixiId)),i},e.from=function(t,n,r){if("string"==typeof t)return e.fromImage(t,void 0,n,r);if(t instanceof HTMLImageElement){var i=t.src,o=u.BaseTextureCache[i];return o||(o=new e(t,n),o.imageUrl=i,r&&(o.sourceScale=r),o.resolution=(0,u.getResolutionOfUrl)(i),e.addToCache(o,i)),o}return t instanceof HTMLCanvasElement?e.fromCanvas(t,n):t},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),u.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),u.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=u.BaseTextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete u.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete u.BaseTextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e}(f.default);e.default=g},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(7),u=n(66),l=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.floors=new u,n._._populated=!1,n}return o(e,t),a(e,[{key:"name",get:function(){return this.get("name",null)},set:function(t){this.set("name",t,String)}},{key:"address",get:function(){return this.get("address",null)},set:function(t){this.set("address",t,String)}},{key:"description",get:function(){return this.get("description",null)},set:function(t){this.set("description",t,String)}},{key:"venueId",get:function(){return this.get("venueId",null)},set:function(t){this.set("venueId",t,Number)}},{key:"coordinates",get:function(){return this.get("coordinates",null)},set:function(t){this.set("coordinates",t,Object)}}]),e}(s);t.exports=l},function(t,e,n){"use strict";(function(e){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(7),u=n(71),l=n(77),c=n(14),h=n(64),f=function(t){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,n);var o=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));if(o.uris=new c,o.uris.createBatch(t.uris?t.uris.items:[]),o.paths=new u,t.paths&&t.paths.items&&o.paths.createBatch(t.paths.items),o.waypoints=new l,t.waypoints&&t.waypoints.items&&o.waypoints.createBatch(t.waypoints.items),t.svg)try{var a=e.DOMParser,s=t.svg;s=s.replace(/\r\n|\r|\n|\t/g,""),s=s.replace(/\s+/g," "),o._.svgTree=(new a).parseFromString(s,"text/xml");var f=o._.svgTree;if(!f.documentElement||"parsererror"===f.documentElement.nodeName)throw new TypeError("Map :: input contains invalid XML data");var p=o._.svgTree.documentElement.getElementsByTagName("rect");o._.lboxes=[];for(var d=0;d<p.length;d++){"LBox"===p[d].getAttribute("class")&&o._.lboxes.push(p[d])}for(var y=o._.svgTree.getElementsByTagName("svg")[0].childNodes,v=0;v<y.length;v++)if(1===y[v].nodeType){var g=y[v].getAttribute("id");if(g){var m=g.replace(/_.*/,"");m&&(y[v].setAttribute("name",m),y[v].setAttribute("class",m+"-Layer"))}}var b=n.getViewbox(o._.svgTree);o._.width=b[2],o._.height=b[3]}catch(t){throw console.error(t),new h.JCoreMapFormatError("Could not parse SVG Map",t)}return o}return o(n,t),a(n,[{key:"width",get:function(){return this.get("width",0)},set:function(t){this.set("width",t,Number,0)}},{key:"height",get:function(){return this.get("height",0)},set:function(t){this.set("height",t,Number,0)}},{key:"paths",get:function(){return this.get("paths",null)},set:function(t){this.set("paths",t,u,null)}},{key:"waypoints",get:function(){return this.get("waypoints",null)},set:function(t){this.set("waypoints",t,l,null)}},{key:"trans",get:function(){return this.get("trans",[])},set:function(t){this.set("trans",t,Array)}},{key:"skew",get:function(){return this.get("skew",[])},set:function(t){this.set("skew",t,Array)}},{key:"scale",get:function(){return this.get("scale",[])},set:function(t){this.set("scale",t,Array)}},{key:"geojson",get:function(){return this.get("geojson",null)},set:function(t){this.set("geojson",t,Object)}},{key:"svg",get:function(){return this.get("svg",null)},set:function(t){this.set("svg",t,String)}},{key:"svgTree",get:function(){return this.get("svgTree",null)},set:function(t){this.set("svgTree",t,Object)}},{key:"mmPerPixel",get:function(){return this.get("mmPerPixel",null)},set:function(t){this.set("mmPerPixel",t,Number)}}],[{key:"getViewbox",value:function(t){if(!t)return[0,0,0,0];var e=t.getElementsByTagName("svg");return e?e[0].getAttribute("viewBox").split(" ").map(Number):[]}}]),n}(s);t.exports=f}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(84),l=r(u),c=n(85),h=r(c),f=/data:image\/svg\+xml;utf8,/i,p=function(e){function n(e){var r=e.url,a=e.name,s=e.point,u=e.width,l=e.height,c=e.rotation,p=e.resource,d=e.preserveAspectRatio,y=e.visible,v=e.scaleWithMap,g=e.center,m=e.autoCorrectRotation,b=e.anchor,_=e.scale,w=e.resolution;i(this,n);var x=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,{point:s,name:a,width:u,height:l,rotation:c,preserveAspectRatio:d,visible:y,scaleWithMap:v,center:g,anchor:b}));if(!r||!r.match(f))x.url=r;else{var T=r;h.default.svgSize(T)||(T=r.replace("<svg ",'<svg width="'+u+'" height="'+l+'" '));var S=t.btoa(unescape(encodeURIComponent(T.replace(f,""))));x.url="data:image/svg+xml;base64,"+S}return x.resolution=w,x.texture=h.default.textureFromImageUrl(x.url,x.resolution),x.resource=p,x.setPoint(s),x.type="Image",x.autoCorrectRotation=m,x.scale=_||1,x}return a(n,e),s(n,[{key:"_updateSize",value:function(){var t=this;this.sprite&&(this.loaded?(this.sprite.width=this.aspectWidth||this.width,this.sprite.height=this.aspectHeight||this.height):this.getSize(function(e){t.sprite.width=e[0],t.sprite.height=e[1],t.loaded=!0,t._updateSpriteScale(),t.requestRender()}))}}],[{key:"resolveURL",value:function(e,n){var r=this,i=/\.(svg)$/i.exec(e);if(i&&"svg"===i[1]){var o=new t.XMLHttpRequest,a=/<svg[^>]*viewBox\s*=\s*"?((\d|\s)+)"?[^>]*>/g;o.onload=function(){if(o.readyState!==o.DONE||200!==o.status)throw new Error("Failed to load SVG using XHR.");var t=o.response;if(h.default.svgSize(t))n("data:image/svg+xml;utf8,"+t);else{var e=a.exec(t),r=e&&e[1]?e[1].split(" ").map(Number):[0,0,50,50],i=r[2],s=r[3],u=t.replace("<svg ",'<svg width="'+i+'" height="'+s+'" ');n("data:image/svg+xml;utf8,"+u)}},o.onerror=function(){return r.emit("error",r)},o.open("GET",e,!0),o.send()}else n(e)}}]),n}(l.default);e.default=p}).call(e,n(1))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(3);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}),n(245),e.filters=n(238),e.extras=n(120),e.loaders=n(241),e.loader=new e.loaders.Loader,t.PIXI=e,e.default=e}).call(e,n(1))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),l=n(101),c=function(t){return t&&t.__esModule?t:{default:t}}(l),h=function(t){function e(){r(this,e);var n=i(this,t.call(this));return n.children=[],n}return o(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var n=0;n<e;n++)this.addChild(arguments[n]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),r=this.getChildIndex(e);this.children[n]=e,this.children[r]=t,this.onChildrenChange(n<r?n:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The supplied index is out of bounds");var n=this.getChildIndex(t);(0,u.removeItems)(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var n=0;n<e;n++)this.removeChild(arguments[n]);else{var r=this.children.indexOf(t);if(-1===r)return null;t.parent=null,t.transform._parentID=-1,(0,u.removeItems)(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,u.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],n=t,r="number"==typeof e?e:this.children.length,i=r-n,o=void 0;if(i>0&&i<=r){o=this.children.splice(n,i);for(var a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var s=0;s<o.length;++s)o[s].emit("removed",this);return o}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var n=this.children[t];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}n&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var i=0,o=this.children.length;i<o;i++)this.children[i].renderWebGL(t);t.flush(),n&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var n="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(e)},s(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),e}(c.default);e.default=h,h.prototype.containerUpdateTransform=h.prototype.updateTransform},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=n(107),l=r(u),c=n(198),h=r(c),f=n(108),p=r(f),d=n(199),y=r(d),v=n(2),g=n(0),m=n(4),b=r(m),_=function(t){function e(n,r,a){i(this,e);var s=o(this,t.call(this,"Canvas",n,r,a));return s.type=g.RENDERER_TYPE.CANVAS,s.rootContext=s.view.getContext("2d",{alpha:s.transparent}),s.context=s.rootContext,s.refresh=!0,s.maskManager=new h.default(s),s.smoothProperty="imageSmoothingEnabled",s.rootContext.imageSmoothingEnabled||(s.rootContext.webkitImageSmoothingEnabled?s.smoothProperty="webkitImageSmoothingEnabled":s.rootContext.mozImageSmoothingEnabled?s.smoothProperty="mozImageSmoothingEnabled":s.rootContext.oImageSmoothingEnabled?s.smoothProperty="oImageSmoothingEnabled":s.rootContext.msImageSmoothingEnabled&&(s.smoothProperty="msImageSmoothingEnabled")),s.initPlugins(),s.blendModes=(0,y.default)(),s._activeBlendMode=null,s.renderingToScreen=!1,s.resize(s.options.width,s.options.height),s}return a(e,t),e.prototype.render=function(t,e,n,r,i){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var o=this.resolution;e?(e=e.baseTexture||e,e._canvasRenderTarget||(e._canvasRenderTarget=new p.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var a=this.context;if(e||(this._lastObjectRendered=t),!i){var s=t.parent,u=this._tempDisplayObjectParent.transform.worldTransform;r?(r.copy(u),this._tempDisplayObjectParent.transform._worldID=-1):u.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=s}a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,a.globalCompositeOperation=this.blendModes[g.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(a.fillStyle="black",a.clear()),(void 0!==n?n:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?a.clearRect(0,0,this.width,this.height):(a.fillStyle=this._backgroundColorString,a.fillRect(0,0,this.width,this.height)));var l=this.context;this.context=a,t.renderCanvas(this),this.context=l,this.resolution=o,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.smoothProperty&&(this.rootContext[this.smoothProperty]=b.default.SCALE_MODE===g.SCALE_MODES.LINEAR)},e}(l.default);e.default=_,v.pluginTarget.mixin(_)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(e){r(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();e.default=i},function(t,e,n){"use strict";var r=n(252).default,i=n(52).default,o=n(130),a=n(131);r.Resource=i,r.async=o,r.base64=a,t.exports=r,t.exports.default=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r(this,t),this._locations=e&&e.constructor===Array?e:[]}return i(t,[{key:"getAll",value:function(){return this._locations}},{key:"getByMapId",value:function(t){return this._locations.find(function(e){return e.mapId===t})||null}},{key:"getByWaypointId",value:function(t){return this._locations.find(function(e){return e.waypointIds&&e.waypointIds.find(function(e){return e===t})})||null}}]),t}();t.exports=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(7),u=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"unitNumber",get:function(){return this.get("unitNumber",null)},set:function(t){this.set("unitNumber",t,String)}},{key:"mapId",get:function(){return this.get("mapId",null)},set:function(t){this.set("mapId",t,Number)}},{key:"coordinates",get:function(){return this.get("coordinates",[])},set:function(t){this.set("coordinates",t,Array)}},{key:"associations",get:function(){return this.get("associations",{})},set:function(t){this.set("associations",t,Object)}}]),e}(s);t.exports=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(39),l=r(u),c=n(19),h=r(c),f=n(15),p=r(f),d=n(82),y=r(d),v=n(80),g=r(v),m=n(6),b=r(m),_=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,r=void 0===n?"":n,i=e.sequence,a=void 0===i?0:i;o(this,t),this.name=r,this.sequence=a,this.shapes=[],this.images=[],this.texts=[],this.icons=[],this.movingobjects=[],this.visible=!0,this.parent={}}return s(t,[{key:"hide",value:function(){return this.visible=!1,this}},{key:"show",value:function(){return this.visible=!0,this}},{key:"addShape",value:function(t){var e=this;return this.shapes=b.default.addSingleOrCollection(t,p.default,this.shapes,function(t){t.parent=e}),b.default.sortBySequence(this.shapes),this.parent._shapes=null,this}},{key:"addMovingObject",value:function(t){var e=this;return this.movingobjects=b.default.addSingleOrCollection(t,y.default,this.movingobjects,function(t){t.parent=e}),b.default.sortBySequence(this.movingobjects),this}},{key:"getShapeById",value:function(t){return this.shapes.find(function(e){return e.id===t})}},{key:"getShapes",value:function(){return this.shapes}},{key:"getImages",value:function(){return this.images}},{key:"getTexts",value:function(){return this.texts}},{key:"getIcons",value:function(){return this.icons}},{key:"getMovingObjects",value:function(){return this.movingobjects}},{key:"hasImageWithName",value:function(t){return!!this.getImageByName(t)}},{key:"getImageByName",value:function(t){return this.images.find(function(e){return e.name===t})}},{key:"addImage",value:function(t){var e=this;return this.images=b.default.addSingleOrCollection(t,h.default,this.images,function(t){t.parent=e}),this}},{key:"addText",value:function(t){var e=this;return this.texts=b.default.addSingleOrCollection(t,l.default,this.texts,function(t){t.parent=e}),this}},{key:"addIcon",value:function(t){var e=this;return this.icons=b.default.addSingleOrCollection(t,g.default,this.icons,function(t){t.parent=e}),this}},{key:"removeShape",value:function(t){return this.parent._shapes=null,this._removeItem("Shape",t)}},{key:"removeImage",value:function(t){return this._removeItem("Image",t)}},{key:"removeText",value:function(t){return this._removeItem("Text",t)}},{key:"removeIcon",value:function(t){return this._removeItem("Icon",t)}},{key:"removeMovingObject",value:function(t){return this._removeItem("MovingObject",t)}},{key:"clearShapes",value:function(){return this.removeShape(this.getShapes())}},{key:"clearImages",value:function(){return this.removeImage(this.getImages())}},{key:"clearTexts",value:function(){return this.removeText(this.getTexts())}},{key:"clearIcons",value:function(){return this.removeIcon(this.getIcons())}},{key:"clearMovingObjects",value:function(){return this.removeMovingObject(this.getMovingObjects())}},{key:"clearAll",value:function(){return this.clearShapes().clearImages().clearTexts().clearIcons().clearMovingObjects()}},{key:"updateSprites",value:function(){return this.texts.forEach(function(t){return t.updateSprite()}),this.images.forEach(function(t){return t.updateSprite()}),this}},{key:"_removeItem",value:function(t,e){var n=this;if(e.constructor===Array)e.slice().forEach(function(e){return n._removeItem(t,e)});else if(!b.default.cascade(this,"remove"+t,[e])){e&&e.clear();var r=this[t.toLowerCase()+"s"],i=r.indexOf(e);-1!==i&&r.splice(i,1)}return this}},{key:"getBounds",value:function(){return t.getBounds(this.getShapes(),this.parent.rotation)}},{key:"getLocalBounds",value:function(){if(this.parent&&this.parent.parent){var t=this.parent.parent,e=this.getBounds(),n=t.getMapPointFromViewPortPoint([e.x,e.y]),r=a(n,2),i=r[0],o=r[1],s=t.getMapPointFromViewPortPoint([e.x+e.width,e.y+e.height]),u=a(s,2);return{x:i,y:o,width:u[0]-i,height:u[1]-o}}return this._noBounds()}},{key:"_noBounds",value:function(){return{x:0,y:0,width:1,height:1}}},{key:"visible",get:function(){return this._visible},set:function(t){var e=this;this._visible=!!t,this.children.forEach(function(t){return t.hidden=!e.visible}),this.parent&&this.parent.parent&&(this.parent.visible||(this.parent.stateChanged=!0))}},{key:"children",get:function(){var t;return(t=[]).concat.apply(t,i(this.shapes).concat(i(this.images),i(this.texts),i(this.icons)))}}],[{key:"getBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],n={x1:1/0,y1:1/0,x2:-1/0,y2:-1/0};t.forEach(function(t){var e=null;t.points&&(e=b.default.getBoundingBoxFromPoints(t.points)),t.data&&(e=b.default.getBoundingBoxFromPoints(t.data[0])),e||(e={x:t.point[0],y:t.point[1],width:t.width,height:t.height});var r=e,i=r.x,o=r.y,a=r.width,s=r.height;i<n.x1&&(n.x1=i),o<n.y1&&(n.y1=o),i+a>n.x2&&(n.x2=i+a),o+s>n.y2&&(n.y2=o+s)});var r={x:n.x1,y:n.y1,width:n.x2-n.x1,height:n.y2-n.y1},i=e?b.default.degreesToRadians(e):0,o=[n.x1+r.width/2,n.y1+r.height/2],a=b.default.boundsToPoints(r);return a.forEach(function(t){return b.default.rotatePointAroundCenterPoint(t,o,i)}),b.default.getBoundingBoxFromPoints(a)}}]),t}();e.default=_},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var n=t.slice(0);return n.unshift("precision "+e+" float;"),n}}else if("precision"!==t.substring(0,9))return"precision "+e+" float;\n"+t;return t}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=n(9),l=n(4),c=function(t){return t&&t.__esModule?t:{default:t}}(l),h=function(t){function e(n,o,s){return r(this,e),i(this,t.call(this,n,a(o,c.default.PRECISION_VERTEX),a(s,c.default.PRECISION_FRAGMENT)))}return o(e,t),e}(u.GLShader);e.default=h},function(t,e,n){"use strict";function r(t,e){var n=t.points;if(0!==n.length){var r=new o.Point(n[0],n[1]),i=new o.Point(n[n.length-2],n[n.length-1]);if(r.x===i.x&&r.y===i.y){n=n.slice(),n.pop(),n.pop(),i=new o.Point(n[n.length-2],n[n.length-1]);var s=i.x+.5*(r.x-i.x),u=i.y+.5*(r.y-i.y);n.unshift(s,u),n.push(s,u)}var l=e.points,c=e.indices,h=n.length/2,f=n.length,p=l.length/6,d=t.lineWidth/2,y=(0,a.hex2rgb)(t.lineColor),v=t.lineAlpha,g=y[0]*v,m=y[1]*v,b=y[2]*v,_=n[0],w=n[1],x=n[2],T=n[3],S=0,E=0,O=-(w-T),M=_-x,P=0,C=0,A=0,k=0,I=Math.sqrt(O*O+M*M);O/=I,M/=I,O*=d,M*=d,l.push(_-O,w-M,g,m,b,v),l.push(_+O,w+M,g,m,b,v);for(var R=1;R<h-1;++R){_=n[2*(R-1)],w=n[2*(R-1)+1],x=n[2*R],T=n[2*R+1],S=n[2*(R+1)],E=n[2*(R+1)+1],O=-(w-T),M=_-x,I=Math.sqrt(O*O+M*M),O/=I,M/=I,O*=d,M*=d,P=-(T-E),C=x-S,I=Math.sqrt(P*P+C*C),P/=I,C/=I,P*=d,C*=d;var j=-M+w-(-M+T),D=-O+x-(-O+_),L=(-O+_)*(-M+T)-(-O+x)*(-M+w),N=-C+E-(-C+T),B=-P+x-(-P+S),F=(-P+S)*(-C+T)-(-P+x)*(-C+E),U=j*B-N*D;if(Math.abs(U)<.1)U+=10.1,l.push(x-O,T-M,g,m,b,v),l.push(x+O,T+M,g,m,b,v);else{var W=(D*F-B*L)/U,V=(N*L-j*F)/U;(W-x)*(W-x)+(V-T)*(V-T)>196*d*d?(A=O-P,k=M-C,I=Math.sqrt(A*A+k*k),A/=I,k/=I,A*=d,k*=d,l.push(x-A,T-k),l.push(g,m,b,v),l.push(x+A,T+k),l.push(g,m,b,v),l.push(x-A,T-k),l.push(g,m,b,v),f++):(l.push(W,V),l.push(g,m,b,v),l.push(x-(W-x),T-(V-T)),l.push(g,m,b,v))}}_=n[2*(h-2)],w=n[2*(h-2)+1],x=n[2*(h-1)],T=n[2*(h-1)+1],O=-(w-T),M=_-x,I=Math.sqrt(O*O+M*M),O/=I,M/=I,O*=d,M*=d,l.push(x-O,T-M),l.push(g,m,b,v),l.push(x+O,T+M),l.push(g,m,b,v),c.push(p);for(var H=0;H<f;++H)c.push(p++);c.push(p-1)}}function i(t,e){var n=0,r=t.points;if(0!==r.length){var i=e.points,o=r.length/2,s=(0,a.hex2rgb)(t.lineColor),u=t.lineAlpha,l=s[0]*u,c=s[1]*u,h=s[2]*u;for(n=1;n<o;n++){var f=r[2*(n-1)],p=r[2*(n-1)+1],d=r[2*n],y=r[2*n+1];i.push(f,p),i.push(l,c,h,u),i.push(d,y),i.push(l,c,h,u)}}}e.__esModule=!0,e.default=function(t,e,n){t.nativeLines?i(t,n):r(t,e)};var o=n(5),a=n(2)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=n(107),l=r(u),c=n(206),h=r(c),f=n(207),p=r(f),d=n(205),y=r(d),v=n(32),g=r(v),m=n(31),b=r(m),_=n(201),w=r(_),x=n(16),T=r(x),S=n(200),E=r(S),O=n(202),M=r(O),P=n(210),C=r(P),A=n(211),k=r(A),I=n(2),R=n(9),j=r(R),D=n(0),L=0,N=function(t){function e(n,r,a){i(this,e);var s=o(this,t.call(this,"WebGL",n,r,a));return s.legacy=s.options.legacy,s.legacy&&(j.default.VertexArrayObject.FORCE_NATIVE=!0),s.type=D.RENDERER_TYPE.WEBGL,s.handleContextLost=s.handleContextLost.bind(s),s.handleContextRestored=s.handleContextRestored.bind(s),s.view.addEventListener("webglcontextlost",s.handleContextLost,!1),s.view.addEventListener("webglcontextrestored",s.handleContextRestored,!1),s._contextOptions={alpha:s.transparent,antialias:s.options.antialias,premultipliedAlpha:s.transparent&&"notMultiplied"!==s.transparent,stencil:!0,preserveDrawingBuffer:s.options.preserveDrawingBuffer},s._backgroundColorRgba[3]=s.transparent?0:1,s.maskManager=new h.default(s),s.stencilManager=new p.default(s),s.emptyRenderer=new b.default(s),s.currentRenderer=s.emptyRenderer,s.initPlugins(),s.options.context&&(0,k.default)(s.options.context),s.gl=s.options.context||j.default.createContext(s.view,s._contextOptions),s.CONTEXT_UID=L++,s.state=new M.default(s.gl),s.renderingToScreen=!0,s.boundTextures=null,s._activeShader=null,s._activeVao=null,s._activeRenderTarget=null,s._initContext(),s.filterManager=new y.default(s),s.drawModes=(0,C.default)(s.gl),s._nextTextureLocation=0,s.setBlendMode(0),s}return a(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this.textureManager=new w.default(this),this.textureGC=new E.default(this),this.state.resetToDefault(),this.rootRenderTarget=new g.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var n=new j.default.GLTexture.fromData(t,null,1,1),r={_glTextures:{}};r._glTextures[this.CONTEXT_UID]={};for(var i=0;i<e;i++){var o=new T.default;o._glTextures[this.CONTEXT_UID]=n,this.boundTextures[i]=r,this.emptyTextures[i]=o,this.bindTexture(null,i)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,n,r,i){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!i){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.bindRenderTexture(e,r),this.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){l.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var n=t.baseTexture,r=n._glRenderTargets[this.CONTEXT_UID];return r&&r.clear(e),this},e.prototype.bindRenderTexture=function(t,e){var n=void 0;if(t){var r=t.baseTexture;r._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(r,0),this.unbindTexture(r),n=r._glRenderTargets[this.CONTEXT_UID],n.setFrame(t.frame)}else n=this.rootRenderTarget;return n.transform=e,this.bindRenderTarget(n),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t,e){return this._activeShader!==t&&(this._activeShader=t,t.bind(),!1!==e&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(t,e,n){if(t=t||this.emptyTextures[e],t=t.baseTexture||t,t.touched=this.textureGC.count,n)e=e||0;else{for(var r=0;r<this.boundTextures.length;r++)if(this.boundTextures[r]===t)return r;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var i=this.gl,o=t._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[e]=t,i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;t=t.baseTexture||t;for(var n=0;n<this.boundTextures.length;n++)this.boundTextures[n]===t&&(this.boundTextures[n]=this.emptyTextures[n],e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[n]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new j.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this._initContext()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(l.default);e.default=N,I.pluginTarget.mixin(N)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var s=n(23),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(u.default);e.default=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(5),o=n(0),a=n(4),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=n(9),l=function(){function t(e,n,a,l,c,h){r(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new i.Rectangle(0,0,1,1),this.resolution=c||s.default.RESOLUTION,this.projectionMatrix=new i.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new i.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==l?l:s.default.SCALE_MODE,this.root=h,this.root?(this.frameBuffer=new u.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=u.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===o.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(n,a)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var n=this.projectionMatrix;e=e||t,n.identity(),this.root?(n.a=1/t.width*2,n.d=-1/t.height*2,n.tx=-1-e.x*n.a,n.ty=1-e.y*n.d):(n.a=1/t.width*2,n.d=1/t.height*2,n.tx=-1-e.x*n.a,n.ty=-1-e.y*n.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var n=this.frame||this.size;this.calculateProjection(n)}},t.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();e.default=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.ease,i=e.duration,o=e.onUpdate,a=e.onComplete;r(this,t),this.ease=t.validate(n,Function,function(t){return t}),this.duration=t.validate(i||0),this.onUpdate=t.validate(o,Function,function(){}),this.onComplete=t.validate(a,Function,function(){})}return i(t,null,[{key:"validate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=arguments[2];return t.constructor===(e||Number)?t:n||0}}]),t}();t.exports=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.fill,i=e.stroke,o=e.strokeWidth,a=e.strokeOpacity,s=e.opacity;r(this,t),this.fill=n,this.stroke=i,this.strokeWidth=o,this.strokeOpacity=a,this.opacity=s}return i(t,[{key:"hexidecimal",value:function(){var t=function(t){return"string"==typeof t?parseInt(t.replace("#","0x"),16):t},e=function(t){var e=parseFloat(t);return isNaN(e)?t:e};return{fill:t(this.fill),stroke:t(this.stroke),strokeWidth:e(this.strokeWidth),strokeOpacity:e(this.strokeOpacity),opacity:e(this.opacity)}}}]),t}();t.exports=o},function(t,e,n){var r,i,o;!function(a,s){i=[t,n(59)],r=s,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)}(0,function(t,e){"use strict";var n={degreesToRadians:function(t){return t*Math.PI/180},radiansToDegrees:function(t){return 180*t/Math.PI},normalizeDegrees:function(t){for(var e=t;e>360;)e-=360;for(;e<0;)e+=360;return e},normalizeRadians:function(t){for(var e=t,n=2*Math.PI;e>n;)e-=n;for(;e<0;)e+=n;return e},distanceBetweenPoints:function(t,e){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))},getSanitizedOrientations:function(t,e){if(e){var n=this.normalizeDegrees(t),r=this.normalizeDegrees(e);return r-n>180?r-=360:n-r>180&&(n-=360),[n,r]}return[this.normalizeDegrees(t),0]},lerp:function(t,n,r){if(![t,n,r].reduce(function(t,n){return t&&void 0!==e.validate(n,Number)},!0))return null;var i=t+r*(n-t);return-0===i&&(i=0),i},lerpPoint:function(t,n,r){var i=this;return Array.isArray(t)&&2===t.length&&Array.isArray(n)&&2===n.length?void 0===e.validate(r,Number)?null:t.map(function(t,e){return i.lerp(t,n[e],r)}):null}};t.exports=n})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(7),u=n(25),l=n(14),c=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.locations=new u(t.locations),n.uris=new l,n.svg=t.svg,n.uris.createBatch(t.uris?t.uris.items:[]),n}return o(e,t),a(e,[{key:"description",get:function(){return this.get("description",null)},set:function(t){this.set("description",t,String)}},{key:"name",get:function(){return this.get("name",null)},set:function(t){this.set("name",t,String)}},{key:"status",get:function(){return this.get("status",null)},set:function(t){this.set("status",t,Boolean)}},{key:"unitNumber",get:function(){return this.get("unitNumber",null)},set:function(t){this.set("unitNumber",t,String)}},{key:"primaryUriId",get:function(){return this.get("primaryUriId",null)},set:function(t){this.set("primaryUriId",t,Number)}},{key:"localeCode",get:function(){return this.get("localeCode",null)},set:function(t){this.set("localeCode",t,String)}},{key:"destinationExtensors",get:function(){return this.get("destinationExtensors",[])},set:function(t){this.set("destinationExtensors",t,Array)}},{key:"tags",get:function(){return this.get("tags",[])},set:function(t){this.set("tags",t,Array)}},{key:"keywords",get:function(){return this.get("keywords",[])},set:function(t){this.set("keywords",t,Array)}},{key:"displayMode",get:function(){return this.get("displayMode",null)},set:function(t){this.set("displayMode",t,Number)}}]),e}(s);t.exports=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(7),u=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"coordinates",get:function(){return this.get("coordinates",null)},set:function(t){this.set("coordinates",t,String)}},{key:"name",get:function(){return this.get("name",null)},set:function(t){this.set("name",t,String)}},{key:"mapId",get:function(){return this.get("mapId",null)},set:function(t){this.set("mapId",t,Number)}},{key:"templateId",get:function(){return this.get("defaultMapTemplateId",null)},set:function(t){this.set("defaultMapTemplateId",t,String)}}]),e}(s);t.exports=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(15),l=r(u),c=n(6),h=r(c),f="Circle",p=function(t){function e(t){var n=t.id,r=t.name,a=t.point,s=t.radius,u=t.fill,c=t.opacity,h=t.stroke,p=t.strokeWidth,d=t.strokeOpacity;i(this,e);var y=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{id:n,name:r,fill:u,opacity:c,stroke:h,strokeWidth:p,strokeOpacity:d}));return y.constructor=l.default,y.baseTypeName=f,y.point=a,y.radius=s,y}return a(e,t),s(e,[{key:"containsPoint",value:function(t){if(this.radius<=0)return!1;var e=this.point[0]-t[0],n=this.point[1]-t[1],r=this.radius*this.radius;return e*=e,n*=n,e+n<=r}},{key:"draw",value:function(){this.graphic.drawCircle(0,0,this.radius)}},{key:"radius",set:function(t){this._radius=h.default.validate(t,Number,0),this.width=this.height=2*t},get:function(){return this._radius}},{key:"point",set:function(t){this._point=this.localPosition=t},get:function(){return this._point}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(84),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(t){var n=t.text,o=void 0===n?"":n,a=t.style,s=void 0===a?{}:a,u=t.point,l=void 0===u?[0,0]:u,c=t.width,h=void 0===c?1:c,f=t.height,p=void 0===f?1:f,d=t.rotation,y=void 0===d?0:d,v=t.visible,g=void 0===v||v,m=t.hideOnOverflow,b=void 0===m||m,_=t.scaleWithMap,w=void 0!==_&&_,x=t.autoCorrectRotation,T=void 0===x||x,S=t.scale,E=void 0===S?1:S,O=t.useBitmapFont,M=void 0===O||O;r(this,e);var P=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{point:l,width:h,height:p,rotation:y,preserveAspectRatio:!1,visible:g,scaleWithMap:w}));return P.text=o,P._style=s,P.hideOnOverflow=b,P.autoCorrectRotation=T,P.type="Text",P.scale=E||1,P.useBitmapFont=M,P}return o(e,t),a(e,[{key:"_hideIfOverflowing",value:function(){this.sprite&&(this.overflowing=this.sprite.width>Math.max(this.width,this.height),this.hideOnOverflow&&(this.overflowing?this.visible=!1:this.visible=!0))}},{key:"style",get:function(){return this._style},set:function(t){this.sprite&&(this.sprite.style=t),this._style=t,this.requestRender()}}]),e}(u.default);e.default=l},function(t,e,n){"use strict";t.exports=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16;if(!Array.isArray(t))throw new TypeError("requestIterator :: requires array");var i=-1,o=performance.now();if(!t.length&&n)return n();return function a(){var s=t[++i];s?(e(s,i),i<t.length&&(performance.now()-o>=r?(requestAnimationFrame(a),o=performance.now()):a())):n&&n()}()}},function(t,e,n){"use strict";"use restrict";function r(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,(e|=n)|t>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return t-=t>>>1&1431655765,16843009*((t=(858993459&t)+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=r,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var i=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,r=e,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;t[e]=r<<i&255}}(i),e.reverse=function(t){return i[255&t]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},e.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},e.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),(t=65535&(t|t>>>16))<<16>>16},e.interleave3=function(t,e,n){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),t|n<<2},e.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),(t=1023&(t|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>r(t)+1}},function(t,e,n){"use strict";var r=function(t,e){if(!i){var n=Object.keys(o);i={};for(var r=0;r<n.length;++r){var a=n[r];i[t[a]]=o[a]}}return i[e]},i=null,o={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(5),o=function(){function t(){r(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?i.Rectangle.EMPTY:(t=t||new i.Rectangle(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=t[0],a=t[1];e=o<e?o:e,n=a<n?a:n,r=o>r?o:r,i=a>i?a:i,o=t[2],a=t[3],e=o<e?o:e,n=a<n?a:n,r=o>r?o:r,i=a>i?a:i,o=t[4],a=t[5],e=o<e?o:e,n=a<n?a:n,r=o>r?o:r,i=a>i?a:i,o=t[6],a=t[7],e=o<e?o:e,n=a<n?a:n,r=o>r?o:r,i=a>i?a:i,this.minX=e,this.minY=n,this.maxX=r,this.maxY=i},t.prototype.addFrame=function(t,e,n,r,i){var o=t.worldTransform,a=o.a,s=o.b,u=o.c,l=o.d,c=o.tx,h=o.ty,f=this.minX,p=this.minY,d=this.maxX,y=this.maxY,v=a*e+u*n+c,g=s*e+l*n+h;f=v<f?v:f,p=g<p?g:p,d=v>d?v:d,y=g>y?g:y,v=a*r+u*n+c,g=s*r+l*n+h,f=v<f?v:f,p=g<p?g:p,d=v>d?v:d,y=g>y?g:y,v=a*e+u*i+c,g=s*e+l*i+h,f=v<f?v:f,p=g<p?g:p,d=v>d?v:d,y=g>y?g:y,v=a*r+u*i+c,g=s*r+l*i+h,f=v<f?v:f,p=g<p?g:p,d=v>d?v:d,y=g>y?g:y,this.minX=f,this.minY=p,this.maxX=d,this.maxY=y},t.prototype.addVertices=function(t,e,n,r){for(var i=t.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,l=i.tx,c=i.ty,h=this.minX,f=this.minY,p=this.maxX,d=this.maxY,y=n;y<r;y+=2){var v=e[y],g=e[y+1],m=o*v+s*g+l,b=u*g+a*v+c;h=m<h?m:h,f=b<f?b:f,p=m>p?m:p,d=b>d?b:d}this.minX=h,this.minY=f,this.maxX=p,this.maxY=d},t.prototype.addBounds=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>i?t.maxY:i},t.prototype.addBoundsMask=function(t,e){var n=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(n<=i&&r<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},t.prototype.addBoundsArea=function(t,e){var n=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(n<=i&&r<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},t}();e.default=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(5),o=function(){function t(){r(this,t),this.worldTransform=new i.Matrix,this.localTransform=new i.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,n=this.worldTransform,r=this.localTransform;n.a=r.a*e.a+r.b*e.c,n.b=r.a*e.b+r.b*e.d,n.c=r.c*e.a+r.d*e.c,n.d=r.c*e.b+r.d*e.d,n.tx=r.tx*e.a+r.ty*e.c+e.tx,n.ty=r.tx*e.b+r.ty*e.d+e.ty,this._worldID++},t}();e.default=o,o.prototype.updateWorldTransform=o.prototype.updateTransform,o.IDENTITY=new o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(46),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;r(this,t),this.a=e,this.b=n,this.c=i,this.d=o,this.tx=a,this.ty=s,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},t.prototype.apply=function(t,e){e=e||new a.default;var n=t.x,r=t.y;return e.x=this.a*n+this.c*r+this.tx,e.y=this.b*n+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new a.default;var n=1/(this.a*this.d+this.c*-this.b),r=t.x,i=t.y;return e.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.a,i=this.c,o=this.tx;return this.a=r*e-this.b*n,this.b=r*n+this.b*e,this.c=i*e-this.d*n,this.d=i*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},t.prototype.append=function(t){var e=this.a,n=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*i+this.ty,this},t.prototype.setTransform=function(t,e,n,r,i,o,a,s,u){var l=Math.sin(a),c=Math.cos(a),h=Math.cos(u),f=Math.sin(u),p=-Math.sin(s),d=Math.cos(s),y=c*i,v=l*i,g=-l*o,m=c*o;return this.a=h*y+f*g,this.b=h*v+f*m,this.c=p*y+d*g,this.d=p*v+d*m,this.tx=t+(n*y+r*g),this.ty=e+(n*v+r*m),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,r=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,o=-Math.atan2(-r,i),a=Math.atan2(n,e);return Math.abs(o+a)<1e-5?(t.rotation=a,e<0&&i>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(r*r+i*i),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.tx,o=t*r-e*n;return this.a=r/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},i(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();e.default=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t),this.x=e,this.y=n}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();e.default=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(0),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t),this.x=e,this.y=n,this.width=i,this.height=a,this.type=o.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=n-e,this.y=r,this.height=i-r},i(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(5),c=n(2),h=n(0),f=n(13),p=r(f),d=n(21),y=r(d),v=new l.Point,g=function(t){function e(n){i(this,e);var r=o(this,t.call(this));return r._anchor=new l.ObservablePoint(r._onAnchorUpdate,r),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=h.BLEND_MODES.NORMAL,r.shader=null,r.cachedTint=16777215,r.texture=n||p.default.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.pluginName="sprite",r}return a(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._width&&(this.scale.x=(0,c.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,c.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,o=e.d,a=e.tx,s=e.ty,u=this.vertexData,l=t.trim,c=t.orig,h=this._anchor,f=0,p=0,d=0,y=0;l?(p=l.x-h._x*c.width,f=p+l.width,y=l.y-h._y*c.height,d=y+l.height):(p=-h._x*c.width,f=p+c.width,y=-h._y*c.height,d=y+c.height),u[0]=n*p+i*y+a,u[1]=o*y+r*p+s,u[2]=n*f+i*y+a,u[3]=o*y+r*f+s,u[4]=n*f+i*d+a,u[5]=o*d+r*f+s,u[6]=n*p+i*d+a,u[7]=o*d+r*p+s}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,n=t.orig,r=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,l=i.tx,c=i.ty,h=-r._x*n.width,f=h+n.width,p=-r._y*n.height,d=p+n.height;e[0]=o*h+s*p+l,e[1]=u*p+a*h+c,e[2]=o*f+s*p+l,e[3]=u*p+a*f+c,e[4]=o*f+s*d+l,e[5]=u*d+a*f+c,e[6]=o*h+s*d+l,e[7]=u*d+a*h+c},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new l.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,v);var e=this._texture.orig.width,n=this._texture.orig.height,r=-e*this.anchor.x,i=0;return v.x>=r&&v.x<r+e&&(i=-n*this.anchor.y,v.y>=i&&v.y<i+n)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var n="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null,this.shader=null},e.from=function(t){return new e(p.default.from(t))},e.fromFrame=function(t){var n=c.TextureCache[t];if(!n)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(n)},e.fromImage=function(t,n,r){return new e(p.default.fromImage(t,n,r))},u(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,c.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,c.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(y.default);e.default=g},function(t,e,n){"use strict";e.__esModule=!0;var r=n(2),i=n(109),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a={getTintedTexture:function(t,e){var n=t._texture;e=a.roundColor(e);var r="#"+("00000"+(0|e).toString(16)).substr(-6);n.tintCache=n.tintCache||{};var i=n.tintCache[r],o=void 0;if(i){if(i.tintId===n._updateID)return n.tintCache[r];o=n.tintCache[r]}else o=a.canvas||document.createElement("canvas");if(a.tintMethod(n,e,o),o.tintId=n._updateID,a.convertTintToImage){var s=new Image;s.src=o.toDataURL(),n.tintCache[r]=s}else n.tintCache[r]=o,a.canvas=null;return o},tintWithMultiply:function(t,e,n){var r=n.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="multiply",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},tintWithOverlay:function(t,e,n){var r=n.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},tintWithPerPixel:function(t,e,n){var i=n.getContext("2d"),o=t._frame.clone(),a=t.baseTexture.resolution;o.x*=a,o.y*=a,o.width*=a,o.height*=a,n.width=Math.ceil(o.width),n.height=Math.ceil(o.height),i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var s=(0,r.hex2rgb)(e),u=s[0],l=s[1],c=s[2],h=i.getImageData(0,0,o.width,o.height),f=h.data,p=0;p<f.length;p+=4)f[p+0]*=u,f[p+1]*=l,f[p+2]*=c;i.putImageData(h,0,0)},roundColor:function(t){var e=a.cacheStepsPerColorChannel,n=(0,r.hex2rgb)(t);return n[0]=Math.min(255,n[0]/e*e),n[1]=Math.min(255,n[1]/e*e),n[2]=Math.min(255,n[2]/e*e),(0,r.rgb2hex)(n)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,o.default)(),tintMethod:0};a.tintMethod=a.canUseMultiply?a.tintWithMultiply:a.tintWithPerPixel,e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=n(115),l=r(u),c=n(13),h=r(c),f=function(t){function e(n,r){i(this,e);var a=null;if(!(n instanceof l.default)){var s=arguments[1],u=arguments[2],c=arguments[3],h=arguments[4];console.warn("Please use RenderTexture.create("+s+", "+u+") instead of the ctor directly."),a=arguments[0],r=null,n=new l.default(s,u,c,h)}var f=o(this,t.call(this,n,r));return f.legacyRenderer=a,f.valid=!0,f._updateUvs(),f}return a(e,t),e.prototype.resize=function(t,e,n){this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,n||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,n,r,i){return new e(new l.default(t,n,r,i))},e}(h.default);e.default=f},function(t,e,n){"use strict";e.__esModule=!0,e.Ticker=e.shared=void 0;var r=n(218),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=new i.default;o.autoStart=!0,o.destroy=function(){},e.shared=o,e.Ticker=i.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){}function a(t,e,n){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=n)}function s(t){return t.toString().replace("object ","")}e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(89),c=r(l),h=n(88),f=r(h),p=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),d=null,y=function(){function t(e,n,r){if(i(this,t),"string"!=typeof e||"string"!=typeof n)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=e,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=o,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new f.default,this.onProgress=new f.default,this.onComplete=new f.default,this.onAfterMiddleware=new f.default}return t.setExtensionLoadType=function(e,n){a(t._loadTypeMap,e,n)},t.setExtensionXhrType=function(e,n){a(t._xhrTypeMap,e,n)},t.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},t.prototype.load=function(e){var n=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(n)},1));switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:p&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},t.prototype._hasFlag=function(t){return!!(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return void this.abort("Unsupported element: "+t);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(e)?e[n]:e));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t.prototype._createSource=function(t,e,n){n||(n=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=n,r},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(s(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnAbort=function(){this.abort(s(this.xhr)+" Request was aborted by the user.")},t.prototype._xdrOnTimeout=function(){this.abort(s(this.xhr)+" Request timed out.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,n="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(n=e.responseText),0===r&&(n.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2!=(r/100|0))return void this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(n,"text/xml")}else{var o=document.createElement("div");o.innerHTML=n,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||n;this.complete()},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,d||(d=document.createElement("a")),d.href=t,t=(0,c.default)(d.href,{strictMode:!0});var n=!t.port&&""===e.port||t.port===e.port,r=t.protocol?t.protocol+":":"";return t.host===e.hostname&&n&&r===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var n=t.indexOf("/");e=t.substring(n+1,t.indexOf(";",n))}else{var r=t.indexOf("?"),i=t.indexOf("#"),o=Math.min(r>-1?r:t.length,i>-1?i:t.length);t=t.substring(0,o),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},u(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();e.default=y,y.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},y.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},y.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},y.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},y._loadTypeMap={gif:y.LOAD_TYPE.IMAGE,png:y.LOAD_TYPE.IMAGE,bmp:y.LOAD_TYPE.IMAGE,jpg:y.LOAD_TYPE.IMAGE,jpeg:y.LOAD_TYPE.IMAGE,tif:y.LOAD_TYPE.IMAGE,tiff:y.LOAD_TYPE.IMAGE,webp:y.LOAD_TYPE.IMAGE,tga:y.LOAD_TYPE.IMAGE,svg:y.LOAD_TYPE.IMAGE,"svg+xml":y.LOAD_TYPE.IMAGE,mp3:y.LOAD_TYPE.AUDIO,ogg:y.LOAD_TYPE.AUDIO,wav:y.LOAD_TYPE.AUDIO,mp4:y.LOAD_TYPE.VIDEO,webm:y.LOAD_TYPE.VIDEO},y._xhrTypeMap={xhtml:y.XHR_RESPONSE_TYPE.DOCUMENT,html:y.XHR_RESPONSE_TYPE.DOCUMENT,htm:y.XHR_RESPONSE_TYPE.DOCUMENT,xml:y.XHR_RESPONSE_TYPE.DOCUMENT,tmx:y.XHR_RESPONSE_TYPE.DOCUMENT,svg:y.XHR_RESPONSE_TYPE.DOCUMENT,tsx:y.XHR_RESPONSE_TYPE.DOCUMENT,gif:y.XHR_RESPONSE_TYPE.BLOB,png:y.XHR_RESPONSE_TYPE.BLOB,bmp:y.XHR_RESPONSE_TYPE.BLOB,jpg:y.XHR_RESPONSE_TYPE.BLOB,jpeg:y.XHR_RESPONSE_TYPE.BLOB,tif:y.XHR_RESPONSE_TYPE.BLOB,tiff:y.XHR_RESPONSE_TYPE.BLOB,webp:y.XHR_RESPONSE_TYPE.BLOB,tga:y.XHR_RESPONSE_TYPE.BLOB,json:y.XHR_RESPONSE_TYPE.JSON,text:y.XHR_RESPONSE_TYPE.TEXT,txt:y.XHR_RESPONSE_TYPE.TEXT,ttf:y.XHR_RESPONSE_TYPE.BUFFER,otf:y.XHR_RESPONSE_TYPE.BUFFER},y.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},function(t,e,n){"use strict";(function(e){var r=n(254),i={to:function(t,e,n){return new r(t,e,n)},ease:n(132)};e.Tweeny=i,t.exports=i}).call(e,n(1))},function(t,e,n){"use strict";t.exports=n(170)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.x,i=e.y,o=e.width,a=e.height;r(this,t),this.x=t.validate(n),this.y=t.validate(i),this.width=t.validate(o),this.height=t.validate(a)}return i(t,null,[{key:"validate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.constructor===Number?t:0}}]),t}();t.exports=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t){return t&&"none"!==t?parseInt(t.replace("#","0x"),16):""},a=function(t,e){for(var n=""+t;n.length<e;)n="0"+n;return n},s=function(){function t(e){var n=e.wordWrap,i=void 0!==n&&n,o=e.wordWrapWidth,a=void 0===o?null:o,s=e.align,u=void 0===s?"center":s,l=e.fontSize,c=void 0===l?12:l,h=e.fontFamily,f=void 0===h?"Arial":h,p=e.fill,d=void 0===p?"#202020":p,y=e.stroke,v=void 0===y?"#FFFFFF":y,g=e.strokeWidth,m=void 0===g?0:g;r(this,t),this.wordWrap=i,this.wordWrapWidth=a,this.align=u,this.fontSize=c,this.fontFamily=f,this.fill=d,this.stroke=v,this.strokeWidth=m}return i(t,[{key:"clone",value:function(){var t=this,e=["wordWrap","wordWrapWidth","align","fontSize","fontFamily","fill","stroke","strokeWidth"],n=e.reduce(function(e,n){return e[n]=t[n],e},{});return new jmap.Font(n)}},{key:"fill",set:function(t){this._fill=o(t)},get:function(){return"#"+a(this._fill.toString(16),6)}},{key:"stroke",set:function(t){this._stroke=o(t)},get:function(){return"#"+a(this._stroke.toString(16),6)}}]),t}();t.exports=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n){return t.replace(u[n],"\n  ."+s(n)+"{\n    "+(e.fill?"fill: "+e.fill+";":"")+"\n    "+(e.stroke?"stroke: "+e.stroke+";":"")+"\n    "+(e.strokeWidth?"stroke-width: "+e.strokeWidth+";":"")+"\n    "+(e.strokeOpacity?"stroke-opacity: "+e.strokeOpacity+";":"")+"\n    "+(e.opacity?"opacity: "+e.opacity+";":"")+"\n  }")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(34),s=function(t){return t.replace(/(?:^|\s)\S/g,function(t){return t.toUpperCase()})},u={foreground:/.Foreground[\s\S]*?}/g,middleground:/.Middleground[\s\S]*?}/g,background:/.Background[\s\S]*?}/g},l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.background,i=e.middleground,o=e.foreground,a=e.width,s=e.height;r(this,t),this.background=t.validate(n),this.middleground=t.validate(i),this.foreground=t.validate(o),this.width="number"==typeof a?a:null,this.height="number"==typeof s?a:null}return o(t,[{key:"applyToString",value:function(t){var e=this;return Object.keys(this).reduce(function(t,n){var r=e[n];return r instanceof a?i(t,r,n):t},t)}}],[{key:"validate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.constructor===a?t:new a}}]),t}();t.exports=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(33),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.x,i=e.y,a=e.scale,s=e.rotation,u=e.animation;r(this,t),this.x=t.validate(n),this.y=t.validate(i),this.scale=t.validate(a),this.rotation=t.resolveRotation(t.validate(s)),this.animation=t.validate(u,o)||new o}return i(t,null,[{key:"resolveRotation",value:function(t){if(null===t||void 0===t)return null;var e=t%360;return e<0&&(e+=360),e}},{key:"validate",value:function(t,e){return null!==t&&void 0!==t&&t.constructor===(e||Number)?t:null}},{key:"merge",value:function(e,n){var r=["x","y","scale","rotation"],i={};return r.forEach(function(t){return i[t]=null===e[t]?n[t]:e[t]}),new t(i)}}]),t}();t.exports=a},function(t,e,n){var r,i,o;!function(n,a){i=[t],r=a,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)}(0,function(t){"use strict";function e(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var n={validate:function(t,e,n,r){var i=e;if(e&&e.constructor!==Array&&(i=[e]),void 0!==t&&null!==t){if(i.includes(t.constructor))return t;if(t.constructor===Array){if(t.filter(function(t){return i.includes(t.constructor)}).length===t.length)return t;throw new Error(r[0]+" requires either "+i+" for its "+r[1])}}if(n||!r)return n;if(r)throw new Error(r[0]+" requires either "+i+" for its "+r[1]);return null},cascade:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],r=arguments[2],i=t;do{i=i.parent}while(i&&i.parent&&i.parent[n]);if(i&&i[n]){var o;return(o=i[n]).call.apply(o,[i].concat(e(r))),!0}return!1},capitalizeFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}};t.exports=n})},function(t,e,n){"use strict";(function(e){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(14),u=n(25),l=n(18),c=n(7),h=function(t){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,n);var o=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));o.locations=new u(t.locations),o.uris=new s,o.uris.createBatch(t.uris?t.uris.items:[]);try{var a=e.DOMParser,c=t.svg;c=c.replace(/\r\n|\r|\n|\t/g,""),c=c.replace(/\s+/g," "),o._.svgTree=(new a).parseFromString(c,"text/xml"),o._.viewbox=l.getViewbox(o._.svgTree)}catch(t){}return o}return o(n,t),a(n,[{key:"name",get:function(){return this.get("name",null)},set:function(t){this.set("name",t,String)}},{key:"description",get:function(){return this.get("description",null)},set:function(t){this.set("description",t,String)}},{key:"status",get:function(){return this.get("status",null)},set:function(t){this.set("status",t,Boolean)}},{key:"displayOrder",get:function(){return this.get("displayOrder",null)},set:function(t){this.set("displayOrder",t,Number)}},{key:"primaryUriId",get:function(){return this.get("primaryUriId",null)},set:function(t){this.set("primaryUriId",t,Number)}},{key:"svg",get:function(){return this.get("svg",null)},set:function(t){this.set("svg",t,String)}},{key:"svgTree",get:function(){return this.get("svgTree",null)},set:function(t){this.set("svgTree",t,Object)}},{key:"keywords",get:function(){return this.get("keywords",[])},set:function(t){this.set("keywords",t,Array)}}]),n}(c);t.exports=h}).call(e,n(1))},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(60),l=n(8),c=n(17),h=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u))}return a(e,t),s(e,[{key:"isAmenity",value:function(t){return this.isCollectionItemType(t)}},{key:"getByWaypoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.filter(function(e){return e.locations.getByWaypointId(t.id)})}},{key:"getByMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.filter(function(e){return e.locations.getByMapId(t.id)})}},{key:"getByFloor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map?this.filter(function(e){return e.locations.getByMapId(t.map.id)}):[]}},{key:"getByBuilding",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.constructor!==c?[]:(t=[]).concat.apply(t,r(n.floors.mmap(function(t){return e.getByFloor(t)})))}},{key:"getByStatus",value:function(t){return this.filter(function(e){return e.status===t})}},{key:"getByKeyword",value:function(t){return t&&t.constructor===String?this.filter(function(e){return e.keywords.find(function(e){return e.toLowerCase()===t.toLowerCase()})}):[]}},{key:"getByName",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.constructor!==String?[]:this.filter(function(e){return e.name.toLowerCase()===t.toLowerCase()})}}]),e}(l);t.exports=h},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(8),l=n(17),c=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,l));return t.defaultBuildingId=null,t}return a(e,t),s(e,[{key:"isBuilding",value:function(t){return this.isCollectionItemType(t)}},{key:"getDefault",value:function(){return this.defaultBuildingId?this.getById(this.defaultBuildingId):this.getAll()[0]}},{key:"getByName",value:function(t){return t&&t.constructor===String?this.filter(function(e){return e.name&&e.name.toLowerCase()===t.toLowerCase()}):[]}},{key:"getAllFloors",value:function(){var t;return(t=[]).concat.apply(t,r(this.mmap(function(t){return t.floors.getAll()})))}},{key:"getByMap",value:function(t){return this.find(function(e){return e.floors.getByMap(t)})}},{key:"getFloorByMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getAllFloors().find(function(e){return e.map&&e.map.id===t.id})||null}}]),e}(u);t.exports=c},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(8),l=n(36),c=n(17),h=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,l))}return a(e,t),s(e,[{key:"isDestination",value:function(t){return this.isCollectionItemType(t)}},{key:"getByWaypoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.filter(function(e){return e.locations.getByWaypointId(t.id)})}},{key:"getByMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.filter(function(e){return e.locations.getByMapId(t.id)})}},{key:"getByFloor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map?this.filter(function(e){return e.locations.getByMapId(t.map.id)}):[]}},{key:"getByBuilding",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.constructor!==c?[]:(t=[]).concat.apply(t,r(n.floors.mmap(function(t){return e.getByFloor(t)})))}},{key:"getByStatus",value:function(t){return this.filter(function(e){return e.status===t})}},{key:"getByTag",value:function(t){return t&&t.constructor===String?this.filter(function(e){return e.tags.find(function(e){return e.toLowerCase()===t.toLowerCase()})}):[]}},{key:"getByKeyword",value:function(t){return t&&t.constructor===String?this.filter(function(e){return e.keywords.find(function(e){return e.toLowerCase()===t.toLowerCase()})}):[]}},{key:"getByUnitNumber",value:function(t){return this.filter(function(e){return e.unitNumber===t})}}]),e}(u);t.exports=h},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(t){function e(t,n){r(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.name="JCoreConnectionError",o.message=t,o.info=n,o}return o(e,t),e}(Error),s=function(t){function e(t,n){r(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.name="JCoreAuthentication",o.message=t||o.name+" :: Invalid credentials, could not authenticate Jibestream SDK",o.info=n,o}return o(e,t),e}(Error),u=function(t){function e(t,n){r(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.name="JCoreMapFormatError",o.message=t,o.info=n,o}return o(e,t),e}(Error),l=function(t){function e(t,n){r(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.name="JCoreIncompatibleHostError",o.message=t,o.info=n,o}return o(e,t),e}(Error),c=function(t){function e(t,n){r(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.name="JCoreInvalidResponseError",o.message=t,o.info=n,o}return o(e,t),e}(Error);t.exports={JCoreConnectionError:a,JCoreAuthenticationError:s,JCoreMapFormatError:u,JCoreIncompatibleHostError:l,JCoreInvalidResponseError:c}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(7),u=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"name",get:function(){return this.get("name",null)},set:function(t){this.set("name",t,String)}},{key:"shortName",get:function(){return this.get("shortName",null)},set:function(t){this.set("shortName",t,Number)}},{key:"elevation",get:function(){return this.get("elevation",null)},set:function(t){this.set("elevation",t,Number)}},{key:"altitude",get:function(){return this.get("altitude",null)},set:function(t){this.set("altitude",t,Number)}},{key:"preference",get:function(){return this.get("preference",null)},set:function(t){this.set("preference",t,Number)}},{key:"level",get:function(){return this.get("level",null)},set:function(t){this.set("level",t,Number)}}]),e}(s);t.exports=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(8),u=n(65),l=n(36),c=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u));return t.defaultFloorId=null,t}return o(e,t),a(e,[{key:"isFloor",value:function(t){return this.isCollectionItemType(t)}},{key:"getDefault",value:function(){return this.getById(this.defaultFloorId)}},{key:"getByLevel",value:function(t){return this.find(function(e){return e.level===t})}},{key:"getByMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.find(function(e){return e.map&&e.map.id===t.id})}},{key:"getByDestination",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.constructor!==l?[]:this.filter(function(e){return t.locations.getByMapId(e.map?e.map.id:null)})}},{key:"getAllSortedByPreference",value:function(){return this.getAll().slice().sort(function(t,e){return t.preference<e.preference?-1:t.preference>e.preference?1:0})}},{key:"getAllSortedByLevel",value:function(){return this.getAll().slice().sort(function(t,e){return t.level<e.level?-1:t.level>e.level?1:0})}},{key:"getAllSortedByAltitude",value:function(){return this.getAllSortedByElevation()}},{key:"getAllSortedByElevation",value:function(){return this.getAll().slice().sort(function(t,e){return t.elevation<e.elevation?-1:t.elevation>e.elevation?1:0})}}]),e}(s);t.exports=c},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(18),l=n(8),c=n(17),h=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u))}return a(e,t),s(e,[{key:"isMap",value:function(t){return this.isCollectionItemType(t)}},{key:"getAllWaypoints",value:function(){var t;return(t=[]).concat.apply(t,r(this.mmap(function(t){return t.waypoints.getAll()})))}},{key:"getAllPaths",value:function(){var t;return(t=[]).concat.apply(t,r(this.mmap(function(t){return t.paths.getAll()})))}},{key:"getWaypointById",value:function(t){for(var e=this.getAll(),n=0;n<e.length;n++){var r=e[n].waypoints.getById(t);if(r)return r}return null}},{key:"getWaypointsWithDestinations",value:function(){return this.getAllWaypoints().filter(function(t){return t.associations&&t.associations.destinations})}},{key:"getWaypointsWithAmenities",value:function(){return this.getAllWaypoints().filter(function(t){return t.associations&&t.associations.amenities})}},{key:"getWaypointsByDestination",value:function(t){var e;return(e=[]).concat.apply(e,r(this.mmap(function(e){return e.waypoints.getByDestination(t)})))}},{key:"getWaypointsByAmenity",value:function(t){var e;return(e=[]).concat.apply(e,r(this.mmap(function(e){return e.waypoints.getByAmenity(t)})))}},{key:"getWaypointsByFloor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isMap(t.map)?t.map.waypoints.getAll():[]}},{key:"getWaypointsByMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isMap(t)?t.waypoints.getAll():[]}},{key:"getWaypointsByBuilding",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.constructor===c&&n._._populated?(t=[]).concat.apply(t,r(n.floors.mmap(function(t){return e.isMap(t.map)?t.map.waypoints.getAll():[]}))):[]}}]),e}(l);t.exports=h},function(t,e,n){"use strict";(function(e){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(7),u=n(152),l=n(14),c=n(18),h=function(t){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,n);var o=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));o.mapLabelInstances=new u(t.mapLabelInstances),o.uris=new l,o.uris.createBatch(t.uris?t.uris.items:[]);try{var a=e.DOMParser,s=t.svg;s=s.replace(/\r\n|\r|\n|\t/g,""),s=s.replace(/\s+/g," "),o._.svgTree=(new a).parseFromString(s,"text/xml"),o._.viewbox=c.getViewbox(o._.svgTree)}catch(t){}return o}return o(n,t),a(n,[{key:"name",get:function(){return this.get("name",null)},set:function(t){this.set("name",t,String)}},{key:"svg",get:function(){return this.get("svg",null)},set:function(t){this.set("svg",t,String)}},{key:"svgTree",get:function(){return this.get("svgTree",null)},set:function(t){this.set("svgTree",t,Object)}}]),n}(s);t.exports=h}).call(e,n(1))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(68),u=n(8),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s))}return o(e,t),a(e,[{key:"isMapLabel",value:function(t){return this.isCollectionItemType(t)}},{key:"getByMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.filter(function(e){return e.mapLabelInstances.getByMapId(t.id).length})}},{key:"getWithImage",value:function(){return this.filter(function(t){return t.uris.getAll().length||t.svg})}},{key:"getWithoutImage",value:function(){return this.filter(function(t){return!t.uris.getAll().length&&!t.svg})}}]),e}(u);t.exports=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(7),u=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"direction",get:function(){return this.get("direction",null)},set:function(t){this.set("direction",t,Number)}},{key:"pathTypeId",get:function(){return this.get("pathTypeId",null)},set:function(t){this.set("pathTypeId",t,Number)}},{key:"name",get:function(){return this.get("name",null)},set:function(t){this.set("name",t,String)}},{key:"status",get:function(){return this.get("status",null)},set:function(t){this.set("status",t,Boolean)}},{key:"waypointIds",get:function(){return this.get("waypointIds",[])},set:function(t){this.set("waypointIds",t,Array)}}]),e}(s);t.exports=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(70),u=n(8),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s))}return o(e,t),a(e,[{key:"isPath",value:function(t){return this.isCollectionItemType(t)}},{key:"getByDirection",value:function(t){return this.filter(function(e){return e.direction===t})}},{key:"getByName",value:function(t){return t&&t.constructor===String?this.filter(function(e){return e.name.toLowerCase()===t.toLowerCase()}):[]}},{key:"getByStatus",value:function(t){return this.filter(function(e){return e.status===t})}},{key:"getByPathType",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.filter(function(e){return e.pathTypeId===t.id})}},{key:"getByWaypoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.filter(function(e){return e.waypointIds.find(function(e){return e===t.id})})}}]),e}(u);t.exports=l},function(t,e,n){"use strict";(function(e){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(7),u=n(25),l=n(18),c=n(14),h=function(t){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,n);var o=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));o.locations=new u(t.locations),o.uris=new c,o.uris.createBatch(t.uris?t.uris.items:[]);try{var a=e.DOMParser,s=t.svg;s=s.replace(/\r\n|\r|\n|\t/g,""),s=s.replace(/\s+/g," "),o._.svgTree=(new a).parseFromString(s,"text/xml"),o._.viewbox=l.getViewbox(o._.svgTree)}catch(t){}return o}return o(n,t),a(n,[{key:"accessibility",get:function(){return this.get("accessibility",null)},set:function(t){this.set("accessibility",t,Number)}},{key:"description",get:function(){return this.get("description",null)},set:function(t){this.set("description",t,String)}},{key:"direction",get:function(){return this.get("direction",null)},set:function(t){this.set("direction",t,Number)}},{key:"maxFloors",get:function(){return this.get("maxFloors",null)},set:function(t){this.set("maxFloors",t,Number)}},{key:"verticalWeight",get:function(){return this.get("verticalWeight",null)},set:function(t){this.set("verticalWeight",t,Number)}},{key:"name",get:function(){return this.get("name",null)},set:function(t){this.set("name",t,String)}},{key:"weight",get:function(){return this.get("weight",null)},set:function(t){this.set("weight",t,Number)}},{key:"speed",get:function(){return this.get("speed",null)},set:function(t){this.set("speed",t,Number)}},{key:"svg",get:function(){return this.get("svg",null)},set:function(t){this.set("svg",t,String)}},{key:"svgTree",get:function(){return this.get("svgTree",null)},set:function(t){this.set("svgTree",t,Object)}}]),n}(s);t.exports=h}).call(e,n(1))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(72),u=n(8),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s))}return o(e,t),a(e,[{key:"isPathType",value:function(t){return this.isCollectionItemType(t)}},{key:"getByName",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.constructor!==String?[]:this.filter(function(e){return e.name.toLowerCase()===t.toLowerCase()})}},{key:"getByDirection",value:function(t){return this.filter(function(e){return e.direction===t})}}]),e}(u);t.exports=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(7),u=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"resourceType",get:function(){return this.get("resourceType",null)},set:function(t){this.set("resourceType",t,Number)}},{key:"mimeType",get:function(){return this.get("mimeType",null)},set:function(t){this.set("mimeType",t,Number)}},{key:"path",get:function(){return this.get("path",null)},set:function(t){this.set("path",t,String)}}]),e}(s);t.exports=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(61),l=n(62),c=n(63),h=n(67),f=n(69),p=n(73),d=n(26),y=n(78),v=n(7),g=Math,m=function(t,e){return g.sqrt(g.pow(e[0]-t[0],2)+g.pow(e[1]-t[1],2))},b=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.buildings=new l,n.destinations=new c,n.amenities=new u,n.pathTypes=new p,n.maps=new h,n.mapLabels=new f,n._._populated=!1,n._updateWayfinder(),n}return o(e,t),s(e,[{key:"wayfind",value:function(t,e,n){var r=this;return this._.wayfinder.search(t,e,n).map(function(t){return t.points=t.points.map(function(e){return r.maps.getById(t.mapId).waypoints.getById(e.id)}),t})}},{key:"getClosestWaypointToCoordinatesOnMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.maps.isMap(e)?this.getClosestWaypointToCoordinate(t,e.waypoints.getAll()):null}},{key:"getClosestWaypointToCoordinate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.getAllWaypoints(),n={waypoint:null,distance:1/0};return e.forEach(function(e){var r=m(e.coordinates,t);r<n.distance&&(n.distance=r,n.waypoint=e)}),n.waypoint}},{key:"getClosestWaypointInArrayToWaypoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2],i={};return t.constructor!==d?null:(n.forEach(function(n){if(n.constructor===d&&t.id!==n.id){var o=e.wayfind(t,n,r),a=void 0;o[o.length-1]&&(a=o[o.length-1].cost),(!i.cost||i.cost>a)&&(i.cost=a,i.wp=n)}}),i.wp||null)}},{key:"getClosestDestinationToWaypoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},r=arguments[2];if(t.constructor===d){var i=function(t){return e.destinations.getByWaypoint(t).filter(n)[0]},o=this.maps.getWaypointsWithDestinations().filter(i),a=this.getClosestWaypointInArrayToWaypoint(t,o,r);return{destination:a?i(a):null,waypoint:a}}return null}},{key:"getClosestAmenityToWaypoint",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},r=arguments[2];if(t.constructor===d){var i=function(t){return e.amenities.getByWaypoint(t).filter(n)[0]},o=this.maps.getWaypointsWithAmenities().filter(i),a=this.getClosestWaypointInArrayToWaypoint(t,o,r);return{amenity:a?i(a):null,waypoint:a}}return null}},{key:"_updateWayfinder",value:function(){this._.wayfinder=new y({buildings:this.buildings.getAll(),maps:this.maps.getAll(),paths:this.maps.getAllPaths(),pathTypes:this.pathTypes.getAll(),waypoints:this.maps.getAllWaypoints()})}},{key:"_togglePaths",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=function(t){var n=e.maps.getAll()[0].waypoints,r=t||[],i=a(r,2),o=i[0],s=i[1];return 2===t.length&&n.isWaypoint(o)&&n.isWaypoint(s)},i=function(t){if(r(t)){var i=e._.wayfinder._.astar.grid.nodeHash,o=i[t[0].id];if(o&&!n)o.neighbors=o.neighbors.filter(function(e){return e.id===t[1].id||o.originalNeighbors||(o.originalNeighbors=o.neighbors.slice()),e.id!==t[1].id});else if(o&&o.originalNeighbors){var a=o.originalNeighbors.find(function(e){return e.id===t[1].id}),s=o.neighbors.find(function(e){return e.id===t[1].id});a&&!s&&o.neighbors.push(a)}return!0}return!1};return!i(t)&&Array.isArray(t)&&t.forEach(function(t){return i(t)}),this}},{key:"coordinates",get:function(){return this.get("coordinates",null)},set:function(t){this.set("coordinates",t,String)}},{key:"name",get:function(){return this.get("name",null)},set:function(t){this.set("name",t,String)}},{key:"templateId",get:function(){return this.get("defaultMapTemplateId",null)},set:function(t){this.set("defaultMapTemplateId",t,Number)}}]),e}(v);t.exports=b},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(37),u=n(8),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s))}return o(e,t),a(e,[{key:"isBasicVenue",value:function(t){return this.isCollectionItemType(t)}},{key:"getByName",value:function(t){return t&&t.constructor===String?this.filter(function(e){return e.name&&e.name.toLowerCase()===t.toLowerCase()}):[]}}]),e}(u);t.exports=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(26),u=n(8),l=n(25),c=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s))}return o(e,t),a(e,[{key:"isWaypoint",value:function(t){return this.isCollectionItemType(t)}},{key:"getByDestination",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.locations;return e&&e.constructor===l?this.filter(function(t){return e.getByWaypointId(t.id)}):[]}},{key:"getByAmenity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.locations;return e&&e.constructor===l?this.filter(function(t){return e.getByWaypointId(t.id)}):[]}}]),e}(u);t.exports=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(161),a=n(26),s=function(){function t(e){var n=e.waypoints,i=e.paths,a=e.pathTypes,s=e.maps,u=e.buildings;r(this,t),this._={astar:new o(n,i,a,s,u)}}return i(t,[{key:"search",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;if(t&&e&&t.constructor===a&&e.constructor===a)return this._.astar.search(t.id,e.id,n);throw new TypeError("Wayfinder :: First two arguments must be Waypoints")}}]),t}();t.exports=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){r(this,t),this._={},this._.seq=e.seq,this._.mapId=e.mapId,this._.mover=e.mover,this._.points=e.points,this._.cost=e.cost}return i(t,[{key:"get",value:function(t,e){return void 0!==this._[t]?this._[t]:e}},{key:"set",value:function(t,e,n,r){e.constructor===n?this._[t]=e:this._[t]=r}},{key:"seq",get:function(){return this.get("seq",null)},set:function(t){this.set("seq",t,Number,null)}},{key:"mapId",get:function(){return this.get("mapId",null)},set:function(t){this.set("mapId",t,Number,null)}},{key:"mover",get:function(){return this.get("mover",null)},set:function(t){this.set("mover",t,Object,null)}},{key:"points",get:function(){return this.get("points",[])},set:function(t){this.set("points",t,Array,[])}},{key:"cost",get:function(){return this.get("cost",null)},set:function(t){this.set("cost",t,Number,null)}}]),t}();t.exports=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(19),u=r(s),l=n(11),c=r(l),h=n(6),f=r(h),p=function(){function t(e){var n=e.id,r=e.url,i=e.description,a=e.name,s=e.width,u=e.height,l=e.point,c=e.rotation,h=e.rotateWithMap,f=e.scaleWithMap,p=e.autoCorrectRotation,d=e.scale;o(this,t),this.id=n,this.url=r,this.description=i,this.point=l,this.rotation=c||0,this.name=a,this.visible=!0,this.hidden=!1,this.width=s,this.height=u,this.rotateWithMap=!!h,this.scaleWithMap=!!f,this.autoCorrectRotation=!!p,this.scaleFactor=d||1,this.scale=1,this.setImage(r),this._setBoundingPoints()}return a(t,[{key:"requestRender",value:function(){c.default.emit("REQUEST_RENDER")}},{key:"setPoint",value:function(t){this.container?(this.point[0]=this.container.x=t[0],this.point[1]=this.container.y=t[1],this.requestRender()):this.point=t}},{key:"setImage",value:function(t){this.url=t,this.image=new u.default({url:t,point:[0,0],width:this.width,height:this.height,visible:this.visible,scaleWithMap:!0,autoCorrectRotation:this.autoCorrectRotation}),this.image.parent=this.parent,this.requestRender()}},{key:"_setBoundingPoints",value:function(){var t=this.point[0]-this.width/2,e=this.point[1]-this.height/2;this.boundingPoints=[[t,e],[t+this.width,e],[t+this.width,e+this.height],[t,e+this.height],[t,e]],this.scaledPoints=this.boundingPoints}},{key:"updateIconTransform",value:function(){var t=this.parent.parent,e=this.container;if(e&&t){var n;if(e.width=this.width,e.height=this.height,(n=e.position).set.apply(n,i(this.point)),this.scale=this.scaleFactor,!this.scaleWithMap){var r=e.scale.x/t.scale;this.scale=Math.min(r,1)*this.scaleFactor}e.scale.set(this.scale),e.rotation=this.image.calculateRotation(this,t,e),this.requestRender()}}},{key:"containsPoint",value:function(t){return this.scale<=1?this.scaledPoints=f.default.scalePointsAroundCenterPoint(this.boundingPoints,this.point,this.scale):this.scaledPoints=this.boundingPoints,f.default.pointInPolygon(t,this.scaledPoints)}},{key:"clear",value:function(){if(this.container&&this.container.parent&&this.container.parent.removeChild(this.container),this.parent){var t=this.parent.icons.indexOf(this);t>-1&&this.parent.icons.splice(t,1)}this.requestRender()}},{key:"visible",get:function(){return this._visible},set:function(t){this._visible=!!t,this.image&&!this.hidden&&(this.image.visible=this._visible,this.requestRender())}},{key:"hidden",get:function(){return this._hidden},set:function(t){this._hidden=!!t,this.image&&(this.image.hidden=t,this.requestRender())}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.container&&(this.container.rotation=f.default.degreesToRadians(f.default.validate(t,Number,0)),this.requestRender())}},{key:"parent",get:function(){return this._parent},set:function(t){this._parent=t,this.image&&(this.image.parent=t)}}]),t}();e.default=p},function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(6),u=r(s),l=n(27),c=r(l),h=n(83),f=r(h),p=n(40),d=r(p),y=function(){function e(t){var n=this,r=t.id,i=t.name,a=t.sequence,s=t.width,l=void 0===s?5500:s,c=t.height,h=void 0===c?5500:c;o(this,e),this.id=u.default.validate(r,Number,null,["MapView","id"]),this.name=u.default.validate(i,String,null,["MapView","name"]),this.sequence=u.default.validate(a,Number,null,["MapView","sequence"]),this.mapLayers=[],this.size={width:l,height:h},this.bounds=this._calculateBounds(),this.popups=[],this.popupFragment=document.createDocumentFragment(),this.stateChanged=!0,this._respectBounds=!0,this._animations=[],this._updateAnimations=this._updateAnimations.bind(this),this._updateSpriteThrottled=u.default.throttle(function(){n.updateSprites()},5)}return a(e,[{key:"_calculateBounds",value:function(){var t=this.size.width,e=this.size.height,n=[t/2,e/2],r=this.initialBoundsAsPoints=this.boundsAsPoints=[[n[0],0],[t,n[1]],[n[0],e],[0,n[1]]].map(function(t){return u.default.rotatePointAroundCenterPoint(t,n,-.785398,3)});return u.default.getBoundingBoxFromPoints(r)}},{key:"updateBounds",value:function(t){this.initialBoundsAsPoints=u.default.boundsToPoints(t),this.rotateBounds(this.rotation)}},{key:"rotateBounds",value:function(t){var e=this.size.width,n=this.size.height,r=[e/2,n/2],i=this.initialBoundsAsPoints,o=u.default.degreesToRadians(t),a=i.map(function(t){return u.default.rotatePointAroundCenterPoint(t.slice(),r,o,3)});return this.boundsAsPoints=a,this.bounds=u.default.getBoundingBoxFromPoints(a),this.bounds}},{key:"_respectMinMaxScale",value:function(t){return this.clampScale(t)}},{key:"getLayers",value:function(){return this.mapLayers}},{key:"guaranteeMapLayer",value:function(t){var e=this.getLayerByName(t);return e||(e=new c.default({name:t}),this.addMapLayer(e)),e}},{key:"hasLayerWithName",value:function(t){return!!this.getLayerByName(t)}},{key:"getLayerByName",value:function(t){return this.mapLayers.find(function(e){return e.name.toLowerCase()===t.toLowerCase()})}},{key:"hide",value:function(){return this.container.visible=this.visible=!1,this.render(),this}},{key:"show",value:function(){this.container.visible=this.visible=!0,this.stateChanged?(this.render(!0),this.stateChanged=!1):this.render()}},{key:"setPosition",value:function(t){return this.container.position.set(t[0],t[1]),this.updatePopupsPosition(),this.isWithinBounds()||this.resetTriggered||(this.resetTriggered=!0,this.snapToBounds(),this.resetTriggered=!1),this}},{key:"snapToBounds",value:function(){var t=this.parent.getLocalCanvasPoints(),e=this.boundsAsPoints,n=this.getMapCenter(),r=t.map(function(t){return{distance:u.default.distanceBetweenPoints(t,n),point:t}});r.sort(function(t,e){return t.distance>e.distance?-1:t.distance<e.distance?1:0});var i=null,o=r[0],a=r[1];if(o.distance-a.distance<10){var s=u.default.distanceBetweenPoints(o.point,a.point);i=u.default.movePoint(o.point,a.point,s/2)}var l=i||o.point,c=e.reduce(function(t,r,i){var o=[n,l],a=[r,e[i+1]||e[0]];return u.default.doLinesIntersect(o,a)?u.default.getPointOfIntersection(o,a):t},null);if(c){var h=this.parent.getViewportPointFromMapPoint(l),f=this.parent.putMapPointOnViewPortPoint(c,h);this.setPosition(f)}}},{key:"getPosition",value:function(){return[this.container.x,this.container.y]}},{key:"roundPosition",value:function(){return this.setPosition(this.getPosition().map(Math.round))}},{key:"setRotationFromViewPortPoint",value:function(t,e){return this._setFromViewPortPoint("rotation",t,e)}},{key:"setRotation",value:function(t){return this.rotation=t,this}},{key:"getRotation",value:function(){return this.rotation}},{key:"setScaleFromViewPortPoint",value:function(t,e){return this._setFromViewPortPoint("scale",t,e)}},{key:"setScale",value:function(t){return this.scale=t,this}},{key:"getScale",value:function(){return this.scale}},{key:"getScaledWidth",value:function(){return this.size.width*this.getScale()}},{key:"getScaledHeight",value:function(){return this.size.height*this.getScale()}},{key:"getMapCenter",value:function(){return[this.size.width/2,this.size.height/2]}},{key:"getMapCenterScaled",value:function(){return[this.getScaledWidth()/2,this.getScaledHeight()/2]}},{key:"getMapCenterPosition",value:function(t){var e=t?this.getMapCenterScaled():this.getMapCenter(),n=2*u.default.getDevicePixelRatio();return[-(e[0]-this.parent.view.width/n),-(e[1]-this.parent.view.height/n)]}},{key:"addMapLayer",value:function(t){var e=this;if(this.hasLayerWithName(t.name))throw new Error("Cannot add MapLayer with existing name to MapView");return this.mapLayers=u.default.addSingleOrCollection(t,c.default,this.mapLayers,function(t){t.parent=e,t.sequence||(t.sequence=e.mapLayers.length)}),u.default.sortBySequence(this.mapLayers),this}},{key:"getMapLayerById",value:function(t){return this.mapLayers.find(function(e){return e.id===t})}},{key:"getMapLayerByName",value:function(t){return this.mapLayers.find(function(e){return e.name.toLowerCase()===t.toLowerCase()})}},{key:"centerMapToViewPort",value:function(){return this.setPosition(this.getMapCenterPosition())}},{key:"_showBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16733986,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,r="bounds-layer",i=t||this.boundsAsPoints,o=u.default.boundsToPoints(i);o.push(o[0]);var a=this.boundsPoly=new f.default({points:o,stroke:e,strokeWidth:n});if(this.hasLayerWithName(r))this.getLayerByName(r).addShape(a);else{var s=new c.default({name:r});s.addShape(a),this.addMapLayer(s)}return this}},{key:"isWithinBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0];try{if(!this.parent._dirtyMinScale){var e=this.parent.getLocalCanvasPoints(),n=this.boundsAsPoints;return!e.some(function(e){return!u.default.pointInPolygon([e[0]-t[0],e[1]-t[1]],n)})}}catch(t){}return!0}},{key:"setCustomBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,o=t.width,a=void 0===o?5500:o,s=t.height,u=void 0===s?5500:s;return this.bounds={x:n,y:i,width:a,height:u}}},{key:"getBounds",value:function(){return this.bounds}},{key:"render",value:function(t){return t}},{key:"_setFromViewPortPoint",value:function(t,e,n){var r=this.parent;if(r){var i=n||r.getViewCenter(),o=r.getMapPointFromViewPortPoint(i);this[t]=e;var a=r.putMapPointOnViewPortPoint(o,i);this.setPosition(a)}return this}},{key:"removeShape",value:function(t){this._shapes=null,t&&t.clear(),this._removeLayerItem("Shape",t)}},{key:"removeImage",value:function(t){this._removeLayerItem("Image",t)}},{key:"removeText",value:function(t){this._removeLayerItem("Text",t)}},{key:"removeIcon",value:function(t){this._removeLayerItem("Icon",t)}},{key:"removeMovingObject",value:function(t){this._removeLayerItem("MovingObject",t)}},{key:"removeMapLayer",value:function(t){if(!u.default.cascade(this,"removeMapLayer",[t])){var e=this.mapLayers,n=e.indexOf(t);e.splice(n,1)}this.render(!0)}},{key:"_removeLayerItem",value:function(t,e){var n=this;return e.constructor===Array?e.slice().forEach(function(e){return n._removeItem(t,e)}):(u.default.cascade(this,"remove"+t,[e])||(e&&e.clear(),this.mapLayers.forEach(function(n){var r=n[t.toLowerCase()+"s"],i=r.indexOf(e);-1!==i&&r.splice(i,1)})),this)}},{key:"fitBoundsInView",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.bounds,n=void 0===e?{}:e,r=t.padding,i=void 0===r?0:r,o=t.speed,a=t.onUpdate,s=t.onComplete,u=this.parent.view.getBoundingClientRect(),l=this.size.width,c=this.size.height,h=[n.x+n.width/2,n.y+n.height/2],f=u.width*l/(n.width+i)/l,p=u.height*c/(n.height+i)/c,d=Math.min(f,p);return this.focusToPoint({point:h,scale:d,speed:o,onUpdate:a,onComplete:s})}},{key:"setCenterPosition",value:function(t){var e=this.parent.getCenterOfViewPort();return this.setPosition(this.parent.putMapPointOnViewPortPoint(t,e)),this}},{key:"focusToPoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.point,n=t.scale,r=t.rotation,i=t.speed,o=t.onUpdate,a=void 0===o?function(){}:o,s=t.onComplete,u=void 0===s?function(){}:s,l=t.easing;return this._animations=[],this.animate({duration:i,center:e,scale:n,rotation:r,onUpdate:a,onComplete:u,easing:l})}},{key:"animate",value:function(){for(var t=this,e=Date.now(),n=this.parent.getCenterPoint().slice(),r=this.getScale(),i=this.getRotation(),o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=a[a.length-1],l="function"==typeof u?u:null,c=function(t){return t<.5?2*t*t:(4-2*t)*t-1},h=a.reduce(function(o,a){if(a===l)return o;var s={start:e,complete:!1,duration:1e3*(void 0!==a.duration?a.duration:1),easing:a.easing||c,onComplete:a.onComplete||function(){},onUpdate:a.onUpdate||function(){}};return a.center&&(s.sourceCenter=n,s.targetCenter=a.center,n=s.targetCenter),void 0!==a.scale&&(s.sourceScale=r,s.targetScale=t.clampScale(a.scale),r=s.targetScale),void 0!==a.rotation&&(s.sourceRotation=i,s.targetRotation=a.rotation,Math.abs(s.sourceRotation-s.targetRotation)>180&&(s.sourceRotation>s.targetRotation?s.sourceRotation-=360:s.sourceRotation+=360),i=s.targetRotation),e+=s.duration,o.push(s),o},[]);h._seriesOnComplete=l,this._animations.push(h),this.parent.engine.start(),this._updateAnimations()}},{key:"_cancelAnimations",value:function(){void 0!==this._updateAnimationKey&&(t.cancelAnimationFrame(this._updateAnimationKey),this._updateAnimationKey=void 0)}},{key:"_updateAnimations",value:function(){var e=this;this._cancelAnimations();for(var n=Date.now(),r=!1,i=this._animations.length-1;i>=0;--i){for(var o=this._animations[i],a=!0,s=0;s<o.length;++s){var l=o[s];if(!l.complete){var c=n-l.start,h=l.duration>0?c/l.duration:1;h>=1?(l.complete=!0,this.updateSprites(),l.onComplete&&l.onComplete(s),0===l.duration&&t.requestAnimationFrame(function(){return e.render()}),h=1):a=!1;var f=l.easing(h),p=1===f,d=l.sourceCenter,y=l.sourceScale,v=l.targetScale,g=l.sourceRotation,m=l.targetRotation;if(d){var b=u.default.lerpPoint(l.sourceCenter,l.targetCenter,f);this.setCenterPosition(b)}if(y&&v){var _=p?v:u.default.lerp(y,v,f);this.setScaleFromViewPortPoint(_)}if(void 0!==g&&void 0!==m){var w=p?m:u.default.lerp(g,m,f);this.setRotationFromViewPortPoint(w)}if(l.onUpdate(h),r=!0,!l.complete)break}}if(a){this._animations[i]=null;var x=o._seriesOnComplete;x&&x(!0),this.parent.engine.stop()}}this._animations=this._animations.filter(Boolean),r&&void 0===this._updateAnimationKey&&(this._updateAnimationKey=t.requestAnimationFrame(this._updateAnimations))}},{key:"clampScale",value:function(t){return+Math.max(this.parent.minScale,Math.min(this.parent.maxScale,t)).toFixed(5)}},{key:"getPopups",value:function(){return this.popups}},{key:"getPopupsFragment",value:function(){return this.popupFragment}},{key:"updatePopupsFragment",value:function(){var t=this;this.popupMap={};var e=this.getPopupsFragment();if(this.parent){this.getPopups().forEach(function(n){var r=n.dataset.junglePopupId;e.querySelector('[data-jungle-popup-id="'+r+'"]')||e.appendChild(n),t.popupMap[r]=n});for(var n=0;n<e.children.length;n++){var r=e.children[n],i=r.dataset.junglePopupId;this.popupMap[i]||e.removeChild(r)}}return this}},{key:"updatePopupsPosition",value:function(){if(this.current)for(var t=this.parent.getPopupContainer(),e=t.childNodes,n=this.parent.pfx.transform,r=0;r<e.length;r++){var i=e[r],o=i.dataset.junglePosition.split(",").map(Number),a=this.parent.getViewportPointFromMapPoint(o);i.style[n]="translate3d("+a[0]+"px, "+a[1]+"px, 0)"}return this}},{key:"addPopup",value:function(t,e){if(!t||1!==t.nodeType)throw new Error("Popup must be nodeType 1 (Element)");if(this.parent){t.dataset.junglePosition=e;var n=t.dataset.junglePopupId;if(n){var r=this.parent.mapViews.find(function(t){return t.popupMap[n]});r.popups.splice(r.popups.indexOf(t),1),delete r.popupMap[n]}else t.dataset.junglePopupId=this.parent._generateTag();t.style.position="absolute",t.style.pointerEvents="fill",this.getPopups().push(t),this.updatePopupsFragment(),this.current&&(this.addAllPopupsToStage(),this.updatePopupsPosition())}else this._noParent();return this}},{key:"addAllPopupsToStage",value:function(){return this.parent?this.parent.getPopupContainer().appendChild(this.getPopupsFragment()):this._noParent(),this}},{key:"clearAllPopupsFromStage",value:function(){return this.parent?this.getPopups().forEach(this.clearPopupFromStage,this):this._noParent(),this}},{key:"clearPopupFromStage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.parent){var e=this.parent.getPopupContainer();(t.parent||t.parentElement||t.parentNode)===e&&e.removeChild(t);for(var n=this.getPopupsFragment(),r=0;r<n.children.length;r++){var i=n.children[r],o=t.dataset.junglePopupId;this.popupMap[o]||n.removeChild(i)}return this}return this._noParent()}},{key:"removePopup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getPopupsFragment(),n=t.dataset.junglePopupId,r=e.querySelector('[data-jungle-popup-id="'+n+'"]'),i=this.popupMap[n];return r&&e.removeChild(t),i&&delete this.popupMap[n],this.current&&this.clearPopupFromStage(t),this.popups.splice(this.popups.indexOf(t),1),this}},{key:"updateSprites",value:function(){return(0,d.default)(this.getLayers(),function(t){return t.updateSprites()}),this}},{key:"_noParent",value:function(){throw new Error("MapView does not belong to a stage")}},{key:"shapes",get:function(){return this._shapes?this._shapes:this._shapes=this.getLayers().reduce(function(t,e){return t.concat.apply(t,i(e.getShapes()))},[])}},{key:"icons",get:function(){return this.getLayers().reduce(function(t,e){return t.concat.apply(t,i(e.getIcons()))},[])}},{key:"movingobjects",get:function(){return this.getLayers().reduce(function(t,e){return t.concat.apply(t,i(e.getMovingObjects()))},[])}},{key:"texts",get:function(){return this.getLayers().reduce(function(t,e){return t.concat.apply(t,i(e.getTexts()))},[])}},{key:"images",get:function(){return this.getLayers().reduce(function(t,e){return t.concat.apply(t,i(e.getImages()))},[])}},{key:"shapeCount",get:function(){return this.shapes.length}},{key:"imageCount",get:function(){return this.images.length}},{key:"textCount",get:function(){return this.texts.length}},{key:"current",set:function(t){this._current=t,!0===t?this.updatePopupsFragment().addAllPopupsToStage():!1===t&&this.clearAllPopupsFromStage()},get:function(){return this._current}},{key:"scale",get:function(){return this._scale||1},set:function(t){this._scale=this.clampScale(t),this.container.scale.set(this._scale),this._updateSpriteThrottled(),(0,d.default)(this.icons,function(t){return t.updateIconTransform()}),(0,d.default)(this.movingobjects,function(t){return t.updateMovingObjectTransform()})}},{key:"rotation",get:function(){return this._rotation||0},set:function(t){this._rotation=u.default.validate(t,Number,1),this.container.rotation=u.default.degreesToRadians(this._rotation),this.rotateBounds(-t)}},{key:"bounds",set:function(t){this._bounds=t},get:function(){return this._bounds}}]),e}();e.default=y}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(19),l=r(u),c=n(20),h=r(c),f=n(38),p=r(f),d=n(11),y=r(d),v=n(53),g=r(v),m=n(6),b=r(m),_=function(){function e(t){var n=t.id,r=t.name,i=t.width,a=t.height,s=t.url,u=t.position,l=t.speed,c=t.orientation,f=t.scaleWithMap,d=t.rotateWithMap,y=t.map,v=t.anchor,g=t.confidencePercent,m=t.confidenceMax,_=t.confidenceColor,w=t.confidenceAlpha,x=t.pulseColor,T=t.pulseStartAlpha,S=t.pulseEndAlpha,E=t.pulseDuration,O=t.pulseDelay,M=t.pulseVisible,P=t.iconColor,C=t.iconRadius,A=t.snapToGrid,k=t.snapToWaypoint;o(this,e),this.anchor=v,this.url=s,this.container=new h.default.Container,this.pulse=new p.default({point:[0,0],scaleWithMap:!1}),this.confidence=new p.default({point:[0,0],scaleWithMap:!1}),this.visible=!0,this.meta={},this.id=b.default.validate(n,Number,0),this.name=b.default.validate(r,String,""),this.position=u,this.orientation=c,this.speed=l,this.map=y,this.rotateWithMap=b.default.validate(d,Boolean,!0),this.scaleWithMap=b.default.validate(f,Boolean,!0),this.snapToGrid=A,this.snapToWaypoint=k,this.iconColor=P,""===this.url?i>0&&a>0?this.iconRadius=Math.min(i,a)/2:i>0?this.iconRadius=i/2:a>0&&(this.iconRadius=a/2):(this.width=i,this.height=a),this.iconRadius=C,this.pulseColor=x,this.pulseStartAlpha=T,this.pulseEndAlpha=S,this.pulseDuration=E,this.pulseDelay=O,this.pulseVisible=M,this.confidenceMax=m,this.confidenceColor=_,this.confidenceAlpha=w,this.confidencePercent=g,this._animatePulse()}return s(e,[{key:"requestRender",value:function(){y.default.emit("REQUEST_RENDER")}},{key:"_generateCircleIcon",value:function(){return new p.default({point:[0,0],stroke:16777215,fill:this.iconColor?parseInt(this.iconColor.replace("#","0x"),16):void 0,radius:this.iconRadius?this.iconRadius:void 0,strokeWidth:2,scaleWithMap:!0})}},{key:"_generateSpriteIcon",value:function(){return new l.default({url:this.url,point:[0,0],width:this._width,height:this._height,visible:!0,scaleWithMap:!0,anchor:this.anchor})}},{key:"_displayPulse",value:function(){return this.pulseVisible&&this.confidencePercent&&this.confidenceMax}},{key:"_animatePulse",value:function(){var e=this;this._killPulseAnimation(),this._displayPulse()&&(this._pulseAnimation=g.default.to(this.pulse,1e3*this.pulseDuration,{scale:this.confidencePercent,opacity:this.pulseEndAlpha,onUpdate:function(){e.pulse.graphic&&(e.pulse.graphic.alpha=e.pulse.opacity,e.pulse.graphic.scale.set(Math.min(e.confidence.scale,e.pulse.scale))),e.requestRender()},onComplete:function(){t.setTimeout(function(){return e._animatePulse()},1e3*e._pulseDelay)}}))}},{key:"_killPulseAnimation",value:function(){return this._pulseAnimation&&this._pulseAnimation.kill(),this.pulse.setOpacity(this.pulseStartAlpha).scale=0,this}},{key:"_killPositionAnimation",value:function(){return this._positionAnimation&&this._positionAnimation.kill(),this}},{key:"_killRotationAnimation",value:function(){return this._rotationAnimation&&this._rotationAnimation.kill(),this}},{key:"_getDuration",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e&&e.duration?e.duration:0;if(t&&void 0===e.duration){var r=t,i=this.speed,o=b.default.distanceBetweenPoints(this.position,r);o>0&&(n=o/i)}return n}},{key:"updateMovingObject",value:function(n){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};["pulseDelay","pulseDuration","pulseStartAlpha","pulseEndAlpha","pulseVisible","id","name","speed","scaleWithMap","rotateWithMap","snapToWaypoint","snapToGrid","url","map","anchor"].forEach(function(t){n[t]!==r[t]&&void 0!==n[t]&&(r[t]=n[t])});var o=i&&i.ease?i.ease:function(t){return t},a=function(){t.jmap&&t.jmap.dispatcher&&t.jmap.dispatcher.publish("MOVING_OBJECT_ANIMATION_COMPLETE",[r]),i&&i.onComplete&&i.onComplete()},s=i&&i.onUpdate?i.onUpdate:function(){},u=this._getDuration(n.position,i);n.orientation&&(n.orientation=e._sanitizeOrientation(n.orientation));var l=["confidenceMax","confidencePercent","confidenceAlpha","orientation","width","height","iconRadius"],c=function(t,e){return!!(t||n[e]&&n[e]!==r[e])},h=l.reduce(c,!1);if(h){var f=l.reduce(function(t,e){return n[e]?(t[e]=r[e],t):t},{}),p=l.reduce(function(t,e){return n[e]?(t[e]=n[e],t):t},{});p.ease=o,p.onUpdate=function(t){l.forEach(function(e){return void 0!==t[e]?r[e]=t[e]:null}),s()},p.onComplete=a,g.default.to(f,1e3*u,p)}var d=["confidenceColor","pulseColor","iconColor"],y=function(t,e){return!!(t||n[e]&&n[e]!==r[e])},v=d.reduce(y,!1);if(v&&d.forEach(function(t){n[t]&&e._animateHex(r[t],n[t],{onUpdate:function(e){r[t]=e,h||s()},onComplete:function(){h||a()},duration:u,ease:o})}),n.position){var m={duration:u,ease:o};h||v||(m.onComplete=a,m.onUpdate=s),this.moveToPosition(n.position,m)}}},{key:"moveToPosition",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._getDuration(t,r);if(e._validPosition(t)){this._killPositionAnimation();var o=a(this.position,2),s=o[0],u=o[1];this._positionAnimation=g.default.to({x:s,y:u},1e3*i,{x:t[0],y:t[1],onUpdate:function(t){n.position=[t.x,t.y],r.onUpdate&&r.onUpdate()},onComplete:function(t){n.position=[t.x,t.y],r.onComplete&&r.onComplete()},ease:r.ease||null})}return this}},{key:"rotateToOrientation",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.duration||0;if("number"==typeof t){this._killRotationAnimation();var i={orientation:this.orientation};this._rotationAnimation=g.default.to(i,1e3*r,{orientation:t%360,onUpdate:function(t){n.onUpdate(),e.orientation=t.orientation},onComplete:n.onComplete,ease:n.ease})}return this}},{key:"updateMovingObjectTransform",value:function(){var t=this,e=this.parent.parent,n=this.container;if(n&&e){var r,o=this.scaleWithMap?1:1/e.scale;n.width=Math.max(2*this.confidenceMax,this.width*o,2*this.iconRadius*o),n.height=Math.max(2*this.confidenceMax,this.height*o,2*this.iconRadius*o),(r=n.position).set.apply(r,i(this.position)),n.scale.set(1),["graphic","sprite"].forEach(function(n){if(t.icon[n]&&(t.icon[n]&&!t.scaleWithMap&&t.icon[n].scale.set(1/e.scale),"sprite"===n)){var r;t.icon[n].width=t.scaleWithMap?t.width:t.width/e.scale,t.icon[n].height=t.scaleWithMap?t.height:t.height/e.scale,t.icon.setPoint(t.icon.point),(r=t.icon.sprite.anchor).set.apply(r,i(t.anchor))}}),this.rotateWithMap||(n.rotation=b.default.degreesToRadians(-e.rotation)),this.requestRender(),this.visible||(n.visible=!1)}return this}},{key:"containsPoint",value:function(t){if(e._validPosition(t)){var n=this.position[0]-t[0],r=this.position[1]-t[1],i=Math.pow(this.confidenceMax*this.confidencePercent,2);return n=Math.pow(n,2),r=Math.pow(r,2),n+r<=i}return!1}},{key:"clear",value:function(){if(this.container&&this.container.parent&&this.container.parent.removeChild(this.container),this.parent){var t=this.parent.movingobjects.indexOf(this);t>-1&&this.parent.movingobjects.splice(t,1)}return this.requestRender(),this}},{key:"position",get:function(){return this._position},set:function(t){e._validPosition(t)?(this._position=t.slice(),this.container.x=this._position[0],this.container.y=this._position[1],this.requestRender()):this._position=this._position||[]}},{key:"width",get:function(){return this._width},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;t>0&&(this._width=t,this.icon.url?this.icon.width=t:this.iconRadius=t/2,this.requestRender())}},{key:"height",get:function(){return this._height},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;t>0&&(this._height=t,this.icon.url?this.icon.height=t:this.iconRadius=t/2,this.requestRender())}},{key:"iconRadius",get:function(){return this._iconRadius},set:function(t){t>0?(this.icon.radius=this._iconRadius=t,""===this.url&&(this.width!==2*t&&(this.width=2*t),this.height!==2*t&&(this.height=2*t),this.icon.updateGraphic()),this.requestRender()):(this.icon.radius=this._iconRadius=this._iconRadius||10,""===this.url&&(this._width=this._height=2*this._iconRadius))}},{key:"orientation",get:function(){return this._orientation},set:function(t){e._sanitizeOrientation(t)?(this._orientation=e._sanitizeOrientation(t),this.container.rotation=b.default.degreesToRadians(this._orientation),this.requestRender()):this._orientation=this._orientation||0}},{key:"confidenceMax",get:function(){return this._confidenceMax},set:function(t){e._validInRange(t,1,1/0)?(this._confidenceMax=Math.min(t,e.confidenceMaxValue),this.pulse.radius=this.confidence.radius=this._confidenceMax,this.confidence.visible=this.confidencePercent>0,this.pulse.visible=this._displayPulse(),this._pulseAnimation||this._animatePulse(),this.requestRender()):this._confidenceMax=this._confidenceMax||1}},{key:"confidencePercent",get:function(){return this._confidencePercent},set:function(t){e._validInRange(t,0,1)?(this._confidencePercent=t,this.confidence.visible=t>0,this.requestRender()):this._confidencePercent=this._confidencePercent||1,this.confidence.scale=this._confidencePercent,this.confidence.graphic&&this.confidence.graphic.scale.set(this._confidencePercent),this.pulse.visible=this._displayPulse()}},{key:"confidenceColor",get:function(){return this._confidenceColor},set:function(t){var n=this._confidenceColor||"#308ce8";this._confidenceColor=e._sanitizeHexColor(t)||n;var r=parseInt(this._confidenceColor.replace("#","0x"),16);this.confidence.setFill(r).updateGraphic()}},{key:"confidenceAlpha",get:function(){return this._confidenceAlpha},set:function(t){e._validInRange(t,0,1)?this._confidenceAlpha=t:this._confidenceAlpha=this._confidenceAlpha||.5,this.confidence.setOpacity(this._confidenceAlpha).updateGraphic()}},{key:"pulseColor",get:function(){return this._pulseColor},set:function(t){this._pulseColor=e._sanitizeHexColor(t)||this._pulseColor||"#308ce8";var n=parseInt(this._pulseColor.replace("#","0x"),16);this.pulse.setFill(n).updateGraphic()}},{key:"pulseStartAlpha",get:function(){return this._pulseStartAlpha},set:function(t){e._validInRange(t,0,1)?(this._pulseStartAlpha=t,this._animatePulse()):this._pulseStartAlpha=this._pulseStartAlpha||1}},{key:"pulseEndAlpha",get:function(){return this._pulseEndAlpha},set:function(t){e._validInRange(t,0,1)?(this._pulseEndAlpha=t,this._animatePulse()):this._pulseEndAlpha=this._pulseEndAlpha||0}},{key:"pulseDuration",get:function(){return this._pulseDuration},set:function(t){e._validInRange(t,0,1/0,!1)?(this._pulseDuration=t,this._animatePulse()):this._pulseDuration=this._pulseDuration||1}},{key:"pulseDelay",get:function(){return this._pulseDelay},set:function(t){e._validInRange(t,0,1/0,!1)?(this._pulseDelay=t,this._animatePulse()):this._pulseDelay=this._pulseDelay||.35}},{key:"pulseVisible",get:function(){return this._pulseVisible},set:function(t){this.pulse.visible=this._pulseVisible=b.default.validate(t,Boolean,!1),this._animatePulse()}},{key:"url",get:function(){return this._url},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._url="string"==typeof t?t:this._url||"",this.icon&&this.icon.clear(),this.icon=""===t?this._generateCircleIcon():this._generateSpriteIcon(),this.icon.parent=this.parent}},{key:"iconColor",get:function(){return this._iconColor},set:function(t){this._iconColor=e._sanitizeHexColor(t)||this._iconColor||"#308ce8";var n=parseInt(this._iconColor.replace("#","0x"),16);this.icon.setFill&&this.icon.setFill(n).updateGraphic()}},{key:"visible",get:function(){return this._visible},set:function(t){this._visible=b.default.validate(t,Boolean,!0),this.container&&!this.hidden&&(this.container.visible=this._visible,this.requestRender())}},{key:"speed",get:function(){return this._speed},set:function(t){e._validInRange(t,0,1/0,!1)?this._speed=t:this._speed=this._speed||100}},{key:"snapToGrid",get:function(){return this.meta.snapToGrid},set:function(t){this.meta.snapToGrid=b.default.validate(t,Boolean,!1)}},{key:"anchor",get:function(){return this._anchor},set:function(t){if(e._validAnchor(t)){if(this._anchor=t.slice(),this.icon&&this.icon.sprite){var n;this.icon.anchor=this._anchor,(n=this.icon.sprite.anchor).set.apply(n,i(this._anchor)),this.icon.updateSprite()}this.requestRender()}else this._anchor=this._anchor||[.5]}},{key:"snapToWaypoint",get:function(){return this.meta.snapToWaypoint},set:function(t){this.meta.snapToWaypoint=b.default.validate(t,Boolean,!1)}}],[{key:"_validHexColor",value:function(t){return"string"==typeof t&&/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}},{key:"_sanitizeOrientation",value:function(t){if("number"==typeof t){var e=t%360;return e>180&&e<360&&(e-=360),e<-180&&e>-360&&(e+=360),e}return null}},{key:"_sanitizeHexColor",value:function(t){if(e._validHexColor(t)){if(4===t.length){var n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;return"#"+t.replace(n,function(t,e,n,r){return e+e+n+n+r+r})}return t}return null}},{key:"_validPosition",value:function(t){return!(!t||!Array.isArray(t)||2!==t.length)}},{key:"_validInRange",value:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return"number"==typeof n&&"number"==typeof e&&"number"==typeof t&&(r?t>=e&&t<=n:t>e&&t<n)}},{key:"_validAnchor",value:function(t){return!!(t&&Array.isArray(t)&&t.length>0&&t.length<=2)&&t.reduce(function(t,n){return t&&e._validInRange(n,0,1)},!0)}},{key:"_validRgbColor",value:function(t){var e=/(rgb\(((([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]),\s*){2}([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])\)))|(rgba\(((([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]),\s*){3}(1|1\.0*|0?\.\d*)\)))/i;return"string"==typeof t&&e.test(t)}},{key:"rgb2hex",value:function(t){if(e._validHexColor(t))return t;if(e._validRgbColor(t)){var n=/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i,r=t.match(n),i=("0"+parseInt(r[1],10).toString(16)).slice(-2),o=("0"+parseInt(r[2],10).toString(16)).slice(-2),a=("0"+parseInt(r[3],10).toString(16)).slice(-2);return r&&4===r.length?"#"+i+o+a:""}return null}},{key:"hexToRgb",value:function(t){if(e._validHexColor(t)){var n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=t.replace(n,function(t,e,n,r){return e+e+n+n+r+r}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null}return null}},{key:"_animateHex",value:function(t,e,n){var r=function(t,e,n){return"#"+((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},i=this.hexToRgb(t),o=this.hexToRgb(e);if(i&&o){var a=Object.assign({},o,n);a.onUpdate=function(t){var e=r(0|t.r,0|t.g,0|t.b);n.onUpdate(e)},g.default.to(i,1e3*n.duration,a)}}},{key:"confidenceMaxValue",set:function(t){this._confidenceMaxValue=t||50},get:function(){return this._confidenceMaxValue||50}}]),e}();e.default=_}).call(e,n(1))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(15),c=r(l),h=n(6),f=r(h),p="Polygon",d=function(t){function e(t){var n=t.id,r=t.points,i=t.fill,s=t.opacity,u=t.stroke,l=t.strokeWidth,h=t.strokeOpacity;o(this,e);var f=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{id:n,fill:i,opacity:s,stroke:u,strokeWidth:l,strokeOpacity:h}));return f.constructor=c.default,f.baseTypeName=p,f.points=r,f}return s(e,t),u(e,[{key:"getSegmentsFromShape",value:function(){return this.points.map(function(t,e,n){var r=n[e+1];return r?[t,r]:[t,n[0]]})}},{key:"containsPoint",value:function(t){return f.default.pointInPolygon(t,this.points)}},{key:"draw",value:function(){this.graphic.drawPolygon(this.flatPoints)}},{key:"points",get:function(){return this._points},set:function(t){var e;if(!t||!t.length)throw new Error("Polygon must have valid points option");this._points=f.default.validate(t,[Array],[],[p,"points"]);var n=f.default.getTopCornerFromPolygonPoints(this._points),r=n[0],o=n[1];this.localPosition=[r,o],this.localPoints=c.default.makeLocalPoints(this.localPosition,this._points),this.flatPoints=(e=[]).concat.apply(e,i(this.localPoints))}}]),e}(c.default);e.default=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(6),u=r(s),l=n(11),c=r(l),h=function(){function t(e){var n=e.point,r=e.name,i=e.width,a=e.height,s=e.rotation,l=e.preserveAspectRatio,c=e.visible,h=e.scaleWithMap,f=e.center,p=e.anchor,d=e.scale,y=e.autoCorrectRotation;o(this,t),this.width=i,this.height=a,this.name=r,this.point=n,this.rotation=u.default.degreesToRadians(u.default.validate(s,Number,0)),this.visible=c,this.preserveAspectRatio=l,this.resolution=u.default.getDevicePixelRatio(),this.scaleWithMap=h,this.center=!!f,this.anchor=p||[.5,.5],this.rotateWithMap=!0,this.scale=d||1,this.autoCorrectRotation=!!y}return a(t,[{key:"requestRender",value:function(){c.default.emit("REQUEST_RENDER")}},{key:"getMapView",value:function(){var t=this.parent;return t&&t.parent?t.parent:null}},{key:"setPoint",value:function(t){this.point=t,this.sprite&&(this.sprite.x=this.point[0],this.sprite.y=this.point[1],this.requestRender())}},{key:"setRotation",value:function(t){this.rotation=u.default.degreesToRadians(u.default.validate(t,Number,0)),this.sprite&&(this.sprite.rotation=this.rotation,this.requestRender())}},{key:"setVisible",value:function(t){this.visible=!!t}},{key:"getSize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.preserveAspectRatio?this.getAspectSize(e):this.getAspectRatio(function(){return e([t.width,t.height])})}},{key:"getAspectSize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.getAspectRatio(function(){var n=t.flipped?t.height:t.width,r=t.flipped?t.width:t.height,i=n/r,o=t.texture.baseTexture.width/t.texture.baseTexture.height;return t.aspectWidth=o>i?n:r*o,t.aspectHeight=o>i?n/o:r,e([t.aspectWidth,t.aspectHeight])})}},{key:"getAspectRatio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if(this.texture){var n=this.texture.baseTexture;n.hasLoaded?e(t.getSizeFromLoadedTexture(n)):n.on("loaded",function(){return e(t.getSizeFromLoadedTexture(n))})}}},{key:"getCenter",value:function(){return[this.point[0]+this.width/2,this.point[1]+this.height/2]}},{key:"clear",value:function(){if(this.sprite&&this.sprite.parent&&this.sprite.parent.removeChild(this.sprite),this.parent){var t=this.parent[this.type.toLowerCase()+"s"].indexOf(this);t>-1&&this.parent[this.type.toLowerCase()+"s"].splice(t,1)}this.requestRender()}},{key:"_updateSpriteScale",value:function(){if(this.parent&&this.parent.parent){var t=this.scaleWithMap?1:this.parent.parent.getScale(),e=this.sprite.texture?this.sprite.texture.width:1,n="Text"===this.type,r="Image"===this.type;if(n||r){var i=n?1:this.width/e,o=this.scale||1;this.sprite.scale.set(o*(i/t))}}}},{key:"updateSprite",value:function(){var t,e;if(this.sprite&&this.parent&&this.parent.parent){this._updateSize&&this._updateSize();var n=this.parent.parent;this.sprite.resolution=this.resolution,this.sprite.style=this.style,(t=this.sprite.anchor).set.apply(t,i(this.anchor)),(e=this.sprite.position).set.apply(e,i(this.getCenter())),this._updateSpriteScale(),this._hideIfOverflowing&&this._hideIfOverflowing(),this.rotation=this.calculateRotation(this,n,this.sprite,this.rotation),this.sprite.rotation=this.rotation,this.hidden||!this.visible?this.sprite.alpha=0:this.sprite.alpha=1,this.requestRender()}}},{key:"calculateRotation",value:function(t,e,n,r){if(!t.rotateWithMap)return u.default.degreesToRadians(-e.rotation);if(t.autoCorrectRotation){var i=Math.PI,o=n.rotation,a=u.default.degreesToRadians(e.rotation),s=u.default.normalizeRadians(o+a);if(s>i/2&&s<1.5*i)return u.default.normalizeRadians(o+i)}return r||n.rotation}},{key:"visible",get:function(){return this._visible},set:function(t){this._visible=!!t,this.sprite&&!this.hidden&&(this.sprite.visible=this._visible,this.requestRender())}},{key:"hidden",get:function(){return this.parent?!this.parent.visible:this._hidden},set:function(t){this._hidden=!!t,this.sprite&&(this.sprite.visible=!this._hidden,this.requestRender())}}],[{key:"getSizeFromLoadedTexture",value:function(t){var e=t.width,n=t.height;return Math.min(e,n)/Math.max(e,n)}}]),t}();e.default=h},function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(20),c=r(l),h=n(166),f=r(h),p=n(165),d=r(p),y=n(81),v=r(y),g=n(27),m=r(g),b=n(38),_=r(b),w=n(6),x=r(w),T=n(11),S=r(T),E=n(167),O=r(E),M=n(168),P=r(M),C=n(40),A=r(C);n(175);var k=function(){return Boolean(R["-x"])};c.default.utils.skipHello();var I=function(){return!1},R=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width,r=void 0===n?"100%":n,i=t.height,a=void 0===i?"100%":i,s=t.minScale,u=void 0===s?.5:s,l=t.maxScale,h=void 0===l?7:l,p=t.forceCanvas,y=t.transparent;o(this,e),this._width=x.default.validate(r,[String,Number],"100%"),this._height=x.default.validate(a,[String,Number],"100%"),this._app=new c.default.Application({width:this._width,height:this._height,forceFXAA:!0,antialias:!0,resolution:x.default.getDevicePixelRatio(),forceCanvas:p||I(),sharedTicker:!0,sharedLoader:!0,transparent:y}),this.renderer=this._app.renderer,this.renderer.autoResize=!0,this.root=this._app.stage,this.minScale=x.default.validate(u,Number,.5),this.maxScale=x.default.validate(h,Number,7),this._dirtyMinScale=!1,this.view=this.renderer.view,this.events=new f.default(this),this.draw=new O.default(this),this.engine=new d.default(this._app.ticker),this.mapViews=[],this.pfx=x.default.getPrefixedPropertyNames(),this.currentMapView={render:function(){}},this.events.addTap(),this.events.addTapHandler(this._onTap.bind(this)),this.events.addDoubleTapHandler(this._onDoubleTap.bind(this)),this.interactiveLayerData={},this.doubleTapLayerData={},this._initRenderRequestEventBus(),this.availableBitmapFonts=["arial-simple","arial-full","courier-simple","courier-full","georgia-simple","georgia-full","times-new-roman-simple","times-new-roman-full","verdana-simple","verdana-full"],!0===k()&&P.default.a(this)}return u(e,[{key:"requestUpdateOnNextFrame",value:function(){return S.default.emit("REQUEST_RENDER"),this}},{key:"_initRenderRequestEventBus",value:function(){var e=this,n=!1;S.default.on("REQUEST_RENDER",function(){n||(t.requestAnimationFrame(function(){n=!1,e.engine.update(),S.default.emit("RENDER_COMPLETE")}),n=!0)})}},{key:"__getXY",value:function(t){var e=t.srcEvent,n=e.target.getBoundingClientRect(),r=e.target,i=document.documentElement||document.body.parentNode||document.body,o=void 0!==window.pageXOffset?window.pageXOffset:i.scrollLeft,a=void 0!==window.pageYOffset?window.pageYOffset:i.scrollTop,s=[e.pageX-o-n.left-r.clientLeft,e.pageY-a-n.top-r.clientTop];return[r.offsetWidth*s[0]/n.width,r.offsetHeight*s[1]/n.height]}},{key:"_dimensionsChanged",value:function(t,e){return t!==this._width||e!==this._height}},{key:"_getTappedShapeFromLayers",value:function(t,e){var n=this,r=t.map(function(t){return n.currentMapView.getLayerByName(t)}).filter(function(t){return t&&t.visible});x.default.sortBySequence(r),r.reverse();var o=r.reduce(function(t,e){return t.concat.apply(t,i(e.getIcons()))},[]),a=r.reduce(function(t,e){return t.concat.apply(t,i(e.getMovingObjects()))},[]),u=r.reduce(function(t,e){return t.concat.apply(t,i(e.getShapes()))},[]),l=o.concat.apply(o,i(a).concat(i(u))),c=this.__getXY(e),h=s(c,2),f=h[0],p=h[1],d=e.localPoint=this.getMapPointFromViewPortPoint([f,p]);return l.find(function(t){return t.containsPoint(d)})}},{key:"_onTap",value:function(t){var e=Object.keys(this.interactiveLayerData),n=this._getTappedShapeFromLayers(e,t);if(n){var r=n.parent.name.toLowerCase(),i=this.interactiveLayerData[r];i&&i(n,t)}return this.genericTapHandler(t),this}},{key:"_onDoubleTap",value:function(t){var e=Object.keys(this.doubleTapLayerData),n=this._getTappedShapeFromLayers(e,t);if(n){var r=n.parent.name.toLowerCase(),i=this.doubleTapLayerData[r];i&&i(t,n)}return this}},{key:"kill",value:function(){this.engine.stop(),this.view.parentElement.removeChild(this.view),this.getPopupContainer().parentElement.removeChild(this.getPopupContainer()),x.default.removeResizeListener()}},{key:"resize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._width,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._height;if(this._dimensionsChanged(e,n)){var r=[e,n];this._width=r[0],this._height=r[1],x.default.hasPercentageDimensions(this._width,this._height)?x.default.addResizeListener(function(){return t.resize()}):x.default.removeResizeListener()}var i=this.stageContainer,o=x.default.getDimensions({width:e,height:n,element:i});if(this.renderer.resize(o.width,o.height),this.currentMapView.container){var a=this.getMapPointFromViewPortPoint(this.getCenterOfViewPort());this.clientRect=null,this.getClientRect(),this.__positionPopupContainer();var s=this.putMapPointOnViewPortPoint(a,this.getCenterOfViewPort());this.currentMapView.setPosition(s),!0===k()&&P.default.b(this)}return this.requestUpdateOnNextFrame(),this}},{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#stage",n=document.querySelector(e);if(!n)throw new Error("Stage requires a valid DOMElement to render inside");this.stageContainer=n,this.view.style.position="absolute",this.view.style.display="block",this.view.style.top="0",this.view.style.left="0",this.stageContainer.appendChild(this.view),this.render(),x.default.hasPercentageDimensions(this._width,this._height)&&x.default.addResizeListener(function(){return t.resize()})}},{key:"render",value:function(t){this.renderer.render(t||this.root)}},{key:"addMapView",value:function(t){var e=this;this.mapViews=x.default.addSingleOrCollection(t,v.default,this.mapViews,function(t){t.parent=e,t.root=e.root,t.container=new c.default.Container,e.root.addChild(t.container),t.centerMapToViewPort(),t.render=function(n){n?e.renderMapViewById(t.id):e.render(t.container)}}),x.default.sortBySequence(this.mapViews)}},{key:"showMapViewById",value:function(t){var e=this,n=this.getMapViewById(this.currentMapViewId);if(!this.getMapViewById(t))throw new Error("showMapViewById :: Please pass a valid map view id.");this.clearPopupContainer(),this.mapViews.forEach(function(r){r.id===t?(e.currentMapView=r,e.currentMapViewId=r.id,n&&(r.setScale(n.getScale()),r.setRotation(n.getRotation()),r.setPosition(n.getPosition())),r.current=!0,r.show()):(r.current=!1,r.hide())}),!0===k()&&P.default.b(this)}},{key:"getMapViews",value:function(){return this.mapViews}},{key:"getMapViewById",value:function(t){return this.mapViews.find(function(e){return e.id===t})}},{key:"getMapViewBySequence",value:function(t){return this.mapViews.find(function(e){return e.sequence===t})}},{key:"renderMapViewById",value:function(e){var n=this,r=this.getMapViewById(e),o=r.container,a=function(){n.rendererPaused||r!==n.currentMapView||(0,A.default)(r.mapLayers,function(t){return n.draw.renderLayer(t,o)},function(){r.render()},100)},s=[].concat(i(new Set(r.mapLayers.reduce(function(t,e){return t.concat.apply(t,i(e.texts.reduce(function(t,e){var n=e.style.fontFamily;return n?t.concat(n.toLowerCase()):t},[])))},[])))),u=Object.keys(c.default.extras.BitmapText.fonts).map(function(t){return t.toLowerCase()}),l=s.filter(function(t){var e=n.availableBitmapFonts.indexOf(t.toLowerCase())>-1,r=u.indexOf(t)>-1;return e&&!r});if(l.length){var h=location.protocol,f=l.map(function(t){return{name:t,path:h+"//cdn.jibestream.com/assets/fonts/"+t+".fnt"}});this.loadBitMapFonts(f,function(e,n){t.jmap&&t.jmap.dispatcher&&t.jmap.dispatcher.publish("JMAP_ENGINE_BITMAPFONTS_LOADED",n),a()})}else a()}},{key:"redrawSpritesOnCurrentMapView",value:function(){var t=this,e=this.currentMapView,n=e.container;(0,A.default)(e.mapLayers,function(e){t.draw.renderSpritesInLayer(e,n)})}},{key:"updateIconsOnCurrentMapView",value:function(){return(0,A.default)(this.currentMapView.mapLayers,function(t){t.icons.forEach(function(t){return t.updateIconTransform()})}),this}},{key:"updateMovingObjectsOnCurrentMapView",value:function(){return(0,A.default)(this.currentMapView.mapLayers,function(t){t.movingobjects.forEach(function(t){return t.updateMovingObjectTransform()})}),this}},{key:"showPointOnMap",value:function(t){var e=t.point,n=t.radius,r=void 0===n?5:n,i=t.fill,o=void 0===i?4149685:i,a=t.clear,s=void 0===a||a,u="debug-layer",l=this.currentMapView;if(l.hasLayerWithName(u)){var c=l.getLayerByName(u),h=c.shapes[0];s&&h?(h.point=e,h.fill=o,h.radius=r,h.updateGraphic()):(c.addShape(new _.default({point:e,radius:r,fill:o,id:"debug-point"})),l.render(!0))}else l.addMapLayer(new m.default({name:u})),this.showPointOnMap({point:e,radius:r,fill:o,clear:s})}},{key:"putMapPointOnViewPortPoint",value:function(t,e){var n=this.currentMapView.getPosition(),r=this.getViewportPointFromMapPoint(t);return[n[0]-r[0]+e[0],n[1]-r[1]+e[1]]}},{key:"getViewportPointFromMapPoint",value:function(t){var e=s(t,2),n=e[0],r=e[1],i=this.currentMapView.container.toGlobal({x:n,y:r});return[i.x,i.y]}},{key:"getMapPointFromViewPortPoint",value:function(t){var e=s(t,2),n=e[0],r=e[1],i=this.currentMapView.container.toLocal({x:n,y:r});return[i.x,i.y]}},{key:"getViewCenter",value:function(){var t=this.getClientRect();return[t.width/2,t.height/2]}},{key:"_textureFromUrl",value:function(t){return c.default.Texture.fromImage(t)}},{key:"_loadImage",value:function(t,e){c.default.loader.add(t).load(e)}},{key:"_generateTag",value:function(){return"_"+Math.random().toString(36).substr(2,9)}},{key:"removeShape",value:function(t){this._removeLayerItem("Shape",t)}},{key:"removeImage",value:function(t){this._removeLayerItem("Image",t)}},{key:"removeText",value:function(t){this._removeLayerItem("Text",t)}},{key:"removeIcon",value:function(t){this._removeLayerItem("Icon",t)}},{key:"removeMovingObject",value:function(t){this._removeLayerItem("MovingObject",t)}},{key:"removeMapLayer",value:function(t){this.mapViews.forEach(function(e){var n=e.mapLayers,r=n.indexOf(t);n.splice(r,1)}),this.currentMapView.render(!0)}},{key:"removeMapView",value:function(t){var e=this.mapViews,n=e.indexOf(t);e.splice(n,1)}},{key:"_removeLayerItem",value:function(t,e){var n=this;return e.constructor===Array?e.slice().forEach(function(e){return n._removeItem(t,e)}):(this.mapViews.forEach(function(n){e&&e.clear(),n.mapLayers.forEach(function(n){var r=n[t.toLowerCase()+"s"],i=r.indexOf(e);-1!==i&&r.splice(i,1)})}),this)}},{key:"getCenterOfViewPort",value:function(){var t=this.getClientRect();return[t.width/2,t.height/2]}},{key:"getCenterPoint",value:function(){return this.getMapPointFromViewPortPoint(this.getCenterOfViewPort())}},{key:"getPopupContainer",value:function(){if(!this.popupContainer){var t=document.createElement("div");t.id="jungle-popup-container",t.style.position="absolute";var e=this.getClientRect();t.style.top="0px",t.style.left="0px",t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.pointerEvents="none",t.style.overflow="hidden",this.stageContainer.appendChild(t),this.popupContainer=t}return this.popupContainer}},{key:"__positionPopupContainer",value:function(){var t=this.getClientRect(),e=this.getPopupContainer();e.style.top="0px",e.style.left="0px",e.style.width=t.width+"px",e.style.height=t.height+"px"}},{key:"clearPopupContainer",value:function(){return this.popupContainer&&(this.popupContainer.innerHTML=""),this}},{key:"getGlobalCanvasPoints",value:function(){return x.default.boundsToPoints(this.getClientRect(),!0)}},{key:"getLocalCanvasPoints",value:function(){var t=this,e=this.getClientRect();return[[0,0],[e.width,0],[e.width,e.height],[0,e.height]].map(function(e){return t.getMapPointFromViewPortPoint(e)})}},{key:"getClientRect",value:function(){return this.clientRect||(this.clientRect=this.view.getBoundingClientRect()),this.clientRect}},{key:"loadBitMapFonts",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=c.default.loader;if(r.loading)return r.queue||(r.queue=[]),r.queue.push([e,n]),this;if(!Array.isArray(e))return null;var i=Object.keys(c.default.loader.resources).map(function(t){return t.toLowerCase()});return e.filter(function(e){return"object"===(void 0===e?"undefined":a(e))&&(!(i.indexOf(e.name)>-1)&&(!(-1===t.availableBitmapFonts.indexOf(e.name)&&!e.path)&&(e.path=e.path||"",e.name)))},!0).reduce(function(t,e){return t.find(function(t){return t.name===e.name})?t:t.concat(e)},[]).forEach(function(t){return r.add(t.name,t.path)}),r.once("complete",function(){if(r.queue&&r.queue.length){var e=r.queue[0][0].slice(),n=r.queue[0][1];r.queue.shift(),t.loadBitMapFonts(e,n)}}),r.load(n),this}},{key:"minScale",set:function(t){this._dirtyMinScale=!0,this._minScale=t},get:function(){return this._minScale}},{key:"genericTapHandler",get:function(){return"function"==typeof this._genericTapHandler?this._genericTapHandler:function(t){return t}},set:function(t){this._genericTapHandler=t}}],[{key:"textureFromImageUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.default.getDevicePixelRatio(),n=Math.max(e,x.default.getDevicePixelRatio());return c.default.utils.TextureCache={},c.default.utils.BaseTextureCache={},c.default.Texture.fromImage(t,void 0,void 0,n)}},{key:"svgSize",value:function(t){return c.default.SVG_SIZE.exec(t)}}]),e}();e.default=R}).call(e,n(1))},function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r=e&&e.length,o=r?e[0]*n:t.length,s=i(t,0,o,n,!0),u=[];if(!s)return u;var l,c,f,p,d,y,v;if(r&&(s=h(t,e,s,n)),t.length>80*n){l=f=t[0],c=p=t[1];for(var g=n;g<o;g+=n)d=t[g],y=t[g+1],d<l&&(l=d),y<c&&(c=y),d>f&&(f=d),y>p&&(p=y);v=Math.max(f-l,p-c),v=0!==v?1/v:0}return a(s,u,n,l,c,v),u}function i(t,e,n,r,i){var o,a;if(i===k(t,e,n,r)>0)for(o=e;o<n;o+=r)a=P(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=P(o,t[o],t[o+1],a);return a&&x(a,a.next)&&(C(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!x(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(C(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function a(t,e,n,r,i,h,f){if(t){!f&&h&&y(t,r,i,h);for(var p,d,v=t;t.prev!==t.next;)if(p=t.prev,d=t.next,h?u(t,r,i,h):s(t))e.push(p.i/n),e.push(t.i/n),e.push(d.i/n),C(t),t=d.next,v=d.next;else if((t=d)===v){f?1===f?(t=l(t,e,n),a(t,e,n,r,i,h,2)):2===f&&c(t,e,n,r,i,h):a(o(t),e,n,r,i,h,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(w(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(b(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&w(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,a=t.next;if(w(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=g(s,u,e,n,r),f=g(l,c,e,n,r),p=t.prevZ,d=t.nextZ;p&&p.z>=h&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&b(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&w(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&b(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&b(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&w(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&b(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function l(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!x(i,o)&&T(i,r,r.next,o)&&E(i,o)&&E(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),C(r),C(r.next),r=t=o),r=r.next}while(r!==t);return r}function c(t,e,n,r,i,s){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&_(u,l)){var c=M(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,e,n,r,i,s),void a(c,e,n,r,i,s)}l=l.next}u=u.next}while(u!==t)}function h(t,e,n,r){var a,s,u,l,c,h=[];for(a=0,s=e.length;a<s;a++)u=e[a]*r,l=a<s-1?e[a+1]*r:t.length,c=i(t,u,l,r,!1),c===c.next&&(c.steiner=!0),h.push(m(c));for(h.sort(f),a=0;a<h.length;a++)p(h[a],n),n=o(n,n.next);return n}function f(t,e){return t.x-e.x}function p(t,e){if(e=d(t,e)){var n=M(e,t);o(n,n.next)}}function d(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,h=n.y,f=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&b(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&E(r,t)&&(n=r,f=u),r=r.next;return n}function y(t,e,n,r){var i=t;do{null===i.z&&(i.z=g(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,v(i)}function v(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1);return t}function g(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function m(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function b(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function _(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!S(t,e)&&E(t,e)&&E(e,t)&&O(t,e)}function w(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function x(t,e){return t.x===e.x&&t.y===e.y}function T(t,e,n,r){return!!(x(t,e)&&x(n,r)||x(t,r)&&x(n,e))||w(t,e,n)>0!=w(t,e,r)>0&&w(n,r,t)>0!=w(n,r,e)>0}function S(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&T(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function E(t,e){return w(t.prev,t,t.next)<0?w(t,e,t.next)>=0&&w(t,t.prev,e)>=0:w(t,e,t.prev)<0||w(t,t.next,e)<0}function O(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}function M(t,e){var n=new A(t.i,t.x,t.y),r=new A(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function P(t,e,n,r){var i=new A(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function C(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function A(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=r,t.exports.default=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(k(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(k(t,l,c,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},function(t,e,n){"use strict";var r,i,o;/**
 * isMobile.js v0.4.1
 *
 * A simple library to detect Apple phones and tablets,
 * Android phones and tablets, other mobile devices (like blackberry, mini-opera and windows phone),
 * and any kind of seven inch device, via user agent sniffing.
 *
 * @author: Kai Mallea (kmallea@gmail.com)
 *
 * @license: http://creativecommons.org/publicdomain/zero/1.0/
 */
!function(n){var a=/iPhone/i,s=/iPod/i,u=/iPad/i,l=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,c=/Android/i,h=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,f=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,p=/Windows Phone/i,d=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,y=/BlackBerry/i,v=/BB10/i,g=/Opera Mini/i,m=/(CriOS|Chrome)(?=.*\bMobile\b)/i,b=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,_=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),w=function(t,e){return t.test(e)},x=function(t){var e=t||navigator.userAgent,n=e.split("[FBAN");if(void 0!==n[1]&&(e=n[0]),n=e.split("Twitter"),void 0!==n[1]&&(e=n[0]),this.apple={phone:w(a,e),ipod:w(s,e),tablet:!w(a,e)&&w(u,e),device:w(a,e)||w(s,e)||w(u,e)},this.amazon={phone:w(h,e),tablet:!w(h,e)&&w(f,e),device:w(h,e)||w(f,e)},this.android={phone:w(h,e)||w(l,e),tablet:!w(h,e)&&!w(l,e)&&(w(f,e)||w(c,e)),device:w(h,e)||w(f,e)||w(l,e)||w(c,e)},this.windows={phone:w(p,e),tablet:w(d,e),device:w(p,e)||w(d,e)},this.other={blackberry:w(y,e),blackberry10:w(v,e),opera:w(g,e),firefox:w(b,e),chrome:w(m,e),device:w(y,e)||w(v,e)||w(g,e)||w(b,e)||w(m,e)},this.seven_inch=w(_,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},T=function(){var t=new x;return t.Class=x,t};void 0!==t&&t.exports&&"undefined"==typeof window?t.exports=x:void 0!==t&&t.exports&&"undefined"!=typeof window?t.exports=T():(i=[],r=n.isMobile=T(),void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o))}(void 0)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e,n,i){void 0===n&&(n=!1),r(this,t),this._fn=e,this._once=n,this._thisArg=i,this._next=this._prev=this._owner=null}return o(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}(),s=function(){function t(){r(this,t),this._head=this._tail=void 0}return o(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var n=[];e;)n.push(e),e=e._next;return n}},{key:"has",value:function(t){if(!(t instanceof a))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return i(this,new a(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return i(this,new a(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof a))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();s.MiniSignalBinding=a,e.default=s,t.exports=e.default},function(t,e,n){"use strict";t.exports=function(t,e){e=e||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[e.strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(t,e,r){e&&(i[n.q.name][e]=r)}),i}},function(t,e,n){"use strict";var r=function(t,e,n,r,i){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=n||-1,this.format=r||t.RGBA,this.type=i||t.UNSIGNED_BYTE};r.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var n=t.videoWidth||t.width,r=t.videoHeight||t.height;r!==this.height||n!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=n,this.height=r};var i=!1;r.prototype.uploadData=function(t,e,n){this.bind();var r=this.gl;if(t instanceof Float32Array){if(!i){if(!r.getExtension("OES_texture_float"))throw new Error("floating point textures not available");i=!0}this.type=r.FLOAT}else this.type=this.type||r.UNSIGNED_BYTE;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||n!==this.height?r.texImage2D(r.TEXTURE_2D,0,this.format,e,n,0,this.format,this.type,t||null):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e,n,this.format,this.type,t||null),this.width=e,this.height=n},r.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},r.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},r.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},r.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},r.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},r.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},r.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},r.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},r.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},r.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},r.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},r.fromSource=function(t,e,n){var i=new r(t);return i.premultiplyAlpha=n||!1,i.upload(e),i},r.fromData=function(t,e,n,i){var o=new r(t);return o.uploadData(e,n,i),o},t.exports=r},function(t,e,n){"use strict";var r=function(t,e,n){var r;if(n){var i=n.tempAttribState,o=n.attribState;for(r=0;r<i.length;r++)i[r]=!1;for(r=0;r<e.length;r++)i[e[r].attribute.location]=!0;for(r=0;r<o.length;r++)o[r]!==i[r]&&(o[r]=i[r],n.attribState[r]?t.enableVertexAttribArray(r):t.disableVertexAttribArray(r))}else for(r=0;r<e.length;r++){var a=e[r];t.enableVertexAttribArray(a.attribute.location)}};t.exports=r},function(t,e,n){"use strict";var r=function(t,e,n,r){var o=i(t,t.VERTEX_SHADER,e),a=i(t,t.FRAGMENT_SHADER,n),s=t.createProgram();if(t.attachShader(s,o),t.attachShader(s,a),r)for(var u in r)t.bindAttribLocation(s,r[u],u);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(o),t.deleteShader(a),s},i=function(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.log(t.getShaderInfoLog(r)),null)};t.exports=r},function(t,e,n){"use strict";var r=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return i(2*e);case"bvec3":return i(3*e);case"bvec4":return i(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},i=function(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e};t.exports=r},function(t,e,n){"use strict";var r=n(42),i=n(97),o=function(t,e){for(var n={},o=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),s=0;s<o;s++){var u=t.getActiveAttrib(e,s),l=r(t,u.type);n[u.name]={type:l,size:i(l),location:t.getAttribLocation(e,u.name),pointer:a}}return n},a=function(t,e,n,r){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,n||0,r||0)};t.exports=o},function(t,e,n){"use strict";var r=n(42),i=n(93),o=function(t,e){for(var n={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),a=0;a<o;a++){var s=t.getActiveUniform(e,a),u=s.name.replace(/\[.*?\]/,""),l=r(t,s.type);n[u]={type:l,size:s.size,location:t.getUniformLocation(e,u),value:i(l,s.size)}}return n};t.exports=o},function(t,e,n){"use strict";function r(t,e){return function(n){this.data[t].value=n;var r=this.data[t].location;1===e.size?s[e.type](this.gl,r,n):u[e.type](this.gl,r,n)}}function i(t,e){for(var n=e,r=0;r<t.length-1;r++){var i=n[t[r]]||{data:{}};n[t[r]]=i,n=i}return n}var o=function(t,e){var n={data:{}};n.gl=t;for(var o=Object.keys(e),s=0;s<o.length;s++){var u=o[s],l=u.split("."),c=l[l.length-1],h=i(l,n),f=e[u];h.data[c]=f,h.gl=t,Object.defineProperty(h,c,{get:a(c),set:r(c,f)})}return n},a=function(t){return function(){return this.data[t].value}},s={float:function(t,e,n){t.uniform1f(e,n)},vec2:function(t,e,n){t.uniform2f(e,n[0],n[1])},vec3:function(t,e,n){t.uniform3f(e,n[0],n[1],n[2])},vec4:function(t,e,n){t.uniform4f(e,n[0],n[1],n[2],n[3])},int:function(t,e,n){t.uniform1i(e,n)},ivec2:function(t,e,n){t.uniform2i(e,n[0],n[1])},ivec3:function(t,e,n){t.uniform3i(e,n[0],n[1],n[2])},ivec4:function(t,e,n){t.uniform4i(e,n[0],n[1],n[2],n[3])},bool:function(t,e,n){t.uniform1i(e,n)},bvec2:function(t,e,n){t.uniform2i(e,n[0],n[1])},bvec3:function(t,e,n){t.uniform3i(e,n[0],n[1],n[2])},bvec4:function(t,e,n){t.uniform4i(e,n[0],n[1],n[2],n[3])},mat2:function(t,e,n){t.uniformMatrix2fv(e,!1,n)},mat3:function(t,e,n){t.uniformMatrix3fv(e,!1,n)},mat4:function(t,e,n){t.uniformMatrix4fv(e,!1,n)},sampler2D:function(t,e,n){t.uniform1i(e,n)}},u={float:function(t,e,n){t.uniform1fv(e,n)},vec2:function(t,e,n){t.uniform2fv(e,n)},vec3:function(t,e,n){t.uniform3fv(e,n)},vec4:function(t,e,n){t.uniform4fv(e,n)},int:function(t,e,n){t.uniform1iv(e,n)},ivec2:function(t,e,n){t.uniform2iv(e,n)},ivec3:function(t,e,n){t.uniform3iv(e,n)},ivec4:function(t,e,n){t.uniform4iv(e,n)},bool:function(t,e,n){t.uniform1iv(e,n)},bvec2:function(t,e,n){t.uniform2iv(e,n)},bvec3:function(t,e,n){t.uniform3iv(e,n)},bvec4:function(t,e,n){t.uniform4iv(e,n)},sampler2D:function(t,e,n){t.uniform1iv(e,n)}};t.exports=o},function(t,e,n){"use strict";var r=function(t){return i[t]},i={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=r},function(t,e,n){"use strict";var r=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t};t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(100),s=n(21),u=r(s),l=n(51),c=n(4),h=r(c),f=n(0),p=function(){function t(e,n,r,o,s){i(this,t),"number"==typeof e&&(e=Object.assign({width:e,height:n||h.default.RENDER_OPTIONS.height,forceCanvas:!!o,sharedTicker:!!s},r)),this._options=e=Object.assign({sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,a.autoDetectRenderer)(e),this.stage=new u.default,this._ticker=null,this.ticker=e.sharedTicker?l.shared:new l.Ticker,this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t){var e=this._ticker;this.ticker=null,e.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},o(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,f.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r){var i=t&&t.forceCanvas;return void 0!==r&&(i=r),!i&&a.isWebGLSupported()?new c.default(t,e,n):new u.default(t,e,n)}e.__esModule=!0,e.autoDetectRenderer=i;var o=n(2),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(o),s=n(22),u=r(s),l=n(30),c=r(l)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(12),c=r(l),h=n(0),f=n(4),p=r(f),d=n(103),y=r(d),v=n(102),g=r(v),m=n(43),b=r(m),_=n(5),w=function(t){function e(){i(this,e);var n=o(this,t.call(this)),r=p.default.TRANSFORM_MODE===h.TRANSFORM_MODE.STATIC?y.default:g.default;return n.tempDisplayObjectParent=null,n.transform=new r,n.alpha=1,n.visible=!0,n.renderable=!0,n.parent=null,n.worldAlpha=1,n.filterArea=null,n._filters=null,n._enabledFilters=null,n._bounds=new b.default,n._boundsID=0,n._lastBoundsID=-1,n._boundsRect=null,n._localBoundsRect=null,n._mask=null,n._destroyed=!1,n}return a(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new _.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new _.Rectangle),t=this._localBoundsRect);var r=this.getBounds(!1,t);return this.parent=n,this.transform=e,r},e.prototype.toGlobal=function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,n,r){return e&&(t=e.toGlobal(t,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=u,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},u(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(c.default);e.default=w,w.prototype.displayObjectUpdateTransform=w.prototype.updateTransform},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(5),l=n(44),c=function(t){return t&&t.__esModule?t:{default:t}}(l),h=function(t){function e(){r(this,e);var n=i(this,t.call(this));return n.position=new u.Point(0,0),n.scale=new u.Point(1,1),n.skew=new u.ObservablePoint(n.updateSkew,n,0,0),n.pivot=new u.Point(0,0),n._rotation=0,n._cx=1,n._sx=0,n._cy=0,n._sy=1,n}return o(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},s(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(c.default);e.default=h},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(5),l=n(44),c=function(t){return t&&t.__esModule?t:{default:t}}(l),h=function(t){function e(){r(this,e);var n=i(this,t.call(this));return n.position=new u.ObservablePoint(n.onChange,n,0,0),n.scale=new u.ObservablePoint(n.onChange,n,1,1),n.pivot=new u.ObservablePoint(n.onChange,n,0,0),n.skew=new u.ObservablePoint(n.updateSkew,n,0,0),n._rotation=0,n._cx=1,n._sx=0,n._cy=0,n._sy=1,n._localID=0,n._currentLocalID=0,n}return o(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},s(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(c.default);e.default=h},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(e,n,i,o,a,s,u,l){r(this,t),this.lineWidth=e,this.nativeLines=u,this.lineColor=n,this.lineAlpha=i,this._lineTint=n,this.fillColor=o,this.fillAlpha=a,this._fillTint=o,this.fill=s,this.holes=[],this.shape=l,this.type=l.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();e.default=i},function(t,e,n){"use strict";function r(t){return t<0?-1:t>0?1:0}e.__esModule=!0;var i=n(45),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],s=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],u=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],l=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],c=[],h=[];!function(){for(var t=0;t<16;t++){var e=[];h.push(e);for(var n=0;n<16;n++)for(var i=r(a[t]*a[n]+u[t]*s[n]),f=r(s[t]*a[n]+l[t]*s[n]),p=r(a[t]*u[n]+u[t]*l[n]),d=r(s[t]*u[n]+l[t]*l[n]),y=0;y<16;y++)if(a[y]===i&&s[y]===f&&u[y]===p&&l[y]===d){e.push(y);break}}for(var v=0;v<16;v++){var g=new o.default;g.set(a[v],s[v],u[v],l[v],0,0),c.push(g)}}();var f={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return a[t]},uY:function(t){return s[t]},vX:function(t){return u[t]},vY:function(t){return l[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return h[t][e]},sub:function(t,e){return h[t][f.inv(e)]},rotate180:function(t){return 4^t},isSwapWidthHeight:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?f.S:f.N:2*Math.abs(e)<=Math.abs(t)?t>0?f.E:f.W:e>0?t>0?f.SE:f.SW:t>0?f.NE:f.NW},matrixAppendRotationInv:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=c[f.inv(e)];i.tx=n,i.ty=r,t.append(i)}};e.default=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t),this._x=i,this._y=o,this.cb=e,this.scope=n}return t.prototype.set=function(t,e){var n=t||0,r=e||(0!==e?n:0);this._x===n&&this._y===r||(this._x=n,this._y=r,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},i(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();e.default=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(2),c=n(5),h=n(0),f=n(4),p=r(f),d=n(21),y=r(d),v=n(50),g=r(v),m=n(12),b=r(m),_=new c.Matrix,w=function(t){function e(n,r,a,s){i(this,e);var u=o(this,t.call(this));return(0,l.sayHello)(n),"number"==typeof r&&(r=Object.assign({width:r,height:a||p.default.RENDER_OPTIONS.height},s)),r=Object.assign({},p.default.RENDER_OPTIONS,r),u.options=r,u.type=h.RENDERER_TYPE.UNKNOWN,u.screen=new c.Rectangle(0,0,r.width,r.height),u.view=r.view||document.createElement("canvas"),u.resolution=r.resolution||p.default.RESOLUTION,u.transparent=r.transparent,u.autoResize=r.autoResize||!1,u.blendModes=null,u.preserveDrawingBuffer=r.preserveDrawingBuffer,u.clearBeforeRender=r.clearBeforeRender,u.roundPixels=r.roundPixels,u._backgroundColor=0,u._backgroundColorRgba=[0,0,0,0],u._backgroundColorString="#000000",u.backgroundColor=r.backgroundColor||u._backgroundColor,u._tempDisplayObjectParent=new y.default,u._lastObjectRendered=u._tempDisplayObjectParent,u}return a(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,n){var r=t.getLocalBounds(),i=g.default.create(0|r.width,0|r.height,e,n);return _.tx=-r.x,_.ty=-r.y,this.render(t,i,!1,_,!0),i},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=h.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},u(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,l.hex2string)(t),(0,l.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(b.default);e.default=w},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(4),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=function(){function t(e,n,i){r(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||a.default.RESOLUTION,this.resize(e,n)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},i(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();e.default=s},function(t,e,n){"use strict";function r(t){var e=document.createElement("canvas");e.width=6,e.height=1;var n=e.getContext("2d");return n.fillStyle=t,n.fillRect(0,0,6,1),e}function i(){if("undefined"==typeof document)return!1;var t=r("#ff00ff"),e=r("#ffff00"),n=document.createElement("canvas");n.width=6,n.height=1;var i=n.getContext("2d");i.globalCompositeOperation="multiply",i.drawImage(t,0,0),i.drawImage(e,2,0);var o=i.getImageData(2,0,1,1);if(!o)return!1;var a=o.data;return 255===a[0]&&0===a[1]&&0===a[2]}e.__esModule=!0,e.default=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(203),s=r(a),u=n(2),l=n(0),c=n(4),h=r(c),f={},p=function(){function t(e,n,r){i(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=n||t.defaultFragmentSrc,this.blendMode=l.BLEND_MODES.NORMAL,this.uniformData=r||(0,s.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var o in this.uniformData)this.uniforms[o]=this.uniformData[o].value;this.glShaders={},f[this.vertexSrc+this.fragmentSrc]||(f[this.vertexSrc+this.fragmentSrc]=(0,u.uid)()),this.glShaderKey=f[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=h.default.RESOLUTION,this.enabled=!0,this.autoFit=!0}return t.prototype.apply=function(t,e,n,r,i){t.applyFilter(this,e,n,r)},o(t,null,[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();e.default=p},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var s=n(110),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=n(5),c=(n(10),function(t){function e(n){r(this,e);var o=new l.Matrix,a=i(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return n.renderable=!1,a.maskSprite=n,a.maskMatrix=o,a}return o(e,t),e.prototype.apply=function(t,e,n){var r=this.maskSprite;this.uniforms.mask=r._texture,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r),this.uniforms.alpha=r.worldAlpha,t.applyFilter(this,e,n)},e}(u.default));e.default=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(9),a=r(o),s=n(118),u=r(s),l=function(){function t(e,n){i(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;r<4;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=(0,u.default)(1),this.vertexBuffer=a.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=a.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new a.default.VertexArrayObject(e,n)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+e.width/t.width,this.uvs[3]=r,this.uvs[4]=n+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=n,this.uvs[7]=r+e.height/t.height,n=e.x,r=e.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+e.width,this.vertices[3]=r,this.vertices[4]=n+e.width,this.vertices[5]=r+e.height,this.vertices[6]=n,this.vertices[7]=r+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();e.default=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(e,n,i,o,a,s,u,l,c){r(this,t),this.text=e,this.style=n,this.width=i,this.height=o,this.lines=a,this.lineWidths=s,this.lineHeight=u,this.maxLineWidth=l,this.fontProperties=c}return t.measureText=function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t._canvas;r=r||n.wordWrap;var o=n.toFontString(),a=t.measureFont(o),s=i.getContext("2d");s.font=o;for(var u=r?t.wordWrap(e,n,i):e,l=u.split(/(?:\r\n|\r|\n)/),c=new Array(l.length),h=0,f=0;f<l.length;f++){var p=s.measureText(l[f]).width+(l[f].length-1)*n.letterSpacing;c[f]=p,h=Math.max(h,p)}var d=h+n.strokeThickness;n.dropShadow&&(d+=n.dropShadowDistance);var y=n.lineHeight||a.fontSize+n.strokeThickness,v=Math.max(y,a.fontSize+n.strokeThickness)+(l.length-1)*y;return n.dropShadow&&(v+=n.dropShadowDistance),new t(e,n,d,v,l,c,y,h,a)},t.wordWrap=function(e,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas,i=r.getContext("2d"),o="",a=e.split("\n"),s=n.wordWrapWidth,u={},l=0;l<a.length;l++){for(var c=s,h=a[l].split(" "),f=0;f<h.length;f++){var p=i.measureText(h[f]).width;if(n.breakWords&&p>s)for(var d=h[f].split(""),y=0;y<d.length;y++){var v=d[y],g=u[v];void 0===g&&(g=i.measureText(v).width,u[v]=g),g>c?(o+="\n"+v,c=s-g):(0===y&&(o+=" "),o+=v,c-=g)}else{var m=p+i.measureText(" ").width;0===f||m>c?(f>0&&(o+="\n"),o+=h[f],c=s-p):(c-=m,o+=" "+h[f])}}l<a.length-1&&(o+="\n")}return o},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var n={},r=t._canvas,i=t._context;i.font=e;var o=Math.ceil(i.measureText("|MÉq").width),a=Math.ceil(i.measureText("M").width),s=2*a;a=1.4*a|0,r.width=o,r.height=s,i.fillStyle="#f00",i.fillRect(0,0,o,s),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText("|MÉq",0,a);var u=i.getImageData(0,0,o,s).data,l=u.length,c=4*o,h=0,f=0,p=!1;for(h=0;h<a;++h){for(var d=0;d<c;d+=4)if(255!==u[f+d]){p=!0;break}if(p)break;f+=c}for(n.ascent=a-h,f=l-c,p=!1,h=s;h>a;--h){for(var y=0;y<c;y+=4)if(255!==u[f+y]){p=!0;break}if(p)break;f-=c}return n.descent=h-a,n.fontSize=n.ascent+n.descent,t._fonts[e]=n,n},t}();e.default=i;var o=document.createElement("canvas");o.width=o.height=10,i._canvas=o,i._context=o.getContext("2d"),i._fonts={}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return"number"==typeof t?(0,l.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function o(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=i(t[e]);return t}return i(t)}function a(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(0),l=n(2),c={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:u.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100},h=function(){function t(e){r(this,t),this.styleID=0,Object.assign(this,c,e)}return t.prototype.clone=function(){var e={};for(var n in c)e[n]=this[n];return new t(e)},t.prototype.reset=function(){Object.assign(this,c)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var n=e.length-1;n>=0;n--){var r=e[n].trim();/([\"\'])[^\'\"]+\1/.test(r)||(r='"'+r+'"'),e[n]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},s(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=o(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=o(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){a(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=o(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=n(16),l=r(u),c=n(4),h=r(c),f=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments[2],s=arguments[3];i(this,e);var u=o(this,t.call(this,null,a));return u.resolution=s||h.default.RESOLUTION,u.width=n,u.height=r,u.realWidth=u.width*u.resolution,u.realHeight=u.height*u.resolution,u.scaleMode=void 0!==a?a:h.default.SCALE_MODE,u.hasLoaded=!0,u._glRenderTargets={},u._canvasRenderTarget=null,u.valid=!1,u}return a(e,t),e.prototype.resize=function(t,e){t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(l.default);e.default=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(105),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=function(){function t(){r(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,n){var r=e.width,i=e.height;if(n){var a=t.width/2/r,s=t.height/2/i,u=t.x/r+a,l=t.y/i+s;n=o.default.add(n,o.default.NW),this.x0=u+a*o.default.uX(n),this.y0=l+s*o.default.uY(n),n=o.default.add(n,2),this.x1=u+a*o.default.uX(n),this.y1=l+s*o.default.uY(n),n=o.default.add(n,2),this.x2=u+a*o.default.uX(n),this.y2=l+s*o.default.uY(n),n=o.default.add(n,2),this.x3=u+a*o.default.uX(n),this.y3=l+s*o.default.uY(n)}else this.x0=t.x/r,this.y0=t.y/i,this.x1=(t.x+t.width)/r,this.y1=t.y/i,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/i,this.x3=t.x/r,this.y3=(t.y+t.height)/i;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},t}();e.default=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=t,n.type=e,n}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(16),c=function(t){return t&&t.__esModule?t:{default:t}}(l),h=n(2),f=n(51),p=n(0),d=function(t){function e(n,o){if(r(this,e),!n)throw new Error("No video source element specified.");(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0);var a=i(this,t.call(this,n,o));return a.width=n.videoWidth,a.height=n.videoHeight,a._autoUpdate=!0,a._isAutoUpdating=!1,a.autoPlay=!0,a.update=a.update.bind(a),a._onCanPlay=a._onCanPlay.bind(a),n.addEventListener("play",a._onPlayStart.bind(a)),n.addEventListener("pause",a._onPlayStop.bind(a)),a.hasLoaded=!1,a.__loaded=!1,a._isSourceReady()?a._onCanPlay():(n.addEventListener("canplay",a._onCanPlay),n.addEventListener("canplaythrough",a._onCanPlay)),a}return o(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(f.shared.add(this.update,this,p.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(f.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&f.shared.remove(this.update,this),this.source&&this.source._pixiId&&(c.default.removeFromCache(this.source._pixiId),delete this.source._pixiId),t.prototype.destroy.call(this)},e.fromVideo=function(t,n){t._pixiId||(t._pixiId="video_"+(0,h.uid)());var r=h.BaseTextureCache[t._pixiId];return r||(r=new e(t,n),c.default.addToCache(r,t._pixiId)),r},e.fromUrl=function(t,n){var r=document.createElement("video");if(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),Array.isArray(t))for(var i=0;i<t.length;++i)r.appendChild(a(t[i].src||t[i],t[i].mime));else r.appendChild(a(t.src||t,t.mime));return r.load(),e.fromVideo(r,n)},u(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(f.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(f.shared.add(this.update,this,p.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),e}(c.default);e.default=d,d.fromUrls=d.fromUrl},function(t,e,n){"use strict";function r(t){for(var e=6*t,n=new Uint16Array(e),r=0,i=0;r<e;r+=6,i+=4)n[r+0]=i+0,n[r+1]=i+1,n[r+2]=i+2,n[r+3]=i+0,n[r+4]=i+2,n[r+5]=i+3;return n}e.__esModule=!0,e.default=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(45),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=new a.default,u=function(){function t(e,n){r(this,t),this._texture=e,this.mapCoord=new a.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===n?.5:n}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var n=this.mapCoord,r=0;r<t.length;r+=2){var i=t[r],o=t[r+1];e[r]=i*n.a+o*n.c+n.tx,e[r+1]=i*n.b+o*n.d+n.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var n=e._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=e.orig,i=e.trim;i&&(s.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(s));var o=e.baseTexture,a=this.uClampFrame,u=this.clampMargin/o.resolution,l=this.clampOffset;return a[0]=(e._frame.x+u+l)/o.width,a[1]=(e._frame.y+u+l)/o.height,a[2]=(e._frame.x+e._frame.width-u+l)/o.width,a[3]=(e._frame.y+e._frame.height-u+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,!0},i(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.BitmapText=e.TilingSpriteRenderer=e.TilingSprite=e.TextureTransform=e.AnimatedSprite=void 0;var i=n(227);Object.defineProperty(e,"AnimatedSprite",{enumerable:!0,get:function(){return r(i).default}});var o=n(119);Object.defineProperty(e,"TextureTransform",{enumerable:!0,get:function(){return r(o).default}});var a=n(229);Object.defineProperty(e,"TilingSprite",{enumerable:!0,get:function(){return r(a).default}});var s=n(233);Object.defineProperty(e,"TilingSpriteRenderer",{enumerable:!0,get:function(){return r(s).default}});var u=n(228);Object.defineProperty(e,"BitmapText",{enumerable:!0,get:function(){return r(u).default}}),n(230),n(231),n(232)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(3),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(l),h=n(124),f=r(h),p=n(123),d=r(p),y=n(125),v=r(y),g=function(t){function e(n,r,a,s){i(this,e),s=s||5;var u=(0,f.default)(s,!0),l=(0,d.default)(s),h=o(this,t.call(this,u,l));return h.resolution=a||c.settings.RESOLUTION,h._quality=0,h.quality=r||4,h.strength=n||8,h.firstRun=!0,h}return a(e,t),e.prototype.apply=function(t,e,n,r){if(this.firstRun){var i=t.renderer.gl,o=(0,v.default)(i);this.vertexSrc=(0,f.default)(o,!0),this.fragmentSrc=(0,d.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/n.size.width*(n.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,r);else{for(var a=t.getRenderTarget(!0),s=e,u=a,l=0;l<this.passes-1;l++){t.applyFilter(this,s,u,!0);var c=u;u=s,s=c}t.applyFilter(this,s,n,r),t.returnRenderTarget(a)}},u(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(c.Filter);e.default=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(3),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(l),h=n(124),f=r(h),p=n(123),d=r(p),y=n(125),v=r(y),g=function(t){function e(n,r,a,s){i(this,e),s=s||5;var u=(0,f.default)(s,!1),l=(0,d.default)(s),h=o(this,t.call(this,u,l));return h.resolution=a||c.settings.RESOLUTION,h._quality=0,h.quality=r||4,h.strength=n||8,h.firstRun=!0,h}return a(e,t),e.prototype.apply=function(t,e,n,r){if(this.firstRun){var i=t.renderer.gl,o=(0,v.default)(i);this.vertexSrc=(0,f.default)(o,!1),this.fragmentSrc=(0,d.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/n.size.height*(n.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,r);else{for(var a=t.getRenderTarget(!0),s=e,u=a,l=0;l<this.passes-1;l++){t.applyFilter(this,s,u,!0);var c=u;u=s,s=c}t.applyFilter(this,s,n,r),t.returnRenderTarget(a)}},u(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(c.Filter);e.default=g},function(t,e,n){"use strict";function r(t){for(var e=i[t],n=e.length,r=o,a="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",u=void 0,l=0;l<t;l++){var c=s.replace("%index%",l);u=l,l>=n&&(u=t-l-1),c=c.replace("%value%",e[u]),a+=c,a+="\n"}return r=r.replace("%blur%",a),r=r.replace("%size%",t)}e.__esModule=!0,e.default=r;var i={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},o=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},function(t,e,n){"use strict";function r(t,e){var n=Math.ceil(t/2),r=i,o="",a=void 0;a=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var u=a.replace("%index%",s);u=u.replace("%sampleIndex%",s-(n-1)+".0"),o+=u,o+="\n"}return r=r.replace("%blur%",o),r=r.replace("%size%",t)}e.__esModule=!0,e.default=r;var i=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},function(t,e,n){"use strict";function r(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),n=15;n>e;)n-=2;return n}e.__esModule=!0,e.default=r},function(t,e,n){"use strict";function r(t,e){t.bitmapFont=u.BitmapText.registerFont(t.data,e)}e.__esModule=!0,e.parse=r,e.default=function(){return function(t,e){if(!t.data||t.type!==s.Resource.TYPE.XML)return void e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return void e();var n=t.isDataUrl?"":o.dirname(t.url);t.isDataUrl&&("."===n&&(n=""),this.baseUrl&&n&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(n+="/"),n=n.replace(this.baseUrl,""))),n&&"/"!==n.charAt(n.length-1)&&(n+="/");var i=n+t.data.getElementsByTagName("page")[0].getAttribute("file");if(a.utils.TextureCache[i])r(t,a.utils.TextureCache[i]),e();else{var u={crossOrigin:t.crossOrigin,loadType:s.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata,parentResource:t};this.add(t.name+"_image",i,u,function(n){r(t,n.texture),e()})}}};var i=n(10),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),a=n(3),s=n(24),u=n(120)},function(t,e,n){"use strict";function r(t,e){return t.isDataUrl?t.data.meta.image:a.default.resolve(t.url.replace(e,""),t.data.meta.image)}e.__esModule=!0,e.default=function(){return function(t,e){var n=t.name+"_image";if(!t.data||t.type!==i.Resource.TYPE.JSON||!t.data.frames||this.resources[n])return void e();var o={crossOrigin:t.crossOrigin,loadType:i.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata,parentResource:t},a=r(t,this.baseUrl);this.add(n,a,o,function(n){var r=new s.Spritesheet(n.texture.baseTexture,t.data,t.url);r.parse(function(){t.spritesheet=r,t.textures=r.textures,e()})})}},e.getResourcePath=r;var i=n(24),o=n(133),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=n(3)},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(){return function(t,e){t.data&&t.type===r.Resource.TYPE.IMAGE&&(t.texture=o.default.fromLoader(t.data,t.url,t.name)),e()}};var r=n(24),i=n(13),o=function(t){return t&&t.__esModule?t:{default:t}}(i)},function(t,e,n){"use strict";function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===r||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function a(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function s(){v&&d&&(v=!1,d.length?y=d.concat(y):g=-1,y.length&&u())}function u(){if(!v){var t=o(s);v=!0;for(var e=y.length;e;){for(d=y,y=[];++g<e;)d&&d[g].run();g=-1,e=y.length}d=null,v=!1,a(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var h,f,p=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:r}catch(t){h=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var d,y=[],v=!1,g=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];y.push(new l(t,e)),1!==y.length||v||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,n){"use strict";function r(){}function i(t,e,n,r){var i=0,o=t.length;!function a(s){if(s||i===o)return void(n&&n(s));r?setTimeout(function(){e(t[i++],a)},1):e(t[i++],a)}()}function o(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function a(t,e){function n(t,e,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(s.started=!0,null==t&&s.idle())return void setTimeout(function(){return s.drain()},1);var i={data:t,callback:"function"==typeof n?n:r};e?s._tasks.unshift(i):s._tasks.push(i),setTimeout(function(){return s.process()},1)}function i(t){return function(){a-=1,t.callback.apply(t,arguments),null!=arguments[0]&&s.error(arguments[0],t.data),a<=s.concurrency-s.buffer&&s.unsaturated(),s.idle()&&s.drain(),s.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var a=0,s={_tasks:[],concurrency:e,saturated:r,unsaturated:r,buffer:e/4,empty:r,drain:r,error:r,started:!1,paused:!1,push:function(t,e){n(t,!1,e)},kill:function(){a=0,s.drain=r,s.started=!1,s._tasks=[]},unshift:function(t,e){n(t,!0,e)},process:function(){for(;!s.paused&&a<s.concurrency&&s._tasks.length;){var e=s._tasks.shift();0===s._tasks.length&&s.empty(),a+=1,a===s.concurrency&&s.saturated(),t(e.data,o(i(e)))}},length:function(){return s._tasks.length},running:function(){return a},idle:function(){return s._tasks.length+a===0},pause:function(){!0!==s.paused&&(s.paused=!0)},resume:function(){if(!1!==s.paused){s.paused=!1;for(var t=1;t<=s.concurrency;t++)s.process()}}};return s}e.__esModule=!0,e.eachSeries=i,e.queue=a},function(t,e,n){"use strict";function r(t){for(var e="",n=0;n<t.length;){for(var r=[0,0,0],o=[0,0,0,0],a=0;a<r.length;++a)n<t.length?r[a]=255&t.charCodeAt(n++):r[a]=0;o[0]=r[0]>>2,o[1]=(3&r[0])<<4|r[1]>>4,o[2]=(15&r[1])<<2|r[2]>>6,o[3]=63&r[2];switch(n-(t.length-1)){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var s=0;s<o.length;++s)e+=i.charAt(o[s])}return e}e.__esModule=!0,e.encodeBinary=r;var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(t,e,n){"use strict";var r={in:function(t){return function(e){return Math.pow(e,t)}},out:function(t){return function(e){return 1-Math.abs(Math.pow(e-1,t))}},inOut:function(t){return function(e){return e<.5?r.in(t)(2*e)/2:r.out(t)(2*e-1)/2+.5}}};t.exports={linear:r.inOut(1),inQuad:r.in(2),outQuad:r.out(2),inOutQuad:r.inOut(2),inCubic:r.in(3),outCubic:r.out(3),inOutCubic:r.inOut(3),inQuart:r.in(4),outQuart:r.out(4),inOutQuart:r.inOut(4),inQuint:r.in(5),outQuint:r.out(5),inOutQuint:r.inOut(5),inElastic:function(t){return(.04-.04/t)*Math.sin(25*t)+1},outElastic:function(t){return.04*t/--t*Math.sin(25*t)},inOutElastic:function(t){return(t-=.5)<0?(.01+.01/t)*Math.sin(50*t):(.02-.01/t)*Math.sin(50*t)+1},inSin:function(t){return 1+Math.sin(Math.PI/2*t-Math.PI/2)},outSin:function(t){return Math.sin(Math.PI/2*t)},inOutSin:function(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}}},function(t,e,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,n){if(t&&c.isObject(t)&&t instanceof r)return t;var i=new r;return i.parse(t,e,n),i}function o(t){return c.isString(t)&&(t=i(t)),t instanceof r?t.format():r.prototype.format.call(t)}function a(t,e){return i(t,!1,!0).resolve(e)}function s(t,e){return t?i(t,!1,!0).resolveObject(e):e}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=n(247),c=n(257);e.parse=i,e.resolve=a,e.resolveObject=s,e.format=o,e.Url=r;var h=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],y=["{","}","|","\\","^","`"].concat(d),v=["'"].concat(y),g=["%","/","?",";","#"].concat(v),m=["/","?","#"],b=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=n(250);r.prototype.parse=function(t,e,n){if(!c.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+(void 0===t?"undefined":u(t)));var r=t.indexOf("?"),i=-1!==r&&r<t.indexOf("#")?"?":"#",o=t.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),t=o.join(i);var s=t;if(s=s.trim(),!n&&1===t.split("#").length){var f=p.exec(s);if(f)return this.path=s,this.href=s,this.pathname=f[1],f[2]?(this.search=f[2],this.query=e?S.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var d=h.exec(s);if(d){d=d[0];var y=d.toLowerCase();this.protocol=y,s=s.substr(d.length)}if(n||d||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===s.substr(0,2);!E||d&&x[d]||(s=s.substr(2),this.slashes=!0)}if(!x[d]&&(E||d&&!T[d])){for(var O=-1,M=0;M<m.length;M++){var P=s.indexOf(m[M]);-1!==P&&(-1===O||P<O)&&(O=P)}var C,A;A=-1===O?s.lastIndexOf("@"):s.lastIndexOf("@",O),-1!==A&&(C=s.slice(0,A),s=s.slice(A+1),this.auth=decodeURIComponent(C)),O=-1;for(var M=0;M<g.length;M++){var P=s.indexOf(g[M]);-1!==P&&(-1===O||P<O)&&(O=P)}-1===O&&(O=s.length),this.host=s.slice(0,O),s=s.slice(O),this.parseHost(),this.hostname=this.hostname||"";var k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(var I=this.hostname.split(/\./),M=0,R=I.length;M<R;M++){var j=I[M];if(j&&!j.match(b)){for(var D="",L=0,N=j.length;L<N;L++)j.charCodeAt(L)>127?D+="x":D+=j[L];if(!D.match(b)){var B=I.slice(0,M),F=I.slice(M+1),U=j.match(_);U&&(B.push(U[1]),F.unshift(U[2])),F.length&&(s="/"+F.join(".")+s),this.hostname=B.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),k||(this.hostname=l.toASCII(this.hostname));var W=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+W,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!w[y])for(var M=0,R=v.length;M<R;M++){var H=v[M];if(-1!==s.indexOf(H)){var z=encodeURIComponent(H);z===H&&(z=escape(H)),s=s.split(H).join(z)}}var G=s.indexOf("#");-1!==G&&(this.hash=s.substr(G),s=s.slice(0,G));var X=s.indexOf("?");if(-1!==X?(this.search=s.substr(X),this.query=s.substr(X+1),e&&(this.query=S.parse(this.query)),s=s.slice(0,X)):e&&(this.search="",this.query={}),s&&(this.pathname=s),T[y]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var W=this.pathname||"",q=this.search||"";this.path=W+q}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||T[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+i+n+a+r},r.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(c.isString(t)){var e=new r;e.parse(t,!1,!0),t=e}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),u=0;u<s.length;u++){var l=s[u];"protocol"!==l&&(n[l]=t[l])}return T[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!T[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var p=h[f];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||x[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var y=n.pathname||"",v=n.search||"";n.path=y+v}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),m=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=m||g||n.host&&t.pathname,_=b,w=n.pathname&&n.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],S=n.protocol&&!T[n.protocol];if(S&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),b=b&&(""===d[0]||""===w[0])),m)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,w=d;else if(d.length)w||(w=[]),w.pop(),w=w.concat(d),n.search=t.search,n.query=t.query;else if(!c.isNullOrUndefined(t.search)){if(S){n.hostname=n.host=w.shift();var E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");E&&(n.auth=E.shift(),n.host=n.hostname=E.shift())}return n.search=t.search,n.query=t.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var O=w.slice(-1)[0],M=(n.host||t.host||w.length>1)&&("."===O||".."===O)||""===O,P=0,C=w.length;C>=0;C--)O=w[C],"."===O?w.splice(C,1):".."===O?(w.splice(C,1),P++):P&&(w.splice(C,1),P--);if(!b&&!_)for(;P--;P)w.unshift("..");!b||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),M&&"/"!==w.join("/").substr(-1)&&w.push("");var A=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(S){n.hostname=n.host=A?"":w.length?w.shift():"";var E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");E&&(n.auth=E.shift(),n.host=n.hostname=E.shift())}return b=b||n.host&&w.length,b&&!A&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=f.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,n){"use strict";t.exports=n(146)},function(t,e,n){"use strict";(function(e){t.exports=function(t){var n="jmap.js "+t,r="http://www.jibestream.com/";if(e.navigator.userAgent.toLowerCase().indexOf("chrom")>-1){var i,o="background: #e53934; padding:5px 0;";(i=console).log.apply(i,["\n %c %c %c "+n+" %c  %c  "+r+"  %c %c \n\n",o,o,"color: #cccccc; background: #202020; padding:5px 0;",o,"background: #202020; padding:5px 0;",o,o])}else console&&console.log(n+" - "+r)}}).call(e,n(1))},function(t,e,n){"use strict";(function(e){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t,e){var n=e.getMapLayerByName(t);return n||(n=new g.default.MapLayer({name:t}),e.addMapLayer(n)),n}function s(t,e){var n=null,r=["data-unit","waypoint-unit","data-lbox","waypoint-lbox"];switch(t.type){case"Polygon":var i=t.coordinates;n=new g.default.shape.Polygon(Object.assign(e,{points:i}));break;case"LineString":var o=[t.coordinates];n=new g.default.shape.Line(Object.assign(e,{data:o}));break;case"MultiLineString":var a=t.coordinates;n=new g.default.shape.Line(Object.assign(e,{data:a}));break;case"Point":var s=t.coordinates,u=t.properties;if(u.radius){var l=u.radius;n=new g.default.shape.Circle(Object.assign(e,{point:s,radius:l}))}else if(u.width&&u.height){var c=u.width,h=u.height;n=new g.default.shape.Ellipse(Object.assign(e,{point:s,width:c,height:h}))}break;default:console.warn("Not parsing",t.type,t)}return n?(n.meta=t.properties.meta||{},r.forEach(function(t){var e=n.meta;if(e[t]){var r=e[t].split(",").map(Number);"data-unit"===t||"data-lbox"===t?e.destinationIds=r:"waypoint-unit"!==t&&"waypoint-lbox"!==t||(e.waypointIds=r),delete e[t]}}),n.meta.destinationIds||(n.meta.destinationIds=[]),n.meta.waypointIds||(n.meta.waypointIds=[]),n.meta.sourceData=t,n.meta.sourceStyle=e,n.name=t.properties.className,n):null}function u(t,e){var n=Object.assign({},t);return Object.keys(e).forEach(function(t){return void 0!==e[t]?n[t]=e[t]:null}),n}function l(t,e){var n=e||{},r=t.properties.style||{},i=u(r,n),o=t.geometry.geometries;return o?o.map(function(t){return s(t,i)}):[s(t.geometry,i)]}function c(t,e,n,r,i){var o=e.svg,a=e.description,s=n.id,u=n.coordinates,l=null,c=e._.viewbox||[],h=i.width||c[2],f=i.height||c[3];if(o&&u){var p="data:image/svg+xml;utf8,"+i.applyToString(o),d=u;l=new g.default.Icon({id:s,description:a,url:p,name:t,width:h,height:f,point:d}),l.meta={model:e,waypoint:n}}return l}function h(t,e,n){var r=[];if(!n){var i,a=[],s=function(t){return Object.keys(t).map(function(e){return t[e]})};return a=e?t[e.id]?[t[e.id].icons]:[]:Object.keys(t).map(function(e){return t[e].icons}),(i=[]).concat.apply(i,o(r.concat.apply(r,o(a.map(s)))))}return h(t,e).filter(function(t){return t.id===n.id})}var f=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=n(174),y=r(d),v=n(54),g=r(v),m=n(261),b=r(m),_=n(58),w=r(_),x=n(33),T=r(x),S=n(57),E=r(S),O=n(34),M=r(O),P=n(55),C=r(P),A=n(260),k=r(A),I=n(56),R=r(I),j=function(){function t(e){var n=this,r=e.activeVenue,o=e.width,a=e.height,s=e.container,u=void 0===s?".map":s,l=e.forceCanvas,c=void 0!==l&&l,h=e.transparent,f=void 0!==h&&h,p=e.bitmapFonts,d=void 0===p?[]:p,v=e.onReady,m=void 0===v?function(){}:v;if(i(this,t),!1===r._.status&&(g.default.Stage["-x"]=!0),this.jungle=g.default,this.activeVenue=r,this.stage=new g.default.Stage({width:o,height:a,forceCanvas:c,transparent:f}),this._transparentView=!!f,this.userLocation=new g.default.MovingObject({confidenceMax:50}),this.svgParser=new y.default({repeatedLayers:{Background:null,"Streets-SmallAlleys":null,"Streets-Minor":null,"Streets-Major":null}}),this.lboxes={},this.stage.initialize(u),this.stage.view.style.position="absolute",this.stage.view.style.display="block",this.stage.renderer.autoResize=!0,this.stage.renderer.resize(o,a),this.viewPort={width:o,height:a},this.parsedMapCount=0,this.state=new b.default,this.defaultTransform=null,this.defaultIconStyle=new E.default({background:new M.default({fill:"#374046"}),middleground:new M.default({fill:"#3e464c"}),foreground:new M.default({fill:"#FFFFFF"}),width:25,height:25}),this.defaultPathStyle=new M.default({stroke:"#D32F2F",strokeWidth:5,strokeOpacity:.8}),this.assetLayers=["Text-Map-Labels","Image-Map-Labels","Unit-Image","Unit-Text","Wayfinding-Path","Amenity-Icons","PathType-Icons","Moving-Objects"],this.limitConcurrentPaths=!0,this.defaultMapStyle={},r.template){this.defaultMapStyle=r.template.mapStyle.reduce(function(t,e){return t[e.layerName.toLowerCase()]=new jmap.Style(e),t},{}),this.defaultPathStyle=new jmap.Style(r.template.pathStyle);if(["amenityStyle","pathTypeStyle"].forEach(function(t){var e=r.template[t].reduce(function(t,e){return t[e.layerName.toLowerCase()]=new jmap.Style(e),t},{}),i="default"+t.charAt(0).toUpperCase()+t.slice(1),o=Object.assign(n.defaultIconStyle,e);n[i]=new E.default(o)}),r.template.labelStyle){var _=new jmap.Font(r.template.labelStyle);_.fontSize=r.template.labelStyle.fontSize||26,this.setMapLabelFont(_),jmap.dispatcher.subscribe("JMAP_ENGINE_PARSING_SUCCESS",function(){n.setMapLabelFont(_)})}}this._cacheMapLabels(),this.enablePanGestures().enableScaleGestures().enableRotationGestures().enableMouseWheelScale(),this.stage.events.addTapHandler(function(t){return jmap.dispatcher.publish("genericTap",t)}),d&&d.length?this.stage.loadBitMapFonts(d,function(e,n){t._publishEvent("JMAP_ENGINE_BITMAPFONTS_LOADED",n),"function"==typeof m&&m(n)}):"function"==typeof m&&setTimeout(function(){return m({})})}return p(t,[{key:"_fireTapEvent",value:function(t,e){var n=this.currentMap.id;if(t&&t.baseTypeName)this._dispatch("JMAP_VIEW_TAP_SHAPE",{mapId:n,meta:t.meta||{}});else if(t instanceof this.jungle.Icon){var r=t.meta||{};this._dispatch("JMAP_VIEW_TAP_ICON",{mapId:n,iconType:this._getIconModelType(r.model),iconId:r.model?r.model.id:null,waypointId:r.waypoint?r.waypoint.id:null})}else this._dispatch("JMAP_VIEW_TAP",{mapId:n,coordinates:e.localPoint})}},{key:"_getIconModelType",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.activeVenue;return e.amenities.isAmenity(t)?"Amenity":e.pathTypes.isPathType(t)?"PathType":null}},{key:"_updateIconTransform",value:function(){var t=this;["Amenity-Icons","PathType-Icons"].forEach(function(e){var n=t.currentMapView.getMapLayerByName(e);n&&n.icons.forEach(function(t){return t.updateIconTransform()})})}},{key:"_updateMapLabelState",value:function(){this.state.mapLabels.text.visible?this.showAllTextMapLabels():this.hideAllTextMapLabels(),this.state.mapLabels.image.visible?this.showAllImageMapLabels():this.hideAllImageMapLabels()}},{key:"_cacheMapLabels",value:function(){function t(t,e,n){e.forEach(function(e){e.mapLabelInstances.getAll().forEach(function(r){var i=null,o=r.position,a=r.rotation;if("image"===t){var s="data:image/svg+xml;utf8,"+e.svg;i=new g.default.Icon({url:s,point:o,rotation:a,name:e.name,width:e._.viewbox[2],height:e._.viewbox[3],rotateWithMap:!0,autoCorrectRotation:!1}),i.meta={label:e,instance:r}}else i=new g.default.Text({point:o,rotation:a,text:e.name,visible:!0,hideOnOverflow:!1,scaleWithMap:!1});var u={label:e,instance:r,sprite:i};n[r.mapId]||(n[r.mapId]=[]),r.allLevels?n.allLevels.push(u):n[r.mapId].push(u)})})}var e=this.state.mapLabels.text.labels,n=this.state.mapLabels.image.labels,r=function(t){return t.mapLabelInstances.getAll().length},i=this.activeVenue.mapLabels.getWithoutImage().filter(r),o=this.activeVenue.mapLabels.getWithImage().filter(r);t("text",i,e),t("image",o,n)}},{key:"_addContentsToUnit",value:function(t,e,n,r){var i=this;this.clearUnitContents(n);var o=n.meta.waypointIds[0],s=this.lboxes[o],u=n.parent.parent,l=a("Unit-"+t,u),c={};if(s)c={point:[s.x,s.y],width:Math.floor(s.width),height:Math.floor(s.height),rotation:s.rotation,visible:!0,flipped:!!s.flipped,autoCorrectRotation:!0};else{var h=this.getBoundsFromShapes([n]),f=[h.x+.15*h.width,h.y+.15*h.height],p=.7*h.width,d=.7*h.height;c={point:f,width:p,height:d,rotation:0,visible:!0,autoCorrectRotation:!0}}return"Image"===t?(c.scaleWithMap=!0,c.center=!0,c.preserveAspectRatio=!0,c.rotateWithMap=!0,c.resolution=this.stage.maxScale,this.jungle.Image.resolveURL(e,function(e){c.url=e,i._addUnitContentsToLayer(t,o,c,l)})):"Text"===t&&(c.text=e,c.hideOnOverflow=!0,c.style=r,this._addUnitContentsToLayer(t,o,c,l)),this}},{key:"_addUnitContentsToLayer",value:function(t,e,n,r){var i=new g.default[t](n);n.flipped&&(i.flipped=n.flipped),r["add"+t](i),requestAnimationFrame(function(){return i.updateSprite()}),this.state.unitContents[e]=i,this.pauseRender||this.renderCurrentMapView()}},{key:"_getUnitContents",value:function(t){var e=t.meta.waypointIds,n=e?e[0]:null;return this.state.unitContents[n]}},{key:"_addLboxes",value:function(t){for(var e,n=this,r=t.svgTree.querySelectorAll(".LBox"),i=0;i<r.length;i++)!function(i,o){i=new k.default({x:+r[o].getAttribute("x"),y:+r[o].getAttribute("y"),width:+r[o].getAttribute("width"),height:+r[o].getAttribute("height"),mapId:t.id,matrix:r[o].getAttribute("transform")}),i.height>i.width&&(i.rotation+=90,i.flipped=!0),(r[o].getAttribute("waypoint-lbox")||"").split(",").map(Number).forEach(function(t){n.lboxes[t]=i}),e=i}(e,i)}},{key:"_setLayerVisibility",value:function(t,e){this.stage.getMapViews().forEach(function(n){var r=n.getLayerByName(t);r&&(r.visible=e)});var n=this.state.hiddenLayers.indexOf(t),r=this.state.visibleLayers.indexOf(t);return e||-1!==n?e&&-1===r&&(this.state.visibleLayers.push(t),this.state.hiddenLayers.splice(n,1)):(this.state.hiddenLayers.push(t),this.state.visibleLayers.splice(r,1)),this.currentMapView.render(),this}},{key:"_styleIcon",value:function(t,e,n,r){var i=h(this.state.icons[r],e,n);return i.forEach(function(e){t.width&&(e.width=t.width),t.height&&(e.height=t.height),e.setImage(t.applyToString(e.url))}),this.renderCurrentMapView(),i.forEach(function(t){t.parent&&t.updateIconTransform()}),this}},{key:"_getWaypointsForIconType",value:function(t,e){var n=this.activeVenue;if("Amenity"===t)return n.maps.getWaypointsByAmenity(e);if("PathType"===t){var r,i=e.locations._locations.map(function(t){var e=n.maps.getById(t.mapId);return t.waypointIds.map(function(t){return e.waypoints.getById(t)})});return(r=[]).concat.apply(r,o(i))}return[]}},{key:"_hideShowAllIconsOfType",value:function(t,e,n){var r=this;return this.activeVenue[n].getAll().forEach(function(n){return r[""+t+e](n)}),this}},{key:"_hideShowAllIconsOfTypeWithOptions",value:function(t,e,n,r){var i=this;return this.activeVenue[n].getAll().forEach(function(n){return i[""+t+e](n,null,r)}),this}},{key:"_applyOptionsToDrawable",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={rotateWithMap:t.rotateWithMap,flipWithRotation:t.flipWithRotation,scaleWithMap:t.scaleWithMap,visible:t.visible},r=Object.assign(n,e);return!1!==r.flipWithRotation&&null==r.rotateWithMap&&(r.rotateWithMap=!0),!1!==r.rotateWithMap&&null==r.flipWithRotation&&(r.flipWithRotation=!1),null!==r.visible&&(t.visible=r.visible),null!==r.rotateWithMap&&(t.rotateWithMap=r.rotateWithMap),null!==r.flipWithRotation&&(t.autoCorrectRotation=r.flipWithRotation),null!=r.scaleWithMap&&(t.scaleWithMap=r.scaleWithMap),null!=r.scale&&(t.scaleFactor=r.scale),this}},{key:"_hideShowIconOfType",value:function(t,n,r,i,o){var s=this,u=Object.assign({visible:t},o),l="Amenity"===n?"amenities":"pathTypes",h="PathType"===n&&1===r.id;if(!this.activeVenue[l]["is"+n](r)||h)return this;var f=n+"-Icons",p=this.stage.currentMapView,d=a(f,p),y=this.state.icons[l][r.id];if(y||!0!==t){if(!y)return this}else{var v=this["default"+n+"Style"]||this.defaultIconStyle,g=this._getWaypointsForIconType(n,r),m=g.reduce(function(t,e){t[e.mapId]||(t[e.mapId]=[]);var i=n+"-"+r.id+"-"+e.id,o=c(i,r,e,s.svgParser,v);return o&&(o.visible=!1,t[e.mapId].push(o)),t},{}),b={};this.state.icons[l][r.id]={icons:m,visible:!1,parsed:b},y=this.state.icons[l][r.id]}if(!y.parsed[p.id]){var _=y.icons[p.id];_&&d.addIcon(_),y.parsed[p.id]=!0}var w=y.icons,x=Object.keys(w);if(i){var T=function(t){return t.find(function(t){return t.name===n+"-"+r.id+"-"+i.id})},S=x.map(function(t){return w[t]}),E=S.map(T).find(function(t){return t});E&&this._applyOptionsToDrawable(E,u)}else x.map(function(t){return w[t]}).forEach(function(t){return t.forEach(function(t){s._applyOptionsToDrawable(t,u)})}),this._applyOptionsToDrawable(y,u);return this.pauseRender||this.renderCurrentMapView(),e.requestAnimationFrame(function(){return s._updateIconTransform()}),this}},{key:"_applyIconState",value:function(){var t=this;return this.pauseRendering(),["amenities","pathTypes"].forEach(function(e){Object.keys(t.state.icons[e]).forEach(function(n){var r=t.activeVenue[e].getById(n),i=t.state.icons[e][n],o="amenities"===e?"Amenity":"PathType";i.visible?t["show"+o](r):t["hide"+o](r)})}),this.renderCurrentMapView()}},{key:"_updateTransformState",value:function(t){var e=this.stage.currentMapView||t,n=this.stage.getCenterPoint(),r=f(n,2),i=r[0],o=r[1],a=e.getScale(),s=e.getRotation();this.state.update({transform:new w.default({x:i,y:o,scale:a,rotation:s})})}},{key:"_applyLayerVisibilityState",value:function(){this.state.hiddenLayers.forEach(this.hideLayer,this),this.state.visibleLayers.forEach(this.showLayer,this)}},{key:"_respectMinMaxScale",value:function(t){var e=this.stage;return t>=e.maxScale?e.maxScale:t<=e.minScale?e.minScale:t}},{key:"_calculateMinScale",value:function(){var t=this.stage.currentMapView,e=this.stage.view,n=t.bounds;this.stage.minScale=1.1*Math.max(e.width/n.width,e.height/n.height),this.stage._dirtyMinScale=!1}},{key:"_updateJCoreRefs",value:function(t){this.currentMap=t,this.currentMapView=this.stage.currentMapView,this.currentBuilding=this.activeVenue.buildings.getByMap(t),this.currentFloor=this.activeVenue.buildings.getFloorByMap(t)}},{key:"_getLayerNamesInMapWithCondition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.stage.getMapViewById(t.id),r=[];return n&&(r=n.getLayers().reduce(function(t,n){return e(n)&&t.push(n.name),t},[])),r}},{key:"_showAllMapLabels",value:function(t,e){var n=this,r=Object.assign({visible:!0},e),i=this.currentMap,s=this.state.mapLabels[t],u=s.loaded[i.id],l=s.labels,c=l[i.id]||[],h=c.concat.apply(c,o(l.allLevels)).map(function(t){return t.sprite});if(!u){var f="text"===t?"Text-Map-Labels":"Image-Map-Labels",p=a(f,this.stage.currentMapView);p.clearAll(),"text"===t?p.addText(h):p.addIcon(h),this.state.mapLabels[t].loaded[i.id]=!0,this.pauseRender||(this.stage.engine.start(),this.stage.engine.onNextTick(function(){n.renderCurrentMapView(),n.stage.engine.stop()}))}return h.forEach(function(t){return n._applyOptionsToDrawable(t,r)}),s.visible=!0,this}},{key:"_hideAllMapLabels",value:function(t){var e=this.currentMap,n=this.state.mapLabels[t],r=n.labels,i=r[e.id]||[];return i.concat.apply(i,o(r.allLevels)).map(function(t){return t.sprite}).forEach(function(t){return t.visible=!1}),n.visible=!1,this}},{key:"_getParsedMapView",value:function(t){var e=this.stage.getMapViewById(t.id);return e||(this.parseMap(t),e=this.stage.getMapViewById(t.id)||this.stage.currentMapView),e}},{key:"_dispatch",value:function(t,e){jmap&&jmap.dispatcher&&jmap.dispatcher.publish(t,[e])}},{key:"_handleShowMapOptions",value:function(t,n){var r=this,i=this.stage.getMapViewById(t.id);Object.keys(n).forEach(function(o){var a=n[o];switch(o){case"backgroundImage":if("string"!=typeof a)break;var s=i.guaranteeMapLayer("Background");if(s.images.find(function(t){return t.url===a}))break;s.clearImages();var u=new e.jungle.Image({url:a,point:[0,0],width:t.width,height:t.height,rotation:0,autoCorrectRotation:!1,preserveAspectRatio:!1,visible:!0,scaleWithMap:!0});u.getAspectRatio(function(){return r.stage.requestUpdateOnNextFrame()}),s.addImage(u);break;default:console.log("Not using foreign option",a)}}),this.stage.renderMapViewById(t.id),this.stage.requestUpdateOnNextFrame()}},{key:"getAllShapesFromLayersInStage",value:function(t){var e=function(e,n){var r=n.getLayerByName(t);return e.concat(r.shapes)};return this.stage.getMapViews().reduce(e,[])}},{key:"pauseRendering",value:function(){return this.pauseRender=!0,this}},{key:"renderCurrentMapView",value:function(){return this.pauseRender=!1,this.stage.renderMapViewById(this.stage.currentMapView.id),this}},{key:"parseMap",value:function(e){var n=this,r={mapId:e.id};this._dispatch("JMAP_ENGINE_PARSING_START",r);try{if(!this.activeVenue.maps.isMap(e))return t.typeError("parseMap","Map");if(this.stage.getMapViewById(e.id))return this;var i=this.svgParser.parse(e.svgTree);this._addLboxes(e);var o=new g.default.MapView({id:e.id,name:e.id.toString(),width:e.width,height:e.height,sequence:this.parsedMapCount});i.features.forEach(function(t,e){var r=new g.default.MapLayer({name:t.id,sequence:e}),i=n.defaultMapStyle[t.id.toLowerCase()];r.addShape(l(t,i?i.hexidecimal():null)),n._transparentView||"background"===r.name.toLowerCase()&&r.shapes[0]&&(n.stage.renderer.backgroundColor=r.shapes[0].fill||0),o.addMapLayer(r)}),this.assetLayers.forEach(function(t){return a(t,o)}),this.parsedMapCount+=1,this.stage.addMapView(o)}catch(t){var s="Map Parsing failed for map: "+r.mapId+" :: "+t;throw this._dispatch("JMAP_ENGINE_PARSING_FAILED",r),new Error(s)}return this._dispatch("JMAP_ENGINE_PARSING_SUCCESS",r),this}},{key:"parseAllMaps",value:function(){return this.activeVenue.maps.getAll().forEach(this.parseMap.bind(this)),this}},{key:"showMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1;return this.stage.getMapViewById(t.id)||(this.parseMap(t),n=!0),this.stage.showMapViewById(t.id),this.stage.resize(),this.state.update({map:t}),this._updateJCoreRefs(t),this._updateTransformState(),this._applyIconState(),this._updateMapLabelState(),this._applyLayerVisibilityState(),this._calculateMinScale(),this.stage.currentMapView.updatePopupsPosition(),n&&1===this.parsedMapCount&&this.resetMapTransform(),this.currentMapView.render(),this._handleShowMapOptions(t,e),this._dispatch("JMAP_CONTROLLER_MAP_SHOW",{mapId:t.id}),this}},{key:"showDefaultMap",value:function(){try{this.defaultMap=this.activeVenue.buildings.getDefault().floors.getDefault().map}catch(t){console.error("JMap :: Can't find a default map to show",t)}return this.showMap(this.defaultMap),this}},{key:"showMapWithBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e.constructor===C.default&&(this.showMap(t),this.currentMapView.updateBounds(e),this._calculateMinScale(),n&&(this.setMapTransform(new w.default({x:e.x+e.width/2,y:e.y+e.height/2,scale:this.stage.minScale})),this.currentMapView.render()))}},{key:"getBoundsOfPathOnMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentMap;if(!t||t.constructor!==jmap.core.Map)return null;var e=this.stage.mapViews.find(function(e){return e.id===t.id});if(!e)return null;var n=e.guaranteeMapLayer("Wayfinding-Path");return n.shapes.length?this.getBoundsFromShapes(n.shapes):null}},{key:"zoomToPathOnMap",value:function(t,e,n){var r=this.getBoundsOfPathOnMap(t);r&&this.fitBoundsInView(r,e,n)}},{key:"setMapTransform",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.constructor!==w.default)return null;this._updateTransformState();var n=this.stage.currentMapView,r=w.default.merge(e,this.state.get("transform")),i=e.animation.onUpdate,o=e.animation.onComplete;return n.focusToPoint({point:[r.x,r.y],scale:r.scale,rotation:r.rotation,onUpdate:i,onComplete:function(){t._updateTransformState(),"function"==typeof o&&o()},speed:e.animation.duration}),this}},{key:"resetMapTransform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.defaultTransform;if(!e||e.constructor!==w.default){var n=this.stage.currentMapView;if(!n.getMapCenter)return this;var r=n.getMapCenter(),i=f(r,2),o=i[0],a=i[1];this.defaultTransform=new w.default({x:o,y:a,scale:1,rotation:0,animation:t})}return t.constructor===T.default&&(this.defaultTransform.animation=t),this.setMapTransform(this.defaultTransform,["rotation","scale"])}},{key:"setMaxScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.stage.maxScale,e=this.stage;return t>=e.minScale?(e.maxScale=t,this):(console.error("JMap :: Max scale cannot be less than the calculated minScale of "+e.minScale),null)}},{key:"scaleMapByPercent",value:function(t,e){if(isNaN(+t))return null;if(e&&e.constructor!==jmap.Animation)return null;var n=this.currentMapView.scale*(+t+1),r=e||new jmap.Animation({duration:.3});return this.setMapTransform(new jmap.Transform({scale:n,animation:r})),this}},{key:"fitBoundsInView",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];if(!t||t.constructor!==C.default)return null;var r=e.duration,i=e.onUpdate,o=e.onComplete,a=this.stage.currentMapView;return a.fitBoundsInView?a.fitBoundsInView({bounds:t,padding:n,speed:r,onUpdate:i,onComplete:o}):null}},{key:"showAmenity",value:function(t,e,n){return this._hideShowIconOfType(!0,"Amenity",t,e,n)}},{key:"hideAmenity",value:function(t,e){return this._hideShowIconOfType(!1,"Amenity",t,e,null)}},{key:"showAllAmenities",value:function(t,e){var n,r=["show","Amenity","amenities",t];return(n=this.pauseRendering())._hideShowAllIconsOfTypeWithOptions.apply(n,r),e||this.renderCurrentMapView(),this}},{key:"hideAllAmenities",value:function(){var t,e=["hide","Amenity","amenities"];return(t=this.pauseRendering())._hideShowAllIconsOfType.apply(t,e).renderCurrentMapView()}},{key:"showPathType",value:function(t,e,n){return this._hideShowIconOfType(!0,"PathType",t,e,n)}},{key:"hidePathType",value:function(t,e){return this._hideShowIconOfType(!1,"PathType",t,e,null)}},{key:"showAllPathTypes",value:function(t,e){var n,r=["show","PathType","pathTypes",t];return(n=this.pauseRendering())._hideShowAllIconsOfTypeWithOptions.apply(n,r),e||this.renderCurrentMapView(),this}},{key:"hideAllPathTypes",value:function(){var t,e=["hide","PathType","pathTypes"];return(t=this.pauseRendering())._hideShowAllIconsOfType.apply(t,e).renderCurrentMapView()}},{key:"styleAmenity",value:function(t,e,n){return this._styleIcon(t,e,n,"amenities")}},{key:"styleAllAmenities",value:function(t){return this.styleAmenity(t)}},{key:"resetAmenityStyle",value:function(t,e){return this.styleAmenity(this.defaultAmenityStyle,t,e)}},{key:"resetAllAmenityStyles",value:function(){return this.styleAmenity(this.defaultAmenityStyle)}},{key:"stylePathType",value:function(t,e,n){return this._styleIcon(t,e,n,"pathTypes")}},{key:"styleAllPathTypes",value:function(t){return this.stylePathType(t)}},{key:"resetPathTypeStyle",value:function(t,e){return this.stylePathType(this.defaultPathTypeStyle,t,e)}},{key:"resetAllPathTypeStyles",value:function(){return this.stylePathType(this.defaultAmenityStyle)}},{key:"enablePanGestures",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.stage.events.addDragPan(t),this}},{key:"disablePanGestures",value:function(){return this.stage.events.removeDragPan(),this}},{key:"enableMouseWheelScale",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},e);return n.onComplete=function(){t.currentMapView.updateSprites(),e.onComplete&&e.onComplete()},this.stage.events.addMouseWheelZoom(n),this}},{key:"disableMouseWheelScale",value:function(){return this.stage.events.removeMouseWheelZoom(),this}},{key:"enableScaleGestures",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},e);return n.onComplete=function(){t.currentMapView.updateSprites(),e.onComplete&&e.onComplete()},this.stage.events.addPinchZoom(n),this}},{key:"disableScaleGestures",value:function(){return this.stage.events.removePinchZoom(),this}},{key:"enableRotationGestures",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},e);return n.onComplete=function(){t.currentMapView.updateSprites(),e.onComplete&&e.onComplete()},this.stage.events.addMapRotation(n),this}},{key:"disableRotationGestures",value:function(){return this.stage.events.removeMapRotation(),this}},{key:"getShapesInLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._getParsedMapView(e),r=n.getLayerByName(t);return r?r.getShapes():[]}},{key:"getShapeInLayerFromWaypoint",value:function(t,e){if("string"==typeof t){var n=this.activeVenue.maps.getById(e.mapId);if(n&&n.waypoints.isWaypoint(e)){var r=this.getShapesInLayer(t,n),i=r.find(function(t){return!(!t.meta||!t.meta.waypointIds)&&t.meta.waypointIds.indexOf(e.id)>-1});if(i)return i}}return null}},{key:"getBoundsFromShapes",value:function(t){return new C.default(this.jungle.MapLayer.getBounds(t,this.currentMapView.rotation))}},{key:"styleShapes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.constructor===Array&&e.constructor===M.default){var n=e.hexidecimal();t.forEach(function(t){void 0!==n.fill&&t.setFill(n.fill),void 0!==n.stroke&&t.setStroke(n.stroke),void 0!==n.strokeWidth&&t.setStrokeWidth(n.strokeWidth),void 0!==n.strokeOpacity&&t.setStrokeOpacity(n.strokeOpacity),void 0!==n.opacity&&t.setOpacity(n.opacity),t.updateGraphic()})}return this}},{key:"resetShapeStyles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)&&t.forEach(function(t){return t.resetStyle()}),this.currentMapView.render(),this}},{key:"styleEmptyUnits",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t||t.constructor!==jmap.Style)return this;this.unitStyling||(this.unitStyling={});var r=this.unitStyling;return r.emptyUnitsFn&&jmap.dispatcher.unsubscribe("JMAP_ENGINE_PARSING_SUCCESS",r.emptyUnitsFn),r.emptyUnitsFn=function(r){var i=e.activeVenue.maps.getById(r.mapId),o=e.getUnitsFromMap(i),a=o.filter(function(t){var n=t.meta.destinationIds,r=n.map(function(t){return e.activeVenue.destinations.getById(t)}).filter(function(t){return t});return!r||r&&0===n.length});e.styleShapes(a,t),n&&a.forEach(function(t){return t.updateInitialStyle()})},r.overrideEmptyUnits=!!n,jmap.dispatcher.subscribe("JMAP_ENGINE_PARSING_SUCCESS",r.emptyUnitsFn),this.stage.mapViews.forEach(function(t){return r.emptyUnitsFn({mapId:t.id})}),this}},{key:"styleUnitsWithDestinations",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t||t.constructor!==jmap.Style)return this;this.unitStyling||(this.unitStyling={});var r=this.unitStyling;return r.unitsWithDestsFn&&jmap.dispatcher.unsubscribe("JMAP_ENGINE_PARSING_SUCCESS",r.unitsWithDestsFn),r.unitsWithDestsFn=function(r){var i=e.activeVenue.maps.getById(r.mapId),o=e.getUnitsFromMap(i),a=o.filter(function(t){var n=t.meta.destinationIds,r=n.map(function(t){return e.activeVenue.destinations.getById(t)}).filter(function(t){return t});return r&&r.length>0});e.styleShapes(a,t),n&&a.forEach(function(t){return t.updateInitialStyle()})},r.overrideUnitsWithDests=!!n,jmap.dispatcher.subscribe("JMAP_ENGINE_PARSING_SUCCESS",r.unitsWithDestsFn),this.stage.mapViews.forEach(function(t){return r.unitsWithDestsFn({mapId:t.id})}),this}},{key:"getWaypointsFromShape",value:function(t){var e=this;try{return t.meta.waypointIds.map(function(t){return e.activeVenue.maps.getWaypointById(t)}).filter(function(t){return t})}catch(t){return[]}}},{key:"getDestinationsFromShape",value:function(t){var e=this,n=t||{};return(n.meta&&n.meta.destinationIds?n.meta.destinationIds:[]).map(function(t){return e.activeVenue.destinations.getById(t)})}},{key:"hideLayer",value:function(t){return this._setLayerVisibility(t,!1)}},{key:"showLayer",value:function(t){return this._setLayerVisibility(t,!0)}},{key:"_unsubscribeUnitStyler",value:function(){this.unitStyling&&!this.unitStyling.overrideUnitsWithDests&&jmap.dispatcher.unsubscribe("JMAP_ENGINE_PARSING_SUCCESS",this.unitStyling.unitsWithDestsFn),this.unitStyling&&!this.unitStyling.overrideEmptyUnits&&jmap.dispatcher.unsubscribe("JMAP_ENGINE_PARSING_SUCCESS",this.unitStyling.emptyUnitsFn)}},{key:"resetAllStyles",value:function(){this._unsubscribeUnitStyler();var t=function(t,e){return t.concat.apply(t,o(e.shapes))},e=this.stage.getMapViews().reduce(t,[]);return this.resetShapeStyles(e).resetAllAmenityStyles().resetAllPathTypeStyles()}},{key:"resetAllUnitStyles",value:function(){this._unsubscribeUnitStyler();var t=this.getAllShapesFromLayersInStage("units");return this.resetShapeStyles(t)}},{key:"getUnitFromWaypoint",value:function(t){if(!this.currentMap.waypoints.isWaypoint(t))return null;var e=this.activeVenue.maps.getById(t.mapId);return this.getUnitsFromMap(e).find(function(e){return e.meta.waypointIds.indexOf(t.id)>-1})||null}},{key:"getUnitsFromDestination",value:function(t){var e=this;return this.activeVenue.destinations.isDestination(t)?t.locations.getAll().reduce(function(t,n){var r=e.activeVenue.maps.getById(n.mapId);return t.concat(e.getUnitsFromMap(r))},[]).filter(function(e){return e.meta.destinationIds.indexOf(t.id)>-1}):[]}},{key:"getUnitsFromMap",value:function(t){return this.getShapesInLayer("units",t)}},{key:"clearUnitContents",value:function(t){var e=t.meta.waypointIds[0],n=this.state.unitContents[e];return n&&n.parent&&(n.parent["remove"+n.type](n),this.state.unitContents[e]=null),this}},{key:"addTextToUnit",value:function(t,e,n){var r=this;if(Array.isArray(t)){this.pauseRendering();var i=e&&e.constructor===R.default?e.clone():new R.default({});return t.forEach(function(t){Array.isArray(t)&&2===t.length&&"string"==typeof t[0]&&t[0]&&r.addTextToUnit(t[0],t[1],i)}),this.renderCurrentMapView()}return this._addContentsToUnit("Text",t,e,n)}},{key:"addImageToUnit",value:function(t,e){return this._addContentsToUnit("Image",t,e)}},{key:"hideUnitContents",value:function(t){var e=this._getUnitContents(t);return e&&(e.visible=!1),this}},{key:"showUnitContents",value:function(t){var e=this._getUnitContents(t);return e&&(e.visible=!0),this}},{key:"showAllTextMapLabels",value:function(t){return this._showAllMapLabels("text",t)}},{key:"showAllImageMapLabels",value:function(t){return this._showAllMapLabels("image",t)}},{key:"hideAllTextMapLabels",value:function(){return this._hideAllMapLabels("text")}},{key:"hideAllImageMapLabels",value:function(){return this._hideAllMapLabels("image")}},{key:"setMapLabelFont",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.constructor===R.default){var e=this.state.mapLabels.text.labels;Object.keys(e).forEach(function(n){e[n].forEach(function(e){return e.sprite.style=t})})}return this}},{key:"addComponent",value:function(t,e,n){return this._getParsedMapView(e).addPopup(t,n),this}},{key:"removeComponent",value:function(t,e){var n=this.stage.getMapViewById(e.id);return n&&n.removePopup(t),this}},{key:"wayfindBetweenWaypoints",value:function(t,e,n,r){var i=this,o=this.activeVenue.wayfind(t,e,n);return Array.isArray(r)&&r.length&&o.forEach(function(t){var e=i.activeVenue.maps.getById(t.mapId),n=i._getParsedMapView(e),o=r.map(function(t){return n.getMapLayerByName(t)}).filter(function(t){return t}),a=g.default.shape.Line.createFromWaypoints({waypoints:t.points,closed:!1});a.generalizePath(o);var s=a.data[0].map(function(t){return a.wpHash[t]});t.points=s}),this._dispatch("JMAP_CONTROLLER_GENERATE_WAYPATH",{accessibility:n,generatedPath:o.map(function(t){return{mapId:t.mapId,waypointIds:t.points.map(function(t){return t.id})}})}),o}},{key:"drawWayfindingPath",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultPathStyle;n.constructor!==M.default&&console.warn("Please pass valid style into drawWayfindingPath"),this.limitConcurrentPaths&&this.clearWayfindingPath();var r=n.hexidecimal(),i=t.map(function(t,n){var i=t.mapId;e.parseMap(e.activeVenue.maps.getById(i));var o=g.default.shape.Line.createFromWaypoints({waypoints:t.points,id:n,closed:!1,stroke:r.stroke,strokeWidth:r.strokeWidth,strokeOpacity:r.strokeOpacity});return a("Wayfinding-Path",e.stage.getMapViewById(i)).addShape(o),o});return this.state.currentPaths.push(i),this.pauseRender||this.renderCurrentMapView(),this}},{key:"clearWayfindingPath",value:function(){return this.state.currentPaths.forEach(function(t){t.forEach(function(t){t.parent&&t.parent.removeShape(t)})}),this.state.currentPaths=[],this}},{key:"enableLayerInteractivity",value:function(t,e){var n=this;return"function"!=typeof e&&console.warn("enableLayerInteractivity :: requires a function callback"),this.stage.interactiveLayerData[t.toLowerCase()]=function(t,r){n._fireTapEvent(t,r),e(t,r)},this}},{key:"disableLayerInteractivity",value:function(t){var e=this.stage.interactiveLayerData;return e[t]&&delete e[t],this}},{key:"enableGenericTapHandler",value:function(t){var e=this;return"function"!=typeof t&&console.warn("enableGenericTapHandler :: requires a function callback"),this.stage.genericTapHandler=function(n){e._fireTapEvent(null,n),t(n)},this}},{key:"disableGenericTapHandler",value:function(){return this.stage.genericTapHandler=null,this}},{key:"enableDoubleTapGesture",value:function(t){return"string"==typeof t.layerName?("function"!=typeof t.onComplete&&console.warn("enableGenericTapHandler :: requires a function callback"),this.stage.doubleTapLayerData[t.layerName.toLowerCase()]=t.onComplete):this.stage.events.addDoubleTapHandler(t.onComplete),this}},{key:"disableDoubleTapGesture",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"string"==typeof t.layerName?delete this.stage.doubleTapLayerData[t.layerName.toLowerCase()]:this.stage.events.removeDoubleTapHandler(t.onComplete),this}},{key:"loadJSONStyleConfiguration",value:function(t){var e=this,n={};try{n=JSON.parse(t)}catch(t){return console.warn("JController :: Bad JSON format for style config.",t),null}return Array.isArray(n.mapStyle)&&n.mapStyle.forEach(function(t){var n=new M.default(t),r=n.stroke?"none":"#000000";n.fill=n.fill||r,e.defaultMapStyle[t.layerName.toLowerCase()]=n,e.stage.mapViews.map(function(t){return e.activeVenue.maps.getById(t.id)}).forEach(function(r){var i=e.getShapesInLayer(t.layerName,r),o=n.hexidecimal();i.forEach(function(t){Object.keys(o).forEach(function(e){var n=e.charAt(0).toUpperCase()+e.slice(1),r="set"+n;void 0!==o[e]&&t[r](o[e])}),t.updateInitialStyle()})})}),["amenityStyle","pathTypeStyle"].forEach(function(t){if(Array.isArray(n[t])){var r={};n[t].forEach(function(t){t.layerName&&(r[t.layerName.toLowerCase()]=new M.default(t)),["width","height"].forEach(function(e){"number"==typeof t[e]&&(r[e]=t[e])})});var i="default"+t.charAt(0).toUpperCase()+t.slice(1);e[i]=new E.default(r)}}),n.pathStyle&&(this.defaultPathStyle=new M.default(n.pathStyle)),this}},{key:"getAllLayerNamesInMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.stage.getMapViewById(t.id);return e?e.getLayers().map(function(t){return t.name}):[]}},{key:"getAllVisibleLayerNamesInMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._getLayerNamesInMapWithCondition(t,function(t){return t.visible})}},{key:"getAllHiddenLayerNamesInMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._getLayerNamesInMapWithCondition(t,function(t){return!t.visible})}},{key:"applyDisplayModeToUnits",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this,n=arguments[1],r=arguments[2];if(Array.isArray(t)){this.pauseRendering();var i=new R.default({});this.activeVenue.template&&this.activeVenue.template.labelStyle&&(i=new jmap.Font(this.activeVenue.template.labelStyle));var o=n&&n.constructor===R.default?n.clone():i,a=[];if(t.forEach(function(t){if(t&&t.meta&&t.meta.destinationIds){var n=e.activeVenue.destinations,r=t.meta.destinationIds.map(function(t){return n.getById(t)}).filter(function(t){return t}),i=r.filter(function(t){return t.svg});if(i.length){var o=i[0],s=o.svg,u=o.displayMode,l=o.name;if(1===u||window.MSInputMethodContext&&document.documentMode)a.push([l,t]);else if(2===u)try{e.addImageToUnit("data:image/svg+xml;utf8,"+s,t)}catch(e){console.warn("Unable to process svg for "+l+". Rendering text instead."),a.push([l,t])}}else if(r.length){var c=r[0],h=c.displayMode,f=c.name;h>0&&a.push([f,t])}}}),this.addTextToUnit(a,o),this.renderCurrentMapView(),"function"==typeof r){var s=function t(e){e.timeOutTimestamp||(e.timeOutTimestamp=Date.now()+1e4),e.sprite?(delete e.timeOutTimestamp,"Text"===e.type?r(e):e.updateSprite()):Date.now()<e.timeOutTimestamp&&requestAnimationFrame(function(){return t(e)})},u=[];t.forEach(function(t){var e=t.parent&&t.parent.parent;e&&!u[e.id]&&(u[e.id]=!0,e.getMapLayerByName("Unit-Text").texts.forEach(s),e.getMapLayerByName("Unit-Image").images.forEach(s))})}}}},{key:"applyDisplayModeToAllUnits",value:function(t,e){var n=this,r=function(r){var i=n.getUnitsFromMap(r);window.requestAnimationFrame(function(){n.applyDisplayModeToUnits(i,t,e)})};return this.stage.mapViews.forEach(function(t){var e=t.id,i=n.activeVenue.maps.getById(e);i&&r(i)}),jmap.dispatcher.subscribe("JMAP_ENGINE_PARSING_SUCCESS",function(t){var e=n.activeVenue.maps.getById(t.mapId);e&&r(e)}),this}},{key:"applyFittedLabelsToAllUnits",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.minCharacterSize,i=void 0===r?.1:r,o=n.lboxPercent,a=void 0===o?.9:o,s=n.truncationString,u=void 0===s?"...":s,l=n.truncate,c=void 0===l||l,h={minCharacterSize:i,lboxPercent:a,truncationString:u,truncate:c},f=function(e){t._fittedLabelTransform(e,h)};return this.applyDisplayModeToAllUnits(e,f),this}},{key:"createMovingObject",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Array.isArray(e)){this.pauseRendering();var n=e.map(function(e){return t.createMovingObject(e,!1)});return this.renderCurrentMapView(),n}var r=Object.assign({},e);r.map=e.map||this.currentMap,r.position=this.getPointWithConfig(e.position,r.map,r);var i=new g.default.MovingObject(r);return this.parseMap(r.map),this.stage.getMapViewById(r.map.id).getLayerByName("Moving-Objects").addMovingObject(i),this.pauseRender||this.renderCurrentMapView(),i}},{key:"getPointWithConfig",value:function(e,n,r){var i=f(e,2),o=i[0],a=i[1],s={x:o,y:a,mapId:n.id};if(r.snapToGrid){var u=n.paths.getAll();return t._getClosestPointFromLines(s,u,n).position}if(r.snapToWaypoint){var l=e;return this.activeVenue.getClosestWaypointToCoordinatesOnMap(l,n).coordinates}return e}},{key:"updateMovingObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];if((t.map!==e.map&&e.map||!t.map)&&(t.map&&this.removeMovingObject(t),t.map=e.map||this.currentMap,t.map)){this.parseMap(t.map);this.stage.getMapViewById(t.map.id).guaranteeMapLayer("Moving-Objects").addMovingObject(t),this.currentMap.id===t.map.id&&this.renderCurrentMapView()}return t.position.length||(t.position=e.position),e.position&&(e.position=this.getPointWithConfig(e.position,t.map,t.meta)),t.updateMovingObject(e,n),this}},{key:"hideAllMovingObjectsOnLayer",value:function(t){var e=this;if("string"==typeof t){var n=this.currentMapView.getMapLayerByName(t);if(n){n.movingobjects.forEach(function(t){return e.hideMovingObject(t)})}}}},{key:"showAllMovingObjectsOnLayer",value:function(t){var e=this;if("string"==typeof t){var n=this.currentMapView.getMapLayerByName(t);if(n){n.movingobjects.forEach(function(t){return e.showMovingObject(t)})}}}},{key:"_updateMovingObjectVisibility",value:function(t,e){t&&t.constructor===this.jungle.MovingObject&&(t.visible=!!e,t.updateMovingObjectTransform())}},{key:"showMovingObject",value:function(t){this._updateMovingObjectVisibility(t,!0)}},{key:"hideMovingObject",value:function(t){this._updateMovingObjectVisibility(t,!1)}},{key:"updateUserLocationPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.userLocation.position,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.userLocation.orientation,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.userLocation.confidenceMax,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.userLocation.map,i={position:t,orientation:e,confidence:n,map:r};this.updateUserLocation(i)}},{key:"wayfindToClosestWaypoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this,r=arguments[2],i=arguments[3];return t&&t.constructor===jmap.core.Waypoint&&e&&e.length?e.reduce(function(t,e){return t&&e.constructor!==jmap.core.Waypoint},!0)?null:e.reduce(function(e,o){var a=e?e.cost:1/0,s=n.wayfindBetweenWaypoints(t,o,r,i),u=s[s.length-1],l=u?u.cost:1/0;return l<a?{path:s,cost:l,waypoint:o}:e},null).path:null}},{key:"updateUserLocation",value:function(t,e){if(this.userLocation.tracking){var n=t.position||this.userLocation.position,r=f(n,2),i=r[0],o=r[1],a=new w.default({x:i,y:o,animation:new T.default({duration:1})});e&&e.duration&&(a.animation.duration=e.duration),this.setMapTransform(a)}this.updateMovingObject(this.userLocation,t,e)}},{key:"removeMovingObject",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.stage.getMapViewById(t.map.id).guaranteeMapLayer("MovingObjects").removeMovingObject(t),this}},{key:"convertCoordinate",value:function(t,e,n){return g.default.util.convertCoordinate(t,e,n,this.activeVenue)}},{key:"defaultAmenityStyle",get:function(){return this._defaultAmenityStyle||this.defaultIconStyle},set:function(t){this._defaultAmenityStyle=t}},{key:"defaultPathTypeStyle",get:function(){return this._defaultPathTypeStyle||this.defaultIconStyle},set:function(t){this._defaultPathTypeStyle=t}}],[{key:"_publishEvent",value:function(t,n){e.jmap&&e.jmap.dispatcher&&e.jmap.dispatcher.publish(t,[n])}},{key:"typeError",value:function(t,e,n){var r="JMap :: JController#"+t+" requires a "+e+" as its "+(n||"1st")+" argument";console.error(r)}},{key:"getPlatformVersion",value:function(){}},{key:"getSDKVersion",value:function(){}},{key:"_fittedLabelTransform",value:function(e,n){var r=n.minCharacterSize,i=Math.max(e.width,e.height),o=Math.min(e.width,e.height),a=e.style,s=a.fontSize,u=a.fontFamily,l=t._getTextWidth(e.text,s+"px "+u),c=i/l*n.lboxPercent,h=o/s*n.lboxPercent;e.visible=!0,e.scaleWithMap=!0,e.hideOnOverflow=!1,e.scaleFactor=Math.min(c,h);var f=i*e.scaleFactor/e.text.length,p=n.truncationString.length,d=e.text.length>p+1&&n.truncate;if(f<r&&d){var y=e.text.substring(0,e.text.length-p-1);return e.sprite.text=e.text=""+y+n.truncationString,t._fittedLabelTransform(e,n)}return e._updateSpriteScale=function(){e.scale=e.sprite.scale.x=e.sprite.scale.y=e.scaleFactor},e.updateSprite(),this}},{key:"_getTextWidth",value:function(e,n){var r=t._getTextWidth.canvas||(t._getTextWidth.canvas=document.createElement("canvas")),i=r.getContext("2d");return i.font=n,i.measureText(e).width}},{key:"_getClosestPointFromLines",value:function(t,e,n){var r=1/0,i={};return e.forEach(function(e){var o=n.waypoints.getById(e.waypointIds[0]),a=n.waypoints.getById(e.waypointIds[1]);if(o&&a){var s=[{x:o.coordinates[0],y:o.coordinates[1]},{x:a.coordinates[0],y:a.coordinates[1]}],u=g.default.util._getClosestPointOnLine(t,s);u.dist<r&&(i=u,r=u.dist)}}),i}},{key:"getObjectsInArrayByString",value:function(t,e){function n(t,e,n){var i=0,o=t[e];Array.isArray(o)&&(o=t[e].join(" "));var a=new RegExp(n.toLowerCase()),s=o.toLowerCase().search(a);if(s<0)return 0;i+=1,0===s&&(i+=1);var u=1-s/o.length;i+=u;var l=n.length/o.length;return i+=l,r.forEach(function(t){e.toLowerCase()===t.toLowerCase()&&(i+=1),0===s&&(i+=1)}),i}var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=e.trim();if(""===o)return[];var a=[],s=[];t.forEach(function(t){var e=0;Object.keys(t).forEach(function(r){if("string"==typeof t[r]||Array.isArray(t[r])){e+=n(t,r,o);var i=o.split(" ");i.length>1&&i.forEach(function(i){return e+=n(t,r,i)})}}),e>0&&s.push({score:e,item:t})}),s.sort(function(t,e){return t.score>e.score?-1:t.score<e.score?1:0});for(var u=0;u<s.length&&u!==i;u++)a.push(s[u].item);return a}}]),t}();t.exports=j}).call(e,n(1))},function(t,e,n){"use strict";function r(t){var e=t.auth,n=t.buildingId,r=t.venueId,o=t.customerId,a=t.templateId,s=t.width,u=t.height,l=t.host,c=t.container,h=t.forceCanvas,f=t.transparent,p=t.locale,d=t.showAllAmenities,y=void 0!==d&&d,v=t.showAllPathTypes,g=void 0!==v&&v,m=t.showAllImageMapLabels,b=void 0!==m&&m,_=t.showAllTextMapLabels,w=void 0!==_&&_,x=t.amenityOptions,T=void 0===x?{}:x,S=t.pathTypeOptions,E=void 0===S?{}:S,O=t.imageMapLabelOptions,M=void 0===O?{}:O,P=t.textMapLabelOptions,C=void 0===P?{}:P,A=t.mapLabelFont,k=t.parseAllMaps,I=void 0!==k&&k,R=t.autoReloadCache,j=void 0===R||R,D=t.clearCacheData,L=void 0!==D&&D,N=t.mapOptions,B=void 0===N?{}:N,F=t.showDefaultMap,U=void 0===F||F,W=t.showMapWithId,V=t.minScale,H=t.maxScale,z=t.panGestures,G=void 0===z||z,X=t.scaleGestures,q=void 0===X||X,Y=t.rotationGestures,J=void 0===Y||Y,K=t.mouseWheelScale,Z=void 0===K||K,Q=t.hiddenLayers,$=void 0===Q?[]:Q,tt=t.jsonStyle,et=t.applyDisplayMode,nt=void 0!==et&&et,rt=t.displayModeFont,it=t.userLocationOptions,ot=jmap.dispatcher;ot.on=ot.subscribe;var at={customerId:o,host:l,auth:e,autoReloadCache:j};return p&&(at.locale=p),a&&(at.templateId=a),ot.core=new jmap.core.JCore(at),L&&ot.core.clearAllCache(),ot.core.populateVenueByVenueId(r,function(t,e){if(t)return ot.publish("ready",[t]);ot.activeVenue=e;var r=n||e.buildings.getDefault().id;return ot.core.populateBuildingInVenue(e,r,function(t){if(t)return ot.publish("ready",[t]);var n=ot.control=new jmap.JController({activeVenue:e,width:s,height:u,container:c,forceCanvas:h,transparent:f});if(nt&&n.applyDisplayModeToAllUnits(rt),tt){var r="{}";"object"===(void 0===tt?"undefined":i(tt))&&(r=JSON.stringify(tt)),"string"==typeof tt&&(r=tt),n.loadJSONStyleConfiguration(r)}if(A&&n.setMapLabelFont(A),I&&n.parseAllMaps(),W){var o=n.activeVenue.maps.getById(W);o&&n.showMap(o,B)}else if(U){var a=n.activeVenue.buildings.getDefault().floors.getDefault().map;n.showMap(a,B)}return Array.isArray($)&&$.forEach(function(t){return n.hideLayer(t)}),y&&n.showAllAmenities(T),g&&n.showAllPathTypes(E),b&&n.showAllImageMapLabels(M),w&&n.showAllTextMapLabels(C),G||n.disablePanGestures(),q||n.disableScaleGestures(),J||n.disableRotationGestures(),Z||n.disableMouseWheelScale(),V&&(n.stage.minScale=V),H&&n.setMaxScale(H),it&&n.updateUserLocation(it),ot.publish("ready",[null])})}),ot}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=r},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(){i(this,t),this._handlers={}}return o(t,[{key:"subscribe",value:function(e,n){return!1===Array.isArray(this._handlers[e])&&(this._handlers[e]=[]),t.callable(n)&&this._handlers[e].push(n),this}},{key:"publish",value:function(e,n){var i=this._handlers[e];return Array.isArray(i)&&i.forEach(function(e){return t.callable(e)&&e.apply(void 0,r(n))}),this}},{key:"unsubscribe",value:function(e,n){var r=this._handlers[e];return Array.isArray(r)&&(t.callable(n)?this._handlers[e]=r.filter(function(e){var r=t.callable(n),i=n===e||e._onceListener===n;return r&&!i}):this._handlers[e].splice(-1,1)),this}},{key:"once",value:function(e,n){var r=this;if(t.callable(n)){var i=function t(){r.unsubscribe(e,t),n()};i._onceListener=n,this.subscribe(e,i)}return this}}],[{key:"callable",value:function(t){return"function"!=typeof t?(console.error(t+" is not a function"),null):t}}]),t}();e.default=a},function(t,e,n){"use strict";n(262),n(264),n(263)},function(t,e,n){var r,i,o;!function(n,a){i=[t],r=a,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)}(0,function(t){"use strict";var e={sortBySequence:function(t){t.sort(function(t,e){return t.sequence<e.sequence?-1:t.sequence>e.sequence?1:0})},addSingleOrCollection:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return t},i=[];if(t.constructor===e){var o=r(t);o||(o=t),n.push(o),i=n}else if(t.constructor===Array){var a=t.filter(function(t){return t&&t.constructor===e});a=a.map(function(t){var e=r(t);return e||t}),i=n.concat(a)}return i},getClosestNumberFromArray:function(t,e){var n=e[0];return e.forEach(function(e){Math.abs(t-e)<Math.abs(t-n)&&(n=e)}),n}};t.exports=e})},function(t,e,n){(function(n){var r,i,o;!function(n,a){i=[t],r=a,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)}(0,function(t){"use strict";var e={getDevicePixelRatio:function(){return n.devicePixelRatio||1},getBackingStoreRatio:function(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1},getDpiRatio:function(t){return this.getDevicePixelRatio/this.getBackingStoreRatio(t)},getPrefixedPropertyNames:function(){function t(t){for(var e=0;e<t.length;e++)if(void 0!==document.body.style[t[e]])return t[e];return null}var e=["transform","msTransform","webkitTransform","mozTransform","oTransform"],n=["transformOrigin","msTransformOrigin","webkitTransformOrigin","mozTransformOrigin","oTransformOrigin"];return{transform:t(e)||"",transformOrigin:t(n)||""}},userAgent:function(){var t="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",e=-1!==t.indexOf("firefox"),n=-1===t.indexOf("chrom");return{safari:-1!==t.indexOf("safari")&&n,chrome:n,firefox:e}},ios:function(){return!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)},getDimension:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"100%",e=arguments[1],n=arguments[2],r=0,i=e.parentElement;null===t&&(r=1),"string"==typeof t&&(r=/\d[\d|\.]+%/.exec(t)||0,r=parseFloat(r)/100);var o=i["client"+n];return o||"BODY"!==i.nodeName||(o=window["inner"+n]),r?o*r:t},getDimensions:function(t){var e=t.width,n=void 0===e?"100%":e,r=t.height,i=void 0===r?"100%":r,o=t.element;return{width:this.getDimension(n,o,"Width"),height:this.getDimension(i,o,"Height")}},throttle:function(t,e){var n=0;return function(){n<Date.now()&&(t.call(),n=Date.now()+e)}},debounce:function(t,e,n){var r=this,i=void 0;return function(){var o=r,a=[t,e],s=function(){i=null,n||t.apply(o,a)},u=n&&!i;clearTimeout(i),i=setTimeout(s,e),u&&t.apply(o,a)}},addResizeListener:function(t){this.throttleHandler=this.throttle(t,50),window.addEventListener("resize",this.throttleHandler),this.debounceHandler=this.debounce(t,250),window.addEventListener("resize",this.debounceHandler)},removeResizeListener:function(){window.removeEventListener("resize",this.throttleHandler),window.removeEventListener("resize",this.debounceHandler)},hasPercentageDimensions:function(t,e){return!!("string"==typeof t&&/\d[\d|\.]+%/.exec(t)||"string"==typeof e&&/\d[\d|\.]+%/.exec(e))}};t.exports=e})}).call(e,n(1))},function(t,e,n){var r,i,o;!function(a,s){i=[t,n(35)],r=s,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)}(0,function(t,e){"use strict";var n=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r={rotatePointAroundCenterPoint:function(t,e,n,r){var i=Math.sin(n),o=Math.cos(n);t[0]-=e[0],t[1]-=e[1];var a=t[0]*o-t[1]*i,s=t[0]*i+t[1]*o;return t[0]=a+e[0],t[1]=s+e[1],r?t.map(function(t){return+t.toFixed(r)}):t},scalePointsAroundCenterPoint:function(t,e,n){for(var r=(1-n)*e[0],i=(1-n)*e[1],o=[],a=0;a<t.length;a++){var s=t[a][0]*n+r,u=t[a][1]*n+i;o.push([s,u])}return o},coordinatesAtMedium:function(t,e,r){var i=n(t,2),o=i[0],a=i[1],s=[o,a-r],u=-this.getRadiansBetweenPoints(t,e);return this.rotatePointAroundCenterPoint(s,t,u)},getRadiansBetweenPoints:function(t,e){var r=n(t,2),i=r[0],o=r[1],a=n(e,2),s=a[0],u=a[1];return Math.atan2(i-s,o-u)},getDegreesBetweenPoints:function(t,n){return e.radiansToDegrees(this.getRadiansBetweenPoints(t,n))},pointInPolygon:function(t,e){for(var r=n(t,2),i=r[0],o=r[1],a=!1,s=0,u=e.length-1;s<e.length;u=s++){var l=[e[s][0],e[s][1],e[u][0],e[u][1]],c=l[0],h=l[1],f=l[2],p=l[3];h>o!=p>o&&i<(f-c)*(o-h)/(p-h)+c&&(a=!a)}return a},boundsToPoints:function(t,e){return e?[[t.left,t.top],[t.left+t.width,t.top],[t.left+t.width,t.top+t.height],[t.left,t.top+t.height]]:[[t.x,t.y],[t.x+t.width,t.y],[t.x+t.width,t.y+t.height],[t.x,t.y+t.height]]},getTopCornerFromPolygonPoints:function(t){var e=1/0,n=1/0;return t.forEach(function(t){e=Math.min(e,t[0]),n=Math.min(n,t[1])}),[e,n]},doLinesIntersect:function(t,e){var r=n(t,2),i=r[0],o=r[1],a=n(e,2),s=a[0],u=a[1],l=[o[0]-i[0],o[1]-i[1]],c=[u[0]-s[0],u[1]-s[1]],h=(-l[1]*(i[0]-s[0])+l[0]*(i[1]-s[1]))/(-c[0]*l[1]+l[0]*c[1]),f=(c[0]*(i[1]-s[1])-c[1]*(i[0]-s[0]))/(-c[0]*l[1]+l[0]*c[1]);return h>=0&&h<=1&&f>=0&&f<=1},getPointOfIntersection:function(t,e){var r=n(t,2),i=n(r[0],2),o=i[0],a=i[1],s=n(r[1],2),u=s[0],l=s[1],c=n(e,2),h=n(c[0],2),f=h[0],p=h[1],d=n(c[1],2),y=d[0],v=d[1],g=void 0,m=void 0,b=(v-p)*(u-o)-(y-f)*(l-a);if(0===b)return null;g=a-p,m=o-f;var _=(y-f)*g-(v-p)*m,w=(u-o)*g-(l-a)*m;return g=_/b,m=w/b,[o+g*(u-o),a+g*(l-a)]},getBoundingBoxFromPoints:function(t){for(var e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++){var a=t[o][0],s=t[o][1];e=Math.min(e,a),n=Math.max(n,a),r=Math.min(r,s),i=Math.max(i,s)}return{x:e,y:r,width:n-e,height:i-r}},movePoint:function(t,e,n){var r=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=[r[0]/i,r[1]/i];return[t[0]+o[0]*n,t[1]+o[1]*n]},shapeIsClosed:function(t){var e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]},getClosestPointOnLine:function(t,e){var n=void 0,r=1/0;if(e[1].x!==e[0].x){var i=(e[1].y-e[0].y)/(e[1].x-e[0].x),o=e[1].y-i*e[1].x;r=Math.abs(i*t.x+o-t.y)/Math.sqrt(i*i+1)}else r=Math.abs(t.x-e[1].x);var a=Math.pow(e[1].y-e[0].y,2)+Math.pow(e[1].x-e[0].x,2),s=Math.pow(e[1].y-t.y,2)+Math.pow(e[1].x-t.x,2),u=Math.pow(e[0].y-t.y,2)+Math.pow(e[0].x-t.x,2),l=Math.pow(r,2),c=s+u-(l+l);c>a&&(r=Math.sqrt(Math.min(s,u))),n=c>a?u<s?0:1:Math.sqrt(u-l)/Math.sqrt(a);var h=e[0].x-e[1].x,f=e[0].y-e[1].y;return{position:[e[0].x-h*n,e[0].y-f*n],dist:r}},getMovedPoint:function(t,n,r){if(r&&Array.isArray(t)&&"number"==typeof n&&"number"==typeof r){var i=e.degreesToRadians(n);return[t[0]-r*Math.sin(i),t[1]-r*Math.cos(i)]}return null},doBoundsIntersect:function(t,e){var n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return n>0&&r>0},isSegmentInCircle:function(t,n,r){if(r&&Array.isArray(t)&&Array.isArray(n)&&"Circle"===r.baseTypeName){if(r.containsPoint(t)||r.containsPoint(n))return!0;var i={x:r.point[0],y:r.point[1]},o=[{x:t[0],y:t[1]},{x:n[0],y:n[1]}],a=this.getClosestPointOnLine(i,o).position;return e.distanceBetweenPoints(i,a)<=r.radius}return null},segmentInPolygon:function(t,e){var n=this;if(e&&Array.isArray(t)&&"Polygon"===e.baseTypeName){var r=t.reduce(function(t,n){return!!e.containsPoint(n)||t},!1),i=e.points.reduce(function(r,i,o){var a=e.points[o+1]||e.points[0],s=[i,a];return!!n.doLinesIntersect(t,s)||r},!1);return r||i}return null}};r._getClosestPointOnLine=r.getClosestPointOnLine,t.exports=r})},function(t,e,n){var r,i,o;!function(a,s){i=[t,n(35)],r=s,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)}(0,function(t,e){"use strict";var n={_convertProjectionName:function(t){var e=t.replace(":","").replace("jmap","").toLowerCase();return e.charAt(0).toUpperCase()+e.slice(1)},convertCoordinate:function(t,e,n,r){if(Array.isArray(t)&&"string"==typeof e&&"string"==typeof n&&r){var i=this._convertProjectionName(e),o=this._convertProjectionName(n);if("function"==typeof this["convert"+i+"To"+o])return this["convert"+i+"To"+o](t,r);throw new ReferenceError("Invalid projection name specified")}return null},convertEpsg4326ToEpsg3857:function(t){var e=t.slice();return e[0]=t[0]*Math.PI/180*6378137,e[1]=6378137*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/180/2)),e},convertEpsg3857ToEpsg4326:function(t){var e=t.slice();e[0]=t[0]/Math.PI*180/6378137;var n=Math.pow(Math.E,t[1]/6378137);return e[1]=(Math.atan(n)-Math.PI/4)/Math.PI*180*2,e},convertEpsg4326ToLocal:function(t,e){return this.convertEpsg3857ToLocal(this.convertEpsg4326ToEpsg3857(t),e)},convertEpsg3857ToLocal:function(t,e){var n=this._generateConversionConstants(e),r=n.dimensions,i=n.topLeft,o=n.bottomRight;return t.map(function(t,e){return(t-i[e])/(o[e]-i[e])*r[e]})},convertLocalToEpsg4326:function(t,e){return this.convertEpsg3857ToEpsg4326(this.convertLocalToEpsg3857(t,e))},convertLocalToEpsg3857:function(t,n){var r=this._generateConversionConstants(n),i=r.dimensions,o=r.topLeft,a=r.bottomRight;return t.map(function(t,n){return e.lerp(o[n],a[n],t/i[n])})},_generateConversionConstants:function(t){var e=t.coordinates,n=e.topLeft.slice().reverse(),r=e.bottomRight.slice().reverse(),i=this.convertEpsg4326ToEpsg3857(n),o=this.convertEpsg4326ToEpsg3857(r);return{dimensions:[t.maps.getAll()[0].width,t.maps.getAll()[0].height],topLeft:i,bottomRight:o}},factor:function(t,e,n){return t.map(function(t,r){return t/(n[r]-e[r])})}};t.exports=n})},function(t,e,n){var r,i,o;!function(a,s){i=[t,n(141),n(142),n(143),n(35),n(144),n(59)],r=s,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)}(0,function(t,e,n,r,i,o,a){"use strict";var s={};Object.assign(s,e,n,r,i,o,a),t.exports=s})},function(t,e,n){"use strict";var r={Auth:n(147),JCore:n(149),BaseModel:n(7),BaseCollection:n(8),Amenity:n(60),AmenityCollection:n(61),Building:n(17),BuildingCollection:n(62),Destination:n(36),DestinationCollection:n(63),Floor:n(65),FloorCollection:n(66),Map:n(18),MapCollection:n(67),MapLabel:n(68),MapLabelCollection:n(69),Path:n(70),PathCollection:n(71),PathType:n(72),PathTypeCollection:n(73),Uri:n(74),UriCollection:n(14),Waypoint:n(26),WaypointCollection:n(77),BasicVenue:n(37),ActiveVenue:n(75),VenueCollection:n(76),Wayfinder:n(78),WayfinderData:n(79)};r.version="2.4.0",t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function t(e,n){r(this,t),this._=[e,n]};t.exports=i},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}t.exports={venue:function(t,e){var n=["buildings","destinations","amenities","pathTypes","mapLabels"];Object.keys(e).forEach(function(r){-1===n.indexOf(r)&&(t._[r]=e[r])}),t._.map=t.maps.create(e.map),n.forEach(function(n){if({}.hasOwnProperty.call(e,n)){var r=e[n].items;t[n].createBatch(r)}}),t.buildings.getAll().forEach(function(e){return e.venueId=t.id}),t._._populated=!0,t._updateWayfinder()},building:function(t,e,n){e.floors.defaultFloorId=n.defaultFloorId,e.floors.defaultFloorId||(e.floors.defaultFloorId=n.floors.items[0]?n.floors.items[0].id:null),e.floors.createBatch(n.floors.items),n.floors.items.forEach(function(n){e.floors.getById(n.id).map=t.maps.create(n.map)}),this.addWaypointsToComponents(t),e._._populated=!0,t._updateWayfinder()},addWaypointsToComponents:function(t){["destinations","amenities","pathTypes"].forEach(function(e){var n=t[e];n&&n.each(function(e){var n=e.locations;n&&(e._._mappedPoints=e._._mappedPoints||{},e.waypoints=e.waypoints||[],n.getAll().forEach(function(n){var i;if(!e._._mappedPoints[n.mapId]){var o=t.maps.getById(n.mapId);if(o){var a=n.waypointIds.map(function(t){return o.waypoints.getById(t)});(i=e.waypoints).push.apply(i,r(a)),e._._mappedPoints[n.mapId]=!0}}}))})})}}},function(t,e,n){"use strict";(function(e){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(76),a=n(151),s=n(37),u=n(75),l=n(155),c=n(154),h=n(148),f=n(64),p=n(156),d=n(153),y=new p("jcore"),v=!1,g=0,m=function(t){return"?v=4.9"+(t.locale?"&locale="+t.locale:"")+(t.geojson?"&geojson=true":"")},b=function(){function t(e){var n=e.host,i=e.customerId,s=e.auth,u=e.autoReloadCache,f=void 0===u||u,p=e.request,y=e.locale,g=e.geojson,m=e.templateId;r(this,t),v=f,this._autoReloadCache=f,this._request=l(p),this._post=c(p?p.post:null),this._cacheManager=null,this._locale=y,this._templateId=m,this.process=h,this.geojson=!!g,this.id=i,this.name=null,this.map=null,this.venues=new o,this.locales=new a,this.host=t.validateHost(n||"https://api.jibestream.com"),this._oa2=new d(this.host,this._post),this._oa2.setCredentials({client_id:s._[0],client_secret:s._[1]})}return i(t,[{key:"_getRequest",value:function(n,r,i){if(!this._oa2)return null;var o=Date.now(),a=y.read(n),s=v,u=!e.navigator||e.navigator.onLine,l={endpoint:n};if(a&&(!s||!u))return r(null,a);if(!u)throw new f.JCoreConnectionError("Jibestream :: No network connection & no cache");return t._dipatchRequestEvent("START",l),this._oa2.getAccessToken(function(e,s){if(e&&0===e.error)return r(new Error("Request was cancelled, nothing sent to Jibestream Server"));if(e&&401===e.error)return r(new f.JCoreAuthenticationError);var u=a&&v?{"If-Modified-Since":a.generatedAt}:{};return u.Authorization="Bearer "+s,i({url:n,headers:u},function(e,i,s){var u={},c=e;try{304===i.status||304===i.statusCode?u=a:c||(u=JSON.parse(s));if(Object.hasOwnProperty.call(u,"statusCode")){var h="Error resolving URL: "+n+" -> "+JSON.stringify(u);c=new f.JCoreConnectionError(h)}else y.write(n,u);g+=(Date.now()-o)/1e3}catch(e){c=new f.JCoreConnectionError("Could not parse response from: "+n+" - "+e),l.error=c.message,t._dipatchRequestEvent("FAILED",l)}finally{t._dipatchRequestEvent("SUCCESS",l),r(c,u)}})})}},{key:"clearAllCache",value:function(){return y.empty(),this}},{key:"clearCacheByVenueId",value:function(e){return y.delete(t.venueDataUrl(this,e)),this}},{key:"getLocales",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},r=t.localeUrl(this),i=function(t,r){t||0!==e.locales.getCount()||e.locales.createBatch(r.items),n(t,e.locales)};return this._getRequest(r,i,this._request)}},{key:"getTemplate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(e&&("number"==typeof e||"string"==typeof e)){var r=t.templateUrl(this,e),i=function(t,e){n(t,e)};return this._getRequest(r,i,this._request)}return n("Invalid templateId given",null)}},{key:"getAllTemplates",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=t.allTemplatesUrl(this),r=function(t,n){e(t,n)};return this._getRequest(n,r,this._request)}},{key:"getVenues",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=t.venueListUrl(this);r&&r.length&&(i+="&externalIds="+r.join());var a=function(t,r){t||0!==e.venues.getCount()?t||(e.venues=new o,e.venues.createBatch(r.venues.items)):(delete e.venues,e.venues=new o,e.venues.createBatch(r.venues.items)),n(t,e.venues)};return this._getRequest(i,a,this._request)}},{key:"getVenuesWithExternalIds",value:function(){return this.getVenues.apply(this,arguments)}},{key:"populateVenueWithDefaultBuilding",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return this.populateVenueByVenueId(t,function(t,r){if(t)return n(t,null);var i=r.buildings.getDefault()||{};return e.populateBuildingInVenue(r,i.id,function(t){return t?n(t,null):n(null,r)})})}},{key:"populateVenueByVenueId",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments[2],r=this.venues.getById(t);return r||(r=new s({id:t})),this.populateVenue(r,e,n)}},{key:"populateVenue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments[2],i=t;if(i.constructor!==s)throw new TypeError("Invalid Venue");return i._._populated?(console.warn("Venue "+i.id+" is already populated."),null):this._getVenueComponents(i.id,function(t,r){if(t)i=null;else{var o=new u(i.export());h.venue(o,r),i=o}var a=e._templateId||i.templateId;return i&&a?e.getTemplate(a,function(e,r){e||(i.template=r,n(t,i)),n(e,i)}):n(t,i)},r)}},{key:"populateBuildingInVenue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments[3];if(t.constructor!==u)throw new TypeError("Invalid ActiveVenue");var i=t.buildings.getById(e);if(!i)throw new ReferenceError("Building: ["+e+"] not found in ActiveVenue");return i._._populated?console.warn("Building "+i.id+" is already populated.")||null:this._getBuildingDetails(t.id,i.id,function(e,r){e||h.building(t,i,r),n(e,i)},r)}},{key:"populateVenueWithBuilding",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=this,i=arguments[3],o=arguments[4],a=0,s={},u=function(i,o,u){return i?n(i):(s[u]=o,a+=1,2===a&&r.populateVenueByVenueId(t,function(t,i){return t?n(t):r.populateBuildingInVenue(i,e,function(t){return t?n(t):n(null,i)},s.building)},s.venue),null)};this._getVenueComponents(t,function(t,e){return u(t,e,"venue")},i),this._getBuildingDetails(t,e,function(t,e){return u(t,e,"building")},o)}},{key:"_getVenueComponents",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments[2];if(r)return n(null,r);var i=t.venueDataUrl(this,e);return this._getRequest(i,n,this._request)}},{key:"_getBuildingDetails",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments[3];if(i)return r(null,i);var o=t.buildingDataUrl(this,e,n);return this._getRequest(o,r,this._request)}},{key:"get",value:function(e,n){var r=""+t.customerUrl(this)+e+m(this);return this._getRequest(r,n,this._request)}},{key:"locale",get:function(){return this._locale}}],[{key:"_dipatchRequestEvent",value:function(t,n){e.jmap&&e.jmap.dispatcher&&e.jmap.dispatcher.publish("JMAP_CORE_SERVER_REQUEST_"+t,[n])}},{key:"validateHost",value:function(t){if(!/^(?:\w+:)?\/\/([^\s\.]+\.\S{2}|localhost[:?\d]*)\S*$/.test(t))throw new f.JCoreIncompatibleHostError(t+" is not a valid url");return t}},{key:"getAccessToken",value:function(){return console.warn("JCore.getAccessToken is deprecated, use instance method instead. "),null}},{key:"getJACSVersion",value:function(){return"4.9"}},{key:"getTotalRequestTime",value:function(){return g}},{key:"customerUrl",value:function(t){return t.host+"/JACS/api/customer/"+t.id}},{key:"localeUrl",value:function(e){return t.customerUrl(e)+"/locale/full"+m(e)}},{key:"templateUrl",value:function(e,n){return t.customerUrl(e)+"/map-template/"+n+"/full"}},{key:"allTemplatesUrl",value:function(e){return t.customerUrl(e)+"/map-template/full"}},{key:"venueListUrl",value:function(e){return t.customerUrl(e)+"/full"+m(e)}},{key:"venueDataUrl",value:function(e,n){return t.customerUrl(e)+"/venue/"+n+"/full"+m(e)}},{key:"buildingDataUrl",value:function(e,n,r){return t.customerUrl(e)+"/venue/"+n+"/building/"+r+"/full"+m(e)}}]),t}();t.exports=b}).call(e,n(1))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(7),u=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"name",get:function(){return this.get("name",null)},set:function(t){this.set("name",t,String)}},{key:"localeCode",get:function(){return this.get("localeCode",null)},set:function(t){this.set("localeCode",t,Boolean)}}]),e}(s);t.exports=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(150),u=n(8),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s))}return o(e,t),a(e,[{key:"isLocale",value:function(t){return this.isCollectionItemType(t)}},{key:"getByName",value:function(t){return t&&t.constructor===String?this.filter(function(e){return e.name.toLowerCase()===t.toLowerCase()}):[]}}]),e}(u);t.exports=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),this._instances=(e.items||[]).filter(function(t){return t.mapId})}return i(t,[{key:"getAll",value:function(){return this._instances}},{key:"getByMapId",value:function(t){return this._instances.filter(function(e){return e.mapId===t})}},{key:"getLocationOnAllLevels",value:function(){return this._instances.filter(function(t){return t.allLevels})}}]),t}();t.exports=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){var e=void 0;try{e=JSON.parse(t)}catch(t){e={error:t}}return e}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e,n){r(this,t),this.post=n,this.api=e+"/JACS/api/auth/token",this.pool=[]}return o(t,[{key:"emptyPool",value:function(t,e){for(var n=this.pool.length;n--;)this.pool.shift()(t,e)}},{key:"getAccessToken",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return this.isExpired()?this._requestToken(t):t(null,this.accessToken)}},{key:"setCredentials",value:function(t){var e=t.client_id,n=t.client_secret;this.tokenRequestData={grant_type:"client_credentials",client_id:e,client_secret:n,scope:"sdk.read"},this.refreshTime=0,this.expiryTime=0}},{key:"_requestToken",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.pool.push(e);var n=this.tokenRequestData;if(!n)return this.emptyPool({error:"Please authenticate"});var r={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},o={url:this.api,headers:r,form:n};return this.poolCallbacks?null:(this.poolCallbacks=!0,this.post(o,function(e,n,r){t.poolCallbacks=!1;var o=i(r);return e||!o.access_token?t.emptyPool(e||"response did not return code"):(t.accessToken=o.access_token,t._setExpirationTime(o.expires_in),t.emptyPool(null,t.accessToken))}))}},{key:"_setExpirationTime",value:function(t){this.expiryTime=t,this.refreshTime=Date.now()}},{key:"isExpired",value:function(){return!this.refreshTime||!this.expiryTime||Date.now()-this.refreshTime>this.expiryTime}}]),t}();t.exports=a},function(t,e,n){"use strict";(function(e){function n(t){var e=function(e,n,r,i){return""+e+n+"="+encodeURIComponent(t[n])+(r===i.length-1?"":"&")};return Object.keys(t).reduce(e,"")}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.url,i=void 0===r?"":r,o=t.headers,a=void 0===o?{}:o,s=t.form,u=void 0===s?{}:s,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},c="application/x-www-form-urlencoded"===a["Content-Type"],h=new e.XMLHttpRequest;h.open("POST",i,!0),Object.keys(a).forEach(function(t){return h.setRequestHeader(t,a[t])}),h.onreadystatechange=function(){var t=4===h.readyState,e=200===h.status;t&&e?l(null,h,h.responseText):t&&!e&&l({error:h.status})};var f=u;c&&(f=n(u)),h.send(f)}t.exports=function(t){if(t)return t;if(!e.XMLHttpRequest)throw new Error("Need request module to get data from Jibestream server.");return r}}).call(e,n(1))},function(t,e,n){"use strict";(function(e){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.url,r=void 0===n?"":n,i=t.headers,o=void 0===i?{}:i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},s=new e.XMLHttpRequest;s.open("GET",r,!0),Object.keys(o).forEach(function(t){return s.setRequestHeader(t,o[t])}),s.onreadystatechange=function(){var t=4===s.readyState,e=200===s.status||304===s.status,n=null;if(t){if(!e){0===s.status?n="Error: Request was cancelled, nothing sent to Jibestream Server":(n="Error: Response status was [ "+s.status+" ] from Jibestream server.\n\n",n=n+"Request Url: "+r+"\n",n=n+"Request Headers: "+JSON.stringify(o)+"\n",n=n+"Response Text: "+s.responseText)}a(n,s,s.responseText)}},s.send()}t.exports=function(t){if(t)return t;if(!e.XMLHttpRequest)throw new Error("Need request module to get data from Jibestream server.");return n}}).call(e,n(1))},function(t,e,n){"use strict";(function(e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(r){n(this,t),this.prefix=r||"",t.isSupported()?this.storage=e.localStorage:this.storage={store:{},length:0,getItem:function(t){return this.store[t]},setItem:function(t,e){return this.length+=1,this.store[t]=e},removeItem:function(t){return this.length-=1,delete this.store[t]},clear:function(){this.length=0,this.store={}},key:function(t){return Object.keys(this.store)[t]}}}return r(t,[{key:"removePrefix",value:function(t){return t.substring(this.prefix.length+1,t.length)}},{key:"forEach",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if("function"!=typeof t)throw new TypeError("Storage :: forEach requires an iterator callback function.");for(var r=this.getLength(),i=[],o=0;o<r;o++)i.push(this.removePrefix(this.storage.key(o)));for(var a=0;a<r;a++){var s=i[a],u=this.read(s);t.apply(e||this,[s,u,a])}return n(),this}},{key:"getLength",value:function(){return this.storage.length}},{key:"empty",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=function(e){return t.delete(e)};return this.forEach(n,this,e)}},{key:"emptyAll",value:function(){return this.storage.clear()}},{key:"delete",value:function(t){return this.storage.removeItem(this.prefix+"-"+t)}},{key:"write",value:function(e,n){try{return this.storage.setItem(this.prefix+"-"+e,t.serialize(n))}catch(t){return this.empty(),null}}},{key:"read",value:function(e){var n=this.storage.getItem(this.prefix+"-"+e);return n?t.deserialize(n):null}}],[{key:"isSupported",value:function(){try{return"localStorage"in e&&e.localStorage}catch(t){return!1}}},{key:"serialize",value:function(t){try{return JSON.stringify(t)}catch(t){throw new TypeError("Storage :: Expected JSON stringifyable argument",t)}}},{key:"deserialize",value:function(t){try{return JSON.parse(t)}catch(t){throw new TypeError("Storage :: Expected JSON parsable argument",t)}}}]),t}();t.exports=i}).call(e,n(1))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){r(this,t),this.content=[],this.scoreFunction=e}return i(t,[{key:"push",value:function(t){this.content.push(t),this.sinkDown(this.content.length-1)}},{key:"pop",value:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t}},{key:"remove",value:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))}},{key:"size",value:function(){return this.content.length}},{key:"rescoreElement",value:function(t){this.sinkDown(this.content.indexOf(t))}},{key:"sinkDown",value:function(t){for(var e=this.content[t],n=t;n>0;){var r=(n+1>>1)-1,i=this.content[r];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[r]=e,this.content[n]=i,n=r}}},{key:"bubbleUp",value:function(t){for(var e=t,n=this.content.length,r=this.content[e],i=this.scoreFunction(r);;){var o=e+1<<1,a=o-1,s=null,u=void 0;if(a<n){var l=this.content[a];u=this.scoreFunction(l),u<i&&(s=a)}if(o<n){var c=this.content[o];this.scoreFunction(c)<(null===s?i:u)&&(s=o)}if(null===s)break;this.content[e]=this.content[s],this.content[s]=r,e=s}}}]),t}();t.exports=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function t(e){var n=e.id,i=e.nodeIds,o=e.type,a=e.cost,s=e.acc,u=e.speed,l=e.direction;r(this,t),this.id=n,this.nodes=i,this.type=o,this.cost=a,this.acc=s,this.speed=u,this.direction=l};t.exports=i},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(160),s=n(158),u=function(){function t(e,n,o,s,u){var l,c=this;i(this,t);var h={verticalScale:100};this.buildings=u,this.floors=(l=[]).concat.apply(l,r(u.map(function(t){return t.floors.getAll()}))),this.waypoints=e,this.paths=n,this.pathTypes=o,this.maps=s,this.verticalScale=h.verticalScale,this.moverTypes=[],this.nodes=[],this.edges=[],this.pathWaypointMap=n.reduce(function(t,e){return e.waypointIds.forEach(function(n){t[n]?t[n].push(e):t[n]=[e]}),t},{}),this.pathTypesMap=o.reduce(function(t,e){return t[e.id]=e,t},{}),this.mapIdToFloors=this.floors.reduce(function(t,e){return t[e.map.id]=e,t},{}),this.waypointHash={},this.waypoints.forEach(function(t){c.waypointHash[t.id]=t,t._.xyz={x:t.coordinates[0],y:t.coordinates[1],z:c.getMapZValue(t.mapId)}}),this.setFloorPreferenceMultiplier(),this.nodeHash={};for(var f=0;f<e.length;f++){var p=this.generateEdges(e[f].id),d=this.generateNeighbors(e[f],p),y=new a({id:e[f].id,x:e[f].coordinates[0],y:e[f].coordinates[1],z:this.getMapZValue(this.waypoints[f].mapId),decisionPoint:this.waypoints[f].decisionPoint,mapId:this.waypoints[f].mapId,edges:p,neighbors:d});this.nodeHash[y.id]=y,this.nodes.push(y)}for(var v=0;v<this.pathTypes.length;v++)1!==this.pathTypes[v].pathTypeId&&this.moverTypes.push({moverId:this.pathTypes[v].id,speed:this.pathTypes[v].verticalWeight,maxFloors:this.pathTypes[v].maxfloors,accessiblity:this.pathTypes[v].accessibility,typeName:this.pathTypes[v].name,svg:this.pathTypes[v].svg})}return o(t,[{key:"getPathsWithWaypoint",value:function(t){return this.pathWaypointMap[t]}},{key:"getPathTypeById",value:function(t){for(var e=0;e<this.pathTypes.length;e++)if(this.pathTypes[e].id===t)return this.pathTypes[e];return null}},{key:"getWaypointById",value:function(t){return this.waypointHash[t]||null}},{key:"generateEdges",value:function(t){var e=this;return(this.getPathsWithWaypoint(t)||[]).reduce(function(t,n){if(n.status){var r=e.pathTypesMap[n.pathTypeId];if(r){var i=new s({id:n.id,nodeIds:n.waypointIds,type:n.pathTypeId,cost:r.weight,acc:r.accessibility,speed:r.verticalWeight,direction:n.direction});t.push(i)}}return t},[])}},{key:"generateNeighbors",value:function(e,n){var r=this,i=Date.now(),o=e._.xyz,a=n.reduce(function(n,i){return i.nodes.forEach(function(a){if(a!==e.id){var s=r.getWaypointById(a),u=s._.xyz,l=t.heuristic(u,o),c=1;if(o.z===u.z)c=r.getFloorPreferenceMultiplier(s.mapId);else if(0!==i.direction){if(1===i.direction&&o.z>u.z)return;if(2===i.direction&&o.z<u.z)return}1!==i.type&&(l=1);var h=Math.abs(u.z-o.z)/(i.speed+1);h=isNaN(h)?0:h;var f=l*i.cost*c,p=f*(h+1),d={id:s.id,cost:p,acc:i.acc,edgeId:i.id,edgeTypeId:i.type,distance:l,x:u.x,y:u.y,z:u.z};n.push(d)}}),n},[]);return void 0===this.timer&&(this.timer=0),this.timer+=(Date.now()-i)/1e3,a}},{key:"setFloorPreferenceMultiplier",value:function(){var t=this;this.floorPreferenceMultipliers=this.maps.reduce(function(e,n){var r=1,i=t.getFloorByMapId(n.id),o=i?i.preference:0;return 0===o?r=1:o>0?r/=o+1:o<0&&(r*=Math.abs(o)+1),e[n.id]=r,e},{})}},{key:"getFloorPreferenceMultiplier",value:function(t){return this.floorPreferenceMultipliers[t]}},{key:"getMapZValue",value:function(t){return this.getFloorByMapId(t).level*this.verticalScale}},{key:"getFloorByMapId",value:function(t){return this.mapIdToFloors[t]}}],[{key:"heuristic",value:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2))}}]),t}();t.exports=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function t(e){var n=e.id,i=e.x,o=e.y,a=e.z,s=e.decisionPoint,u=e.mapId,l=e.edges,c=e.neighbors;r(this,t),this.id=n,this.x=i,this.y=o,this.z=a,this.decisionPoint=s,this.mapId=u,this.edges=l,this.f=0,this.g=0,this.h=0,this.visited=!1,this.closed=!1,this.parent=null,this.neighbors=c,this.usedEdgeTypeId=null};t.exports=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(157),a=n(159),s=n(79),u=function(){function t(e,n,i,o,s){r(this,t),this.grid=new a(e,n,i,o,s)}return i(t,[{key:"search",value:function(e,n,r){this.cleanGrid();var i=this.getNodeById(e),o=this.getNodeById(n),a=t.getHeap();for(i.h=0,a.push(i);a.size()>0;){var s=a.pop();if(s===o)return this.pathTo(s,i);s.closed=!0;for(var u=t.getNeighbors(s),l=0,c=u.length;l<c;++l){var h=u[l],f=this.getNeighborNodeObject(h.id);if(!(h.acc>r)){if(!f.closed){var p=s.g+t.getNeighborCost(h),d=f.visited;(!d||p+0<f.f)&&(f.visited=!0,f.parent=s,f.h=0,f.g=p,f.f=f.g+0,f.usedEdgeTypeId=h.edgeTypeId,d?a.rescoreElement(f):a.push(f))}}}}return[]}},{key:"cleanGrid",value:function(){for(var e=0;e<this.grid.nodes.length;e++)t.cleanNode(this.grid.nodes[e])}},{key:"getNodeById",value:function(t){for(var e=0;e<this.grid.nodes.length;e++)if(t===this.grid.nodes[e].id)return this.grid.nodes[e];return null}},{key:"pathTo",value:function(t,e){for(var n=t,r=[];n.parent;)r.push(n),n=n.parent;r.push(e),r=r.reverse();for(var i=[],o=[],a=-1,u=0;u<r.length;u++){if(0===u&&(a=r[u].mapId),r[u].mapId!==a){var l=new s({seq:r[u-1].z/this.grid.verticalScale,mapId:a,mover:this.getPathTypeById(r[u].usedEdgeTypeId),points:o.slice(0),cost:r[u].f});i.push(l),o=[],a=r[u].mapId}if(o.push(r[u]),u===r.length-1){var c=new s({seq:r[u].z/this.grid.verticalScale,mapId:a,mover:this.getPathTypeById(r[u].usedEdgeTypeId),points:o,cost:r[u].f});i.push(c)}}return i}},{key:"getNeighborNodeObject",value:function(t){for(var e=0;e<this.grid.nodes.length;e++)if(t===this.grid.nodes[e].id)return this.grid.nodes[e];return null}},{key:"getPathTypeById",value:function(t){for(var e=0;e<this.grid.moverTypes.length;e++)if(this.grid.moverTypes[e].moverId===t)return this.grid.moverTypes[e];return null}}],[{key:"getNeighborCost",value:function(t){return t.cost}},{key:"getNeighbors",value:function(t){return t.neighbors}},{key:"heuristic",value:function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)+Math.abs(t.z-e.z)}},{key:"cleanNode",value:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null,t.usedEdgeTypeId=null}},{key:"getHeap",value:function(){return new o(function(t){return t.f})}}]),t}();t.exports=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),n(20);var i=n(27),o=r(i),a=n(81),s=r(a),u=n(85),l=r(u),c=n(39),h=r(c),f=n(19),p=r(f),d=n(80),y=r(d),v=n(38),g=r(v),m=n(163),b=r(m),_=n(164),w=r(_),x=n(83),T=r(x),S=n(82),E=r(S),O=n(6),M=r(O);e.default=Object.assign({MapLayer:o.default,MapView:s.default,Stage:l.default,Text:h.default,Image:p.default,Icon:y.default,shape:{Circle:g.default,Ellipse:b.default,Line:w.default,Polygon:T.default},MovingObject:E.default,util:M.default})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(15),l=r(u),c=n(6),h=r(c),f="Ellipse",p=function(t){function e(t){var n=t.id,r=t.point,a=t.width,s=t.height,u=t.fill,c=t.opacity,p=t.stroke,d=t.strokeWidth,y=t.strokeOpacity;i(this,e);var v=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{id:n,fill:u,opacity:c,stroke:p,strokeWidth:d,strokeOpacity:y}));return v.constructor=l.default,v.baseTypeName=f,v.point=r,v.width=h.default.validate(a,Number,0),v.height=h.default.validate(s,Number,0),v}return a(e,t),s(e,[{key:"containsPoint",value:function(t){if(this.width<=0||this.height<=0)return!1;var e=(t[0]-this.point[0])/this.width,n=(t[1]-this.point[1])/this.height;return e*=e,n*=n,e+n<=1}},{key:"draw",value:function(){this.graphic.drawEllipse(0,0,this.width,this.height)}},{key:"point",set:function(t){this._point=this.localPosition=t},get:function(){return this._point}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(53),c=r(l),h=n(15),f=r(h),p=n(6),d=r(p),y=n(11),v=r(y),g="Line",m=function(t){function e(t){var n=t.id,r=t.fill,a=void 0===r?null:r,s=t.opacity,u=t.closed,l=t.data,c=t.stroke,h=t.strokeWidth,p=t.strokeOpacity;i(this,e);var y=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{id:n,fill:a,opacity:s,stroke:c,strokeWidth:h,strokeOpacity:p}));return y.closed=!!u,y.constructor=f.default,y.baseTypeName=g,y.data=d.default.validate(l,Array,[],[g,"data"]),y._setLengthAndPointMap(),y}return a(e,t),u(e,[{key:"_setLengthAndPointMap",value:function(){var t=this;this._length=0,this._pointMap={};var e=void 0;this.data[0].forEach(function(n,r,i){if(e=i[r+1]){var o=d.default.distanceBetweenPoints(n,e);t._length+=o,r||(t._pointMap[0]=n),t._pointMap[t._length]=e}else t._pointMap[t._length]=n})}},{key:"_getPointsDataBetweenLength",value:function(t){var e=Object.keys(this.pointMap).map(Number),n=d.default.getClosestNumberFromArray(t,e),r=0,i=e.indexOf(n);r=n>t?e[i-1]:e[i+1]||e[i-1];var o=n,a=r;if(o>a){var s=[a,o];o=s[0],a=s[1]}return{section:[this.pointMap[o],this.pointMap[a]],medium:t-o}}},{key:"animate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(this.animation&&this.animation.kill&&this.animation.kill(),!this.graphic)return null;var i=this.localPosition,o=function(t){var n=e.length*t;e.graphic.clear(),e.graphic.lineStyle(e.getStrokeWidth(),e.getStroke(),e.getStrokeOpacity());var r=e.getLocalLineDataToLength(n),o=e.localData[0][0];e.graphic.moveTo(o[0],o[1]),r.forEach(function(t,n){var r=s(t,2),o=r[0],a=r[1];n&&e.graphic.lineTo(o-i[0],a-i[1])})},a={value:0};return this.animation=c.default.to(a,1e3*t,{value:1,onUpdate:function(){v.default.emit("REQUEST_RENDER"),o(a.value)},onComplete:function(){e.animation=null,r()},ease:n}),this.animation}},{key:"getLocalLineDataToLength",value:function(t){var e=this.getPointDataAtLength(t),n=e.point,r=e.section,i=this.data[0].indexOf(r[1]),o=this.data[0].slice(0,i);return o.push(n),o}},{key:"getPointDataAtLength",value:function(t){for(var e=this._getPointsDataBetweenLength(t),n=e.section,r=e.medium,i=n[0],o=n[1],a=d.default.coordinatesAtMedium(i,o,r),s=180*d.default.getRadiansBetweenPoints(i,o)/Math.PI;s<-180;)s+=360;for(;s>180;)s-=360;return s=-s,{point:a,angle:s,section:n,medium:r}}},{key:"getPath",value:function(t){for(var e=t||10,n=[],r=0;r<this.length;r+=e){var i=this.getPointDataAtLength(r),o=i.point,a=i.angle,s=i.section,u=i.medium;n.push({point:o,angle:a,section:s,medium:u,position:r,totalLength:this.length})}return n}},{key:"generalizePath",value:function(t){var e=this,n=[];n=t.constructor===Array?[].concat.apply([],t.map(function(t){return t.getShapes()})):t.getShapes(),n=n.filter(function(t){return t.isWithinBounds(e.bounds)});for(var r=this.data[0],i=r[0],o=r[r.length-1],a=[],s=0;s<r.length;s++)!function(t){var e=r[t],i=r.slice();i.splice(0,t);var o=[];i.forEach(function(t){var r=[e,t];n.find(function(t){return t.getIntersectingSegments(r).length>1})||o.push(r)}),o.length&&a.push(o)}(s);var u=o,l=[o];do{u=function(t){for(var e=[0,0],n=0;n<a.length&&!(e=a[n].find(function(e){return e[1]===t}));n++);return e}(u)[0],l.unshift(u)}while(u!==i);this.nonGeneralizedData=this.data,this.data[0]=l,this.data=this.data,this.updateGraphic()}},{key:"getSegmentsFromShape",value:function(){return this.data[0].map(function(t,e,n){var r=n[e+1];return r?[t,r]:[t,n[0]]})}},{key:"containsPoint",value:function(t){return d.default.pointInPolygon(t,this.data[0])}},{key:"draw",value:function(){var t=this;this.localData.forEach(function(e,n){e.forEach(function(e,n){n?t.graphic.lineTo(e[0],e[1]):t.graphic.moveTo(e[0],e[1])}),0===n&&d.default.shapeIsClosed(e)?t.graphic.closePath():n>0&&t.graphic.addHole()})}},{key:"data",get:function(){return this._data},set:function(t){var e=this;this._data=d.default.validate(t,Array,[],[g,"data"]),this.bounds=d.default.getBoundingBoxFromPoints(this._data[0]);var n=this.bounds,r=n.x,i=n.y;this.localPosition=[r,i],this.localData=this._data.map(function(t){return f.default.makeLocalPoints(e.localPosition,t)})}},{key:"length",get:function(){return this._length||0}},{key:"pointMap",get:function(){return this._pointMap||{}}}],[{key:"createFromWaypoints",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.waypoints,r={};t.data=[n.map(function(t){return r[t.coordinates]=t,t.coordinates})];var i=new e(t);return i.wpHash=r,i}},{key:"getWaypointsFromLine",value:function(t){return t.wpHash?t.data[0].map(function(e){return t.wpHash[e]}):null}}]),e}(f.default);e.default=m},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){r(this,t),this.q=[],this.ticker=e,this.ticker.add(this.loop,this),this.running=!0}return i(t,[{key:"loop",value:function(t){for(var e=this.q.length;e--;)this.q.shift()(t)}},{key:"onNextTick",value:function(t){this.q.push(t)}},{key:"onAllTicks",value:function(t){this.ticker.add(t)}},{key:"start",value:function(){this.running||this.ticker.start(),this.running=!0}},{key:"stop",value:function(){this.running&&this.ticker.stop(),this.running=!1}},{key:"update",value:function(){this.ticker.update()}}]),t}();e.default=o},function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(53),s=r(a),u=n(176),l=r(u),c=n(6),h=r(c),f=h.default.userAgent(),p=f.firefox,d=f.safari,y=h.default.getDevicePixelRatio(),v=function(){function e(t){i(this,e),this.stage=t,this.mouseWheelEvents=["wheel","mousewheel"],this.panningEvents=["panstart","panmove","panleft","panright","panup","pandown"],this.panEndEvents=["panend","pancancel"],this.pinchEvents=["pinchstart","pinchmove","pinchin","pinchout"],this.pinchEndEvents=["pinchend","pinchcancel"],this.rotateEvents=["rotatestart","rotatemove"],this.rotateEndEvents=["rotateend","rotatecancel"],this.stage.view.addEventListener("touchstart",function(t){t.stopPropagation(),t.preventDefault()}),this.stage.view.addEventListener("touchmove",function(t){t.preventDefault()}),this.oldPanDelta=[0,0],this.panData={},this.activeEvents=[],this.dragVelocity=!0,this.setup()}return o(e,[{key:"setup",value:function(){var t=this;this.initialized||(this.view=new l.default.Manager(this.stage.view),this.initialized=!0),this.view.on("hammer.input",function(e){e.isFirst?(t.cancelPan(),t.startingScale=t.stage.currentMapView.getScale(),t.startingDistace=e.distance,t.stage.engine.start()):e.isFinal&&t.stage.engine.stop()})}},{key:"addTap",value:function(){var t=new l.default.Tap({event:"singletap"}),e=new l.default.Tap({event:"doubletap",taps:2});return this.view.add([e,t]),e.recognizeWith(t),t.requireFailure([e]),this.tapHandlers=[],this.doubleTapHandlers=[],this.view.on("singletap",this.tapHandler.bind(this)),this.view.on("doubletap",this.doubleTapHandler.bind(this)),this}},{key:"addTapHandler",value:function(t){t&&t.constructor===Function&&this.tapHandlers.push(t)}},{key:"addDoubleTapHandler",value:function(t){t&&t.constructor===Function&&this.doubleTapHandlers.push(t)}},{key:"removeDoubleTapHandler",value:function(t){this.doubleTapHandlers=this.doubleTapHandlers.filter(function(e){return e!==t})}},{key:"tapHandler",value:function(t){return this.tapHandlers.forEach(function(e){return e(t)}),this.stage.engine.stop(),this}},{key:"doubleTapHandler",value:function(t){return this.doubleTapHandlers.forEach(function(e){return e(t)}),this.stage.engine.stop(),this}},{key:"addDragPan",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onComplete,n=void 0===e?function(){}:e,r={threshold:10,pointers:0},i=new l.default.Pan(r);this.addActiveEvent(i);var o=this.panningEvents.concat(this.panEndEvents).join(" ");return this.dragOnComplete=n,this.view.on(o,this.dragPanHandler.bind(this)),this}},{key:"addMapRotation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.threshold,n=void 0===e?7:e,r=t.onComplete,i=void 0===r?function(){}:r,o={threshold:n},a=new l.default.Rotate(o);this.addActiveEvent(a),this.rotateOnComplete=i,this.rotationData={oldRotation:0};var s=this.rotateEvents.concat(this.rotateEndEvents).join(" ");return this.view.on(s,this.rotateHandler.bind(this)),this}},{key:"getActiveEvents",value:function(){return[this.view.get("pan"),this.view.get("pinch"),this.view.get("rotate")].filter(function(t){return t})}},{key:"addActiveEvent",value:function(t){this.view.add(t).recognizeWith(this.getActiveEvents())}},{key:"addPinchZoom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sensitivity,n=void 0===e?1:e,r=t.onComplete,i=void 0===r?function(){}:r;this.scaleSensitivity=n;var o={threshold:0},a=new l.default.Pinch(o);this.addActiveEvent(a),this.pinchOnComplete=i,this.pinchData={oldScale:0};var s=this.pinchEvents.concat(this.pinchEndEvents).join(" ");return this.view.on(s,this.pinchZoomHandler.bind(this)),this}},{key:"addMouseWheelZoom",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.onComplete,i=void 0===r?function(){}:r;return this.removeMouseWheelZoom(),this.mouseWheelData={eventCompleteTest:null,boundHandler:this.mouseWheelHandler.bind(this),onComplete:function(){var n=e.mouseWheelData;t.clearInterval(n.eventCompleteTest),n.eventCompleteTest=t.setInterval(function(){(t.performance||Date).now()-n.timeStamp>100&&(t.clearInterval(n.eventCompleteTest),"function"==typeof i&&i(),e.stage.engine.stop())},100)},zoom:function(t){if(0!==t){e.stage.engine.start();var n=e.mouseWheelData,r=2/(1+Math.exp(-Math.abs(t/100)));t<0&&0!==r&&(r=1/r);var i=e.stage.currentMapView;if(!i.resetTriggered){var o=i.getScale(),a=o*r,u="wheel"===n.type?200:0;if(0===u)i.setScaleFromViewPortPoint(a,n.position),n.onComplete();else{var l={scale:o};s.default.to(l,u,{scale:a,onUpdate:function(){return i.setScaleFromViewPortPoint(l.scale,n.position)},onComplete:n.onComplete})}}}},onTimeout:function(){var t=e.mouseWheelData;t.type="wheel",t.zoom(-t.lastValue)}},this.mouseWheelEvents.forEach(function(t){e.stage.view.addEventListener(t,e.mouseWheelData.boundHandler,!0)}),this}},{key:"mouseWheelHandler",value:function(e){e.preventDefault();var n=void 0;"wheel"===e.type?(n=e.deltaY,p&&e.deltaMode===t.WheelEvent.DOM_DELTA_PIXEL&&(n/=y),e.deltaMode===t.WheelEvent.DOM_DELTA_LINE&&(n*=40)):"mousewheel"===e.type&&(n=-e.wheelDeltaY,d&&(n/=3));var r=this.mouseWheelData,i=(t.performance||Date).now(),o=i-(r.time||0);r.timeStamp=i;var a=this.stage.getClientRect();if(r.position=[e.clientX-a.left,e.clientY-a.top],r.time=i,0!==n&&n%4.000244140625==0)r.type="wheel",n=Math.floor(n/4);else if(0!==n&&Math.abs(n)<4)r.type="trackpad";else if(o>400)r.type=null,r.lastValue=n,r.timeout=setTimeout(r.onTimeout,40);else if(!r.type){var s=Math.abs(o*n);r.type=s<200&&0!==s?"trackpad":"wheel",r.timeout&&(clearTimeout(r.timeout),r.timeout=null,n+=r.lastValue)}e.shiftKey&&n&&(n/=4),this.mouseWheelData.type&&this.mouseWheelData.zoom(-n)}},{key:"removeDragPan",value:function(){var t=this.panningEvents.concat(this.panEndEvents).join(" ");return this.view.off(t),this}},{key:"removeMapRotation",value:function(){var t=this.rotateEvents.concat(this.rotateEndEvents).join(" ");return this.view.off(t),this}},{key:"removePinchZoom",value:function(){var t=this.pinchEvents.concat(this.pinchEndEvents).join(" ");return this.view.off(t),this}},{key:"removeMouseWheelZoom",value:function(){var t=this;return this.mouseWheelData?(this.mouseWheelEvents.forEach(function(e){t.stage.view.removeEventListener(e,t.mouseWheelData.boundHandler,!0)}),this):this}},{key:"dragPanHandler",value:function(t){var e=-1!==this.panEndEvents.indexOf(t.type);this.panDelta([t.deltaX,t.deltaY]),e&&this.dragVelocity&&(this.stage.engine.start(),this.handlePanVelocity([t.velocityX,t.velocityY,t.velocity]))}},{key:"rotateHandler",value:function(t){var e=this.rotateEndEvents.includes(t.type);if(this.rotationData.oldRotation){var n=this.stage.currentMapView,r=this.stage.getClientRect(),i=[t.center.x-r.left,t.center.y-r.top],o=t.rotation-this.rotationData.oldRotation,a=n.getRotation()+o;n.setRotationFromViewPortPoint(a,i)}e?(this.rotateOnComplete(),this.rotationData.oldRotation=0,this.stage.engine.stop()):this.rotationData.oldRotation=t.rotation}},{key:"pinchZoomHandler",value:function(t){var e=this.pinchEndEvents.includes(t.type),n=this.stage.currentMapView,r=0;if(this.pinchData.oldScale&&2===t.pointers.length){var i=this.stage.getClientRect(),o=[t.center.x-i.left,t.center.y-i.top];r=h.default.distanceBetweenPoints([t.pointers[0].clientX,t.pointers[0].clientY],[t.pointers[1].clientX,t.pointers[1].clientY]);var a=n.getScale();if(this.pinchData.oldDistance){var s=r-this.pinchData.oldDistance;s&&(a+=a*s/r,n.setScaleFromViewPortPoint(a,o))}}e?(this.pinchData.oldScale=0,this.pinchData.oldDistance=0,this.pinchOnComplete(),this.stage.engine.stop()):(this.pinchData.oldScale=t.scale,this.pinchData.oldDistance=r)}},{key:"panDelta",value:function(t){var e=this.stage.currentMapView,n=e.getPosition(),r=[t[0]-this.oldPanDelta[0],t[1]-this.oldPanDelta[1]],i=r[0]<100&&r[0]>-100,o=r[1]<100&&r[1]>-100;i&&o&&e.setPosition([n[0]+=r[0],n[1]+=r[1]]),this.oldPanDelta=t}},{key:"handlePanVelocity",value:function(t){this.panData.velocity=t,this.panData.amplitude=[.8*this.panData.velocity[0],.8*this.panData.velocity[1]],this.panData.target=[Math.round(this.oldPanDelta[0]+this.panData.amplitude[0]),Math.round(this.oldPanDelta[1]+this.panData.amplitude[0])],this.panData.timestamp=Date.now(),this.stage.engine.onNextTick(this.autoPan.bind(this))}},{key:"autoPan",value:function(){var t=void 0,e=void 0;return this.stage.currentMapView.isWithinBounds()?(this.panData.amplitude&&(t=Date.now()-this.panData.timestamp,e=[-this.panData.amplitude[0]*Math.exp(-t/325),-this.panData.amplitude[1]*Math.exp(-t/325)],e[0]>.05||e[0]<-.05||e[1]>.05||e[1]<-.05?(this.panDelta([325*(this.panData.target[0]+e[0]),325*(this.panData.target[1]+e[1])]),this.stage.engine.onNextTick(this.autoPan.bind(this))):(this.oldPanDelta=[0,0],this.stage.currentMapView.roundPosition(),this.stage.engine.stop())),this):(this.stage.engine.stop(),this.cancelPan())}},{key:"cancelPan",value:function(){this.oldPanDelta=[0,0],this.panData.amplitude=null}}]),e}();e.default=v}).call(e,n(1))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(20),s=r(a),u=n(19),l=r(u),c=n(39),h=r(c),f=n(15),p=r(f),d=n(27),y=r(d),v=n(6),g=r(v),m=n(40),b=r(m),_=function(){function t(e){i(this,t),this.stage=e}return o(t,[{key:"renderIcon",value:function(t,e){t.container&&e.removeChild(t.container),t.container=new s.default.Container,t.container.pivot.set(t.width/2,t.height/2),t.hidden||!t.visible?t.container.alpha=0:t.container.alpha=1,t.container.rotation=g.default.degreesToRadians(g.default.validate(t.rotation,Number,0)),this.renderImage(t.image,t.container),t.updateIconTransform(),e.addChild(t.container)}},{key:"renderMovingObject",value:function(t,e){this.renderShape(t.confidence,t.container),t.confidence.graphic.scale.set(t._confidencePercent),this.renderShape(t.pulse,t.container),t.pulse.graphic.scale.set(0),t.icon.constructor===l.default?this.renderImage(t.icon,t.container):this.renderShape(t.icon,t.container),t.updateMovingObjectTransform(),e.addChild(t.container)}},{key:"renderShape",value:function(t,e){return t.constructor!==p.default?this:(t.graphic&&e.removeChild(t.graphic),t.graphic=new s.default.Graphics,t.updateGraphic(),e.addChild(t.graphic),this)}},{key:"renderText",value:function(t,e){return this._renderSprite(t,"Text",e)}},{key:"renderImage",value:function(t,e){return this._renderSprite(t,"Image",e)}},{key:"_renderSprite",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.stage.currentMapView.container;if(t.sprite&&n.removeChild(t.sprite),"Text"===e){if(t.constructor!==h.default)return this;var r=t.style.fontFamily?t.style.fontFamily.toLowerCase():null,i=Object.keys(s.default.extras.BitmapText.fonts).find(function(t){return t.toLowerCase()===r});i&&t.useBitmapFont?(t.sprite=new s.default.extras.BitmapText(t.text,{font:{name:i,size:t.style.fontSize},align:t.style.align,tint:"0x"+t.style._fill.toString(16)}),t.sprite.rotation=t.rotation):t.sprite=new s.default.Text(t.text,t.style)}else if("Image"===e){if(t.constructor!==l.default)return this;t.sprite=new s.default.Sprite(t.texture)}return t.updateSprite(),n.addChild(t.sprite),this}},{key:"renderLayer",value:function(t,e){var n=this;return t.constructor!==y.default?this:((0,b.default)(t.shapes,function(t){return n.renderShape(t,e)},function(){n.renderSpritesInLayer(t,e)},100),this)}},{key:"renderSpritesInLayer",value:function(t,e){var n=this;t.texts.forEach(function(t){return n.renderText(t,e)}),t.images.forEach(function(t){return n.renderImage(t,e)}),t.icons.forEach(function(t){return n.renderIcon(t,e)}),t.movingobjects.forEach(function(t){return n.renderMovingObject(t,e)})}}]),t}();e.default=_},function(t,e,n){"use strict";(function(e){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){t.width=.3*e.clientRect.width;var n=t.texture.baseTexture.width/t.texture.baseTexture.height;t.height=t.width/n,t.x=e.clientRect.width-t.width-25,t.y=e.clientRect.height-t.height-25}function o(t){var e=t.root.children,n=e.find(function(t){return t.id===h});n||(n=f(t.constructor)),n.id=h,n.texture.baseTexture.on("loaded",function(){i(n,t)}),i(n,t),n.alpha=.8;var r=e.indexOf(n),o=e.length-1;if(r!==o){if(o>=e.length)for(var a=o-e.length;1+a--;)e.push(void 0);e.splice(o,0,e.splice(r,1)[0]),c.default.emit("REQUEST_RENDER")}var s=e.filter(function(t){return t.id===h});s.length>1&&s.forEach(function(t){return t.parent.removeChild(t)}),0===s.length&&(t.root.addChild(n),c.default.emit("REQUEST_RENDER"))}function a(t){setInterval(function(){return o(t)},5e3)}var s=n(20),u=r(s),l=n(11),c=r(l),h=1e9*Math.random()>>>0,f=function(t){var n="data:image/svg+xml;base64,"+e.btoa(p),r=t.textureFromImageUrl(n||"http://localhost:3000/assets/jibeheader.png");r.baseTexture.on("loaded",function(){return c.default.emit("REQUEST_RENDER")});var i=new u.default.Sprite(r);return i.id=h,i};t.exports={a:a,b:o};var p='<svg xmlns="http://www.w3.org/2000/svg" width="1927.354" height="308.428" viewBox="0 0 1927.354 308.428">\n  <style>\n    .st0{fill:#424242;stroke:#FFFFFF;stroke-width:0;stroke-miterlimit:10;} .st1{fill:#E53A35;} .st2{fill:#EF5451;} .st3{fill:#FAFBFB;}\n  </style>\n  <path id="Layer_1" d="M406.557 85.153h-19.672c-3.57 0-6.476 2.905-6.476 6.476v98.77c0 8.97-4.46 18.63-14.25 18.63-5.73 0-9.27-2.98-12.05-5.97-3-3-6.63-3.11-9.73-.3l-10.98 11.2-.12.12c-2 2.32-2.25 5.61-.64 8.18l.17.24c8.46 10.45 20.44 16.2 33.75 16.2 12.9 0 24.59-4.53 32.91-12.73 8.85-8.74 13.53-21.05 13.53-35.61V91.62c0-3.57-2.9-6.475-6.47-6.475zm103.385 0H490.48c-3.45 0-6.478 3.026-6.478 6.476v138.54c0 3.45 3.026 6.47 6.477 6.47h19.46c3.45 0 6.47-3.03 6.47-6.48V91.62c0-3.45-3.03-6.47-6.48-6.47zm162.734 74.09c9.2-6.048 19.74-17.87 19.74-32.875 0-11.343-4.828-21.812-13.594-29.48-8.653-7.566-20.396-11.734-33.063-11.734h-47.93c-3.57 0-6.48 2.905-6.48 6.476v138.54c0 3.572 2.9 6.478 6.47 6.478h50.64c27.43 0 48.12-18.438 48.12-42.89 0-9.19-3.51-17.72-10.14-24.67-3.83-4.01-8.68-7.45-13.79-9.846zm-49.32-12.564v-31.63h19.892c9.27 0 15.498 6.14 15.498 15.28 0 9.46-6.518 16.33-15.498 16.33h-19.893zm39.156 43.72c0 9.27-7.175 16.54-16.335 16.54h-22.822V174.7h20.31c9.102 0 18.847 6.31 18.847 15.707zM853.988 85.15h-85.175c-3.57 0-6.476 2.905-6.476 6.476v138.54c0 3.57 2.905 6.474 6.476 6.474h85.175c3.57 0 6.477-2.904 6.477-6.476v-17.16c0-3.57-2.905-6.478-6.477-6.478h-59.444v-31.62h49.19c3.57 0 6.477-2.907 6.477-6.48v-17.37c0-3.45-3.02-6.475-6.47-6.475h-49.19v-29.32H854c3.57 0 6.477-2.9 6.477-6.47V91.63c0-3.57-2.906-6.476-6.477-6.476zm119.605 60.037c-16.435-6.696-23.138-12.815-23.138-21.124 0-8.29 9.497-12.15 15.916-12.15 6.52 0 16.51 3.98 27.43 10.914l.28.18c1.86 1.238 4.09 1.437 6.29.556 1.76-.7 3.36-2.037 4.5-3.76l7.92-11.88c1.14-1.618 1.52-3.77 1.07-5.9-.41-1.937-1.49-3.57-2.96-4.51-3.45-2.57-20.63-14.452-43.26-14.452-34.07 0-49.58 22.13-49.58 42.69 0 27.77 23.35 40.42 40.91 47.52 17.54 7.1 25.02 13.92 25.02 22.8 0 7.76-7.11 13.62-16.54 13.62-7.53 0-18.04-4.31-29.59-12.14l-.57-.38c-1.61-1.2-3.78-1.67-5.84-1.27-2.07.41-3.8 1.67-4.86 3.53l-7.53 12.97-.02.03c-2.81 5-.54 7.27 1.508 9.32 4.2 3.99 20.066 17.01 47.763 17.01 14.41 0 27.49-4.72 36.82-13.29 8.904-8.18 13.81-19.06 13.81-30.64 0-27.67-22.9-40.61-45.295-49.61zm190.545-60.038h-91.454c-3.57 0-6.476 2.9-6.476 6.47v17.16c0 3.57 2.905 6.47 6.476 6.47h29.52v114.91c0 3.45 3.026 6.47 6.477 6.47h19.47c3.45 0 6.48-3.03 6.48-6.48v-114.9h29.52c3.57 0 6.48-2.91 6.48-6.48V91.62c0-3.57-2.9-6.475-6.48-6.475zm179.547 47.49c0-26.19-21.588-47.5-48.122-47.5h-59.854c-3.57 0-6.48 2.9-6.48 6.47v138.54c0 3.57 2.9 6.47 6.47 6.47h19.25c3.45 0 6.47-3.03 6.47-6.48V179.3h19.18l27.14 54.077c.79 1.58 2.67 3.267 5.58 3.267h21.97c2.46 0 4.55-1.12 5.72-3.075 1.18-1.98 1.19-4.54.03-6.68l-27.37-50.75c18.56-8.46 29.97-24.91 29.97-43.5zm-32.206.42c0 10.21-8.35 18.84-18.22 18.84h-31.61v-36.64h31.61c9.87 0 18.22 8.15 18.22 17.8zm190.63-47.92h-85.18c-3.57 0-6.48 2.9-6.48 6.47v138.54c0 3.57 2.9 6.47 6.47 6.47h85.17c3.57 0 6.47-2.91 6.47-6.48V213c0-3.57-2.91-6.48-6.48-6.48h-59.44V174.9h49.19c3.57 0 6.47-2.906 6.47-6.48v-17.37c0-3.45-3.03-6.474-6.48-6.474h-49.19v-29.32h59.44c3.57 0 6.47-2.907 6.47-6.478v-17.16c0-3.57-2.91-6.475-6.48-6.475zm133.24 1.59c-.46-.91-1.84-3.69-5.8-3.69h-2.1c-2.55 0-4.61 1.3-5.83 3.75l-65.08 140.84c-.95 2.06-.84 4.36.29 6.13 1.16 1.82 3.18 2.86 5.53 2.86h18.2c3.79 0 6.91-2.13 8.36-5.7l9.56-21.09h59.35l9.63 21.22c1.44 2.89 3.45 5.57 8.3 5.57H1694c2.356 0 4.374-1.04 5.535-2.86 1.136-1.78 1.245-4.07.295-6.12l-64.49-140.92zm9.99 94.88h-34.33l16.99-38.15 17.34 38.14zm269.62 47.27L1890.27 88.3c-.427-3.15-2.92-5.26-6.24-5.26h-3.35c-2.65 0-4.657 1.2-5.825 3.536l-44.09 94.59-44.115-94.65c-1.09-2.175-3.254-3.475-5.796-3.475h-3.35c-3.31 0-5.81 2.11-6.236 5.26l-24.907 140.66c-.31 2.15.2 4.12 1.43 5.53 1.2 1.38 2.98 2.14 5.03 2.14h18.83c3.28 0 5.88-2.73 6.24-5.26l11.02-72 34.04 75.58.05.1c1.19 2.38 3.25 3.68 5.8 3.68h3.76c2.74 0 5.04-1.52 5.89-3.88l33.597-75.44 11.203 71.98.063.3c.694 2.44 3.27 4.96 6.38 4.96h19.044c2.11 0 3.92-.79 5.09-2.24 1.18-1.46 1.58-3.45 1.14-5.5z" class="st0"/>\n  <g id="Layer_2">\n    <path d="M65.945 99.697l-.006-.013c-15.76 9.116-28.9 22.256-38.02 38.013-8.84 15.276-13.9 33.01-13.9 51.928s5.06 36.652 13.9 51.927c9.11 15.758 22.25 28.897 38.01 38.014 15.27 8.838 33.01 13.9 51.92 13.9 18.91 0 36.65-5.063 51.92-13.9 15.76-9.12 28.9-22.257 38.01-38.015 8.83-15.27 13.9-33 13.9-51.92V9.77L65.94 99.696z" class="st1"/>\n    <path d="M117.866 299.235c-19.268 0-38.224-5.075-54.817-14.675-16.63-9.62-30.5-23.492-40.12-40.118-9.6-16.593-14.68-35.55-14.68-54.817 0-19.27 5.07-38.224 14.67-54.817 9.62-16.625 23.49-30.497 40.12-40.118.12-.07.24-.136.37-.197l155.4-89.72c1.78-1.03 3.98-1.03 5.77 0s2.88 2.935 2.88 4.996v179.85c0 19.26-5.08 38.22-14.68 54.81-9.62 16.62-23.5 30.5-40.12 40.12-16.59 9.6-35.55 14.67-54.82 14.67zM68.478 104.88c-14.726 8.602-27.018 20.942-35.56 35.706-8.586 14.838-13.125 31.796-13.125 49.038s4.538 34.2 13.124 49.038c8.61 14.882 21.028 27.3 35.91 35.91 14.84 8.586 31.797 13.124 49.038 13.124 17.244 0 34.202-4.54 49.04-13.125 14.88-8.6 27.298-21.02 35.908-35.91 8.585-14.83 13.122-31.79 13.122-49.03V19.76L68.83 104.692c-.116.068-.233.13-.352.188z" class="st1"/>\n    <path d="M77.472 265.35c-.98 0-1.974-.25-2.883-.777-13.13-7.595-24.08-18.546-31.68-31.672-7.58-13.09-11.59-28.06-11.59-43.27 0-15.21 4-30.17 11.58-43.28 7.59-13.12 18.54-24.07 31.67-31.67.1-.06.21-.11.31-.17l120.84-69.76c2.75-1.59 6.29-.64 7.88 2.11 1.59 2.76.65 6.29-2.11 7.89L80.36 124.68c-.1.06-.196.11-.295.16-11.25 6.58-20.64 16.01-27.17 27.29-6.56 11.35-10.033 24.318-10.033 37.5s3.47 26.15 10.03 37.5c6.585 11.38 16.08 20.88 27.462 27.464 2.756 1.59 3.7 5.12 2.102 7.88-1.07 1.84-3.008 2.88-5 2.88z" class="st2"/>\n    <path d="M89.012 245.362c-.98 0-1.974-.25-2.883-.776-9.63-5.57-17.66-13.6-23.23-23.225-5.56-9.6-8.5-20.58-8.5-31.73 0-11.15 2.94-22.13 8.5-31.74 5.56-9.62 13.6-17.65 23.22-23.22.08-.05.17-.1.26-.14l86.27-49.81c2.75-1.59 6.29-.64 7.88 2.11 1.59 2.76.65 6.29-2.11 7.88L91.9 144.67c-.08.043-.16.09-.243.13-7.773 4.554-14.26 11.074-18.77 18.872-4.545 7.855-6.948 16.83-6.948 25.96 0 9.13 2.4 18.106 6.94 25.958 4.56 7.88 11.13 14.456 19.01 19.016 2.76 1.597 3.7 5.126 2.11 7.884-1.07 1.847-3.01 2.88-5 2.88z" class="st2"/>\n    <path d="M100.55 225.375c-.98 0-1.973-.25-2.883-.776-6.122-3.55-11.23-8.65-14.776-14.78-3.53-6.12-5.4-13.1-5.4-20.2s1.87-14.09 5.41-20.2c3.54-6.13 8.65-11.23 14.78-14.78l.22-.12 51.71-29.86c2.76-1.59 6.29-.65 7.88 2.11 1.6 2.76.65 6.28-2.11 7.88l-51.92 29.97c-.06.03-.12.07-.18.1-4.29 2.53-7.88 6.14-10.38 10.46-2.52 4.36-3.86 9.35-3.86 14.42s1.34 10.06 3.86 14.42c2.54 4.38 6.19 8.03 10.57 10.57 2.76 1.59 3.7 5.12 2.11 7.88-1.07 1.85-3 2.88-5 2.88z" class="st2"/>\n    <path d="M117.867 206.932h-.007c-4.62 0-8.964-1.8-12.233-5.068-3.27-3.27-5.07-7.616-5.07-12.24 0-9.54 7.765-17.306 17.307-17.306s17.307 7.764 17.307 17.307c0 4.623-1.8 8.97-5.07 12.24-3.26 3.266-7.61 5.067-12.23 5.067zm-.004-11.54c1.544 0 2.992-.6 4.08-1.688s1.69-2.538 1.69-4.08c0-3.18-2.588-5.767-5.77-5.767-3.18 0-5.768 2.587-5.768 5.768 0 1.54.6 2.99 1.69 4.08 1.09 1.088 2.536 1.688 4.076 1.688h.01z" class="st3"/>\n    <path d="M117.866 276.16c-15.213 0-30.178-4.008-43.277-11.587-2.76-1.596-3.7-5.125-2.11-7.883 1.59-2.757 5.12-3.7 7.88-2.104 11.34 6.565 24.31 10.034 37.5 10.034 13.18 0 26.15-3.47 37.5-10.036 11.38-6.585 20.87-16.08 27.46-27.463 6.56-11.34 10.03-24.31 10.03-37.49V49.74c0-3.188 2.58-5.77 5.77-5.77s5.77 2.583 5.77 5.77v139.89c0 15.21-4.01 30.172-11.59 43.272-7.6 13.125-18.55 24.076-31.67 31.67-13.1 7.58-28.07 11.588-43.28 11.588z" class="st3"/>\n    <path d="M117.866 253.083c-11.155 0-22.13-2.938-31.738-8.497-2.758-1.596-3.7-5.125-2.105-7.882 1.595-2.758 5.124-3.702 7.883-2.105 7.854 4.54 16.83 6.94 25.958 6.94 9.13 0 18.107-2.4 25.96-6.95 7.88-4.56 14.456-11.14 19.014-19.02 4.544-7.86 6.946-16.83 6.946-25.96V89.7c0-3.186 2.583-5.77 5.77-5.77s5.768 2.585 5.768 5.77v99.92c0 11.155-2.938 22.128-8.497 31.735-5.57 9.624-13.6 17.655-23.223 23.224-9.605 5.56-20.58 8.5-31.736 8.5z" class="st3"/>\n    <path d="M117.866 230.008c-7.1 0-14.084-1.87-20.2-5.41-2.758-1.595-3.7-5.124-2.103-7.882 1.595-2.757 5.123-3.698 7.883-2.104 4.36 2.524 9.347 3.857 14.42 3.857 5.07 0 10.058-1.34 14.42-3.86 4.38-2.54 8.033-6.19 10.567-10.57 2.523-4.36 3.857-9.35 3.858-14.42v-59.95c0-3.19 2.59-5.77 5.77-5.77s5.77 2.58 5.77 5.77v59.95c0 7.1-1.87 14.08-5.41 20.2-3.54 6.12-8.65 11.23-14.77 14.77-6.11 3.54-13.1 5.41-20.2 5.41z" class="st3"/>\n  </g>\n</svg>'}).call(e,n(1))},function(t,e,n){"use strict"},function(t,e,n){"use strict";(function(e){/**
* @license
* jungle.js
*
* Copyright (c) 2016 Jibestream Inc.
* Licensed under the Jibestream license
*
* http://www.jibestream.com/
*/
var r=n(162);Object.assign(r,n(169)),r.VERSION=n(171),t.exports=e.jungle=r}).call(e,n(1))},function(t,e,n){"use strict";t.exports="VERSION"},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var i=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.exports={parsePath:function(t){return t.split(/(?=[Mm])/).map(function(t){return t.split(/(?=[MmLlCcHhVvZzAaSsQqTt])/).map(function(t){var e=t.charAt(0);return{code:e,points:t.substr(1,t.length).split(/(?=[-])|,| | -/).reduce(function(t,e){return e&&t.push(+e),t},[]),isRelative:e===e.toLowerCase()}})})},calculateArcPoints:function(t,e,n){var o=i(t,2),a=o[0],s=o[1],u=i(e,7),l=u[0],c=u[1],h=u[2],f=u[3],p=u[4],d=u[5],y=u[6],v=[];if(0===l||0===c)return[[a,s],[d,y]];if(d===a&&y===s)return[];var g=Math.abs(l),m=Math.abs(c),b=h*Math.PI/180,_=Math.sin(b),w=Math.cos(b),x=(a-d)/2,T=(s-y)/2,S=w*x+_*T,E=-_*x+w*T,O=S*S,M=E*E,P=g*g,C=m*m,A=1.001*(O/P+M/C);if(A>1){var k=Math.sqrt(A);g*=k,m*=k,P=g*g,C=m*m}var I=f===p?-1:1,R=P*C-P*M-C*O,j=P*M+C*O,D=Math.sqrt(R/j)*I,L=D*(g*E/m),N=m*S/g*-D,B=w*L-_*N+(a+d)/2,F=_*L+w*N+(s+y)/2,U=this.angle(1,0,(S-L)/g,(E-N)/m),W=[(S-L)/g,(E-N)/m,(-S-L)/g,(-E-N)/m],V=this.angle.apply(this,W);if(0===p&&V>0?V-=360:0!==p&&V<0&&(V+=360),h%360==0){var H=this.parametricEqnsOfArc(B,F,g,m,U,V,n);v.push.apply(v,r(H))}return v},parametricEqnsOfArc:function(t,e,n,r,i,o,a){var s=[];s.add([t+n*Math.cos(i),e+r*Math.sin(i)]);for(var u=i+a;u<o;u+=a)s.add([t+n*Math.cos(u),e+r*Math.sin(u)]);return s.add([t+n*Math.cos(o),e+r*Math.sin(o)]),s},angle:function(t,e,n,r){return(Math.atan2(t,e)-Math.atan2(n,r))*(180/Math.PI)%360},getAbsPointsFromData:function(t,e,n){var r=t.substr(1,t.length).split(/(?=[-])|,/).map(Number);return n&&(r=r.map(function(t,n){return t+e[n%2]})),r},estimateBezierPoints:function(t,e,n,r,i,o,a,s){for(var u=[],l=0,c=0,h=0,f=0,p=0;l<=.97;){l+=.03;var d=[];if(d=this.calculateBezier(t,e,n,r,i,o,a,s,l),0!==f&&0!==p&&0!==c){if(h=this.getAngleOfLineBetweenTwoPoints(f,p,d[0],d[1]),Math.abs(h-c)<=.5)continue;c=h,f=d[0],p=d[1],u.push(d)}else c=this.getAngleOfLineBetweenTwoPoints(t,e,d[0],d[1]),f=d[0],p=d[1],u.push(d)}return u.push([a,s]),u},calculateBezier:function(t,e,n,r,i,o,a,s,u){var l=1-u,c=Math.pow(u,2),h=Math.pow(u,3),f=Math.pow(l,2),p=Math.pow(l,3);return[p*t+3*f*u*n+3*l*c*i+h*a,p*e+3*f*u*r+3*l*c*o+h*s]},getAngleOfLineBetweenTwoPoints:function(t,e,n,r){return 180*Math.atan2(r-e,n-t)/Math.PI},pointInPolygon:function(t,e){for(var n=i(t,2),r=n[0],o=n[1],a=!1,s=0,u=e.length-1;s<e.length;u=s++){var l=[e[s][0],e[s][1],e[u][0],e[u][1]],c=l[0],h=l[1],f=l[2],p=l[3];h>o!=p>o&&r<(f-c)*(o-h)/(p-h)+c&&(a=!a)}return a},breakPathIntoMultipleShapes:function(t){var e=this;return t.reduce(function(t,n,r){if(0===r)t.push([n]);else{var i=t[t.length-1],o=i[0],a=n[0];e.pointInPolygon(a,o)?i.push(n):t.push([n])}return t},[])}}},function(t,e,n){"use strict";(function(e){function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(172),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.rasterLayerDelimiter,r=e.repeatedLayers,o=void 0===r?{}:r;i(this,t),this.rasterLayerDelimiter=n,this.repeatedLayers=o}return o(t,[{key:"parse",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(!e)throw new Error("JibestreamSDK: No SVG map provided to parser.");var a=this.repeatedLayers||{},s=e.getElementsByTagName("svg")[0],u=s.childNodes,l=s.getAttribute("viewBox").split(" ").map(Number),c=t.makeFeatureCollection(l);[].slice.call(u).forEach(function(t){1!==t.nodeType&&t.parentNode.removeChild(t)});var h={},f="";"style"===u[0].tagName&&(f=u[0].innerHTML||u[0].firstChild.data,h=t.parseCss(f||"")),c.properties={style:h};var p=[].slice.call(u).filter(function(t){return 1===t.nodeType&&("style"!==t.tagName&&(t.childNodes.length,!0))}),d=p.reduce(function(t,e){var n=e.getAttribute("id");return n&&t.push(n.split("_")[0]),t},[]),y=d.indexOf(this.rasterLayerDelimiter);p.forEach(function(e){if(e.childNodes.length){var s=e.getAttribute("id").split("_")[0];if(d.indexOf(s)<y)return void t.seperateLayer(s,e,i);var u=t.makeFeature(s,h[s]);if(Object.hasOwnProperty.call(a,s)&&null!==a[s])u.geometry.geometries=a[s];else{var l=t.flattenGroupChildrenIntoNodes([].slice.call(e.childNodes));u.geometry.geometries=l.reduce(function(e,i){var a=t.getGeometryFromSVGElement(i,h,n);return Array.isArray(a)?(o(i,a,s),e.concat.apply(e,r(a))):(a&&(o(i,[a],s),e.push(a)),e)},[])}Object.hasOwnProperty.call(n.repeatedLayers,s)&&(n.repeatedLayers[s]=u.geometry.geometries),c.features.push(u)}else if("g"!==e.tagName){var f=e.getAttribute("id").split("_")[0],p=t.getGeometryFromSVGElement(e,h,n);p.forEach(function(e){var n=t.makeFeature(f,h[f]);n.geometry=e,c.features.push(n),o(e,[n])})}});var v=i;return v.length&&(v.complete=t.combineRasterLayers(v,l,f)),c}}],[{key:"flattenGroupChildrenIntoNodes",value:function(t){for(var e=function(t){return"#text"!==t.nodeName},n=t.filter(e),i=function(t){return"g"===t.tagName},o=n;function(t){return!!t.find(i)}(o);)o=o.reduce(function(t,n){return e(n)&&(i(n)&&n.childNodes.length?t.push.apply(t,r([].slice.call(n.childNodes))):t.push(n)),t.filter(function(t){return"g"!==t.nodeName})},[]);return o.filter(e)}},{key:"hexidecimal",value:function(t){return t&&"none"!==t?parseInt(t.replace("#","0x"),16):null}},{key:"startsWith",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.substr(n,e.length)===e}},{key:"capitalize",value:function(t){return t.replace(/(?:^|\s)\S/g,function(t){return t.toUpperCase()})}},{key:"getAttributesWithPrefixes",value:function(e,n){for(var r,i={},o=0,a=e.attributes;o<a.length;o++)!function(e,o,a){e=a[o],n.forEach(function(n){t.startsWith(e.nodeName,n)&&(i[e.nodeName]=e.nodeValue)}),r=e}(r,o,a);return i}},{key:"parseCss",value:function(e){var n=/-([a-z])/g,r=function(t){return t[1].toUpperCase()},i=/(\.|#)[a-zA-Z-].+?}/g,o=/([^\r\n,{}]+)/g,a=/({.+?})/g,s=/_x002D_/g;return e.match(i).map(function(t){return t.replace(s,"-")}).reduce(function(e,i){var s=i.match(o)[0].substring(1),u=i.match(a)[0];u=u.substring(1,u.length-1).split(";");var l=u.reduce(function(t,e){var i=e.split(":");return 2===i.length&&(t[i[0].trim().replace(n,r)]=i[1].trim()),t},{});return l.fill=t.hexidecimal(l.fill),l.stroke=t.hexidecimal(l.stroke),l.strokeWidth&&(l.strokeWidth=+l.strokeWidth),l.opacity&&(l.opacity=+l.opacity),e[s]=l,e},{})}},{key:"parseRect",value:function(e){var n=t.getRotatedPointsOfRect({x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height"),transform:e.getAttribute("transform")});return n[n.length]=n[0],{type:"Polygon",coordinates:n}}},{key:"parsePolygon",value:function(t){var e=t.getAttribute("points"),n=e.trim().split(" ").map(function(t){return t.split(",").map(Number)});return n[n.length]=n[0],{type:"Polygon",coordinates:n}}},{key:"parseLine",value:function(t){return{type:"LineString",coordinates:[[+t.getAttribute("x1"),+t.getAttribute("y1")],[+t.getAttribute("x2"),+t.getAttribute("y2")]]}}},{key:"parsePolyline",value:function(t){return{type:"LineString",coordinates:t.getAttribute("points").trim().split(" ").map(function(t){return t.split(",")})}}},{key:"parsePath",value:function(e){var n=t.getPointsFromPathData(e.getAttribute("d"));return a.breakPathIntoMultipleShapes(n).map(function(t){return{type:"MultiLineString",coordinates:t}})}},{key:"parseCircle",value:function(t){return{type:"Point",coordinates:[+t.getAttribute("cx"),+t.getAttribute("cy")],properties:{radius:+t.getAttribute("r")}}}},{key:"parseEllipse",value:function(t){return{type:"Point",coordinates:[+t.getAttribute("cx"),+t.getAttribute("cy")],properties:{width:+t.getAttribute("rx"),height:+t.getAttribute("ry")}}}},{key:"getPointsFromPathData",value:function(t){var e=this;return a.parsePath(t).map(function(t){return t.reduce(function(t,n){var i=[0,0],o=t[t.length-1];switch(n.code.toLowerCase()){case"m":case"l":i=n.points.map(function(t,e){return n.isRelative?t+o[e]:t}),t.push(i);break;case"h":case"v":var s="h"===n.code.toLowerCase()?0:1;i=o.map(function(t,e){return s===e?n.isRelative?t+n.points[0]:n.points[0]:t}),t.push(i);break;case"z":t.push(t[0]);break;case"c":case"s":var u=n.points,l=n.isRelative,c=n.code,h=u.map(function(t,e){return l?t+o[e%2]:t});if("s"===c.toLowerCase()){var f=e.previousControlPoint,p=o.map(function(t,e){return 2*t-f[e]});h.unshift.apply(h,r(p))}h.unshift.apply(h,r(o));var d=a.estimateBezierPoints.apply(a,r(h));e.previousControlPoint=[h[4],h[5]],t.push.apply(t,r(d));break;case"a":var y=n.points;n.isRelative&&(y[5]+=o[0],y[6]+=o[1]);var v=a.calculateArcPoints(o,y,1);u.push.apply(u,r(v));break;default:console.log("Not parsing path command:",n)}return t},[])})}},{key:"getRotatedPointsOfRect",value:function(e,n){var r=0;if(e.transform&&e.transform.length>0&&e.transform.indexOf("matrix(")>-1){var i=e.transform.split("matrix(").join("").split(")").join(""),o=i.split(" ");if(o.length>5){var a=+o[0],s=+o[1];r=Math.atan2(s,a)}}var u=t.returnCenterOfRect(e),l=[e.x,e.y],c=[e.x+e.width,e.y],h=[e.x+e.width,e.y+e.height],f=[e.x,e.y+e.height];return[t.rotatePoint(l,u,r,n),t.rotatePoint(c,u,r,n),t.rotatePoint(h,u,r,n),t.rotatePoint(f,u,r,n)]}},{key:"returnCenterOfRect",value:function(t){return[t.x+t.width/2,t.y+t.height/2]}},{key:"rotatePoint",value:function(t,e,n){var r=t[0]-e[0],i=t[1]-e[1],o=r*Math.cos(n)-i*Math.sin(n),a=r*Math.sin(n)+i*Math.cos(n);return[o+e[0],a+e[1]].map(function(t){return+t.toFixed(3)})}},{key:"getGeometryFromSVGElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],i=r.decimalPrecision,o=["data","waypoint"],a=["rect","polygon","line","polyline","path","circle","ellipse"],s=null;if(a.indexOf(e.tagName)>-1){var u=t.capitalize(e.tagName);s=t["parse"+u](e,{decimalPrecision:i})}else if("g"===e.tagName){if(e.childNodes.length){for(var l=[],c=0;c<e.childNodes.length;c++){var h=[e.childNodes[c],n,{decimalPrecision:i}],f=t.getGeometryFromSVGElement.apply(t,h);l.push(f)}return l}}else console.log("Did not parse: ",e);return s&&(s.properties=Object.assign(s.properties||{},{className:e.getAttribute("class"),meta:t.getAttributesWithPrefixes(e,o)}),Array.isArray(s)&&s.forEach(function(t){return t.properties=s.properties})),s}},{key:"makeFeature",value:function(e,n,r){return{type:"Feature",id:e,geometry:t.makeGeometryCollection(),properties:{style:n,sequence:r}}}},{key:"makeGeometryCollection",value:function(){return{type:"GeometryCollection",geometries:[]}}},{key:"makeFeatureCollection",value:function(t){return{type:"FeatureCollection",bbox:t,features:[]}}},{key:"seperateLayer",value:function(e,n,r){var i=t.div;i.innerHTML="",i.appendChild(n),r.push(i.innerHTML)}},{key:"combineRasterLayers",value:function(t,e,n){var r="<style>"+n+"</style>";return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" xml:space="preserve" viewBox="'+e.join(" ")+'" width="'+e[2]+'px" height="'+e[3]+'px" x="0px" y="0px" >'+r+t.join("")+"</svg>"}},{key:"div",get:function(){return this._div?this._div:this._div=e.document.createElement("div")}}]),t}();t.exports=s}).call(e,n(1))},function(t,e,n){"use strict";t.exports=n(173)},function(t,e,n){"use strict";(function(r,i){var o,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.3/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
!function(r,i){o=i,void 0!==(a="function"==typeof o?o.call(e,n,e,t):o)&&(t.exports=a)}(0,function(){var t,e=Function.call.bind(Function.apply),n=Function.call.bind(Function.call),o=Array.isArray,a=Object.keys,u=function(t){try{return t(),!1}catch(t){return!0}},l=function(t){try{return t()}catch(t){return!1}},c=function(t){return function(){return!e(t,this,arguments)}}(u),h=!!Object.defineProperty&&function(){return!u(function(){return Object.defineProperty({},"x",{get:function(){}})})}(),f="foo"===function(){}.name,p=Function.call.bind(Array.prototype.forEach),d=Function.call.bind(Array.prototype.reduce),y=Function.call.bind(Array.prototype.filter),v=Function.call.bind(Array.prototype.some),g=function(t,e,n,r){!r&&e in t||(h?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:n}):t[e]=n)},m=function(t,e,n){p(a(e),function(r){var i=e[r];g(t,r,i,!!n)})},b=Function.call.bind(Object.prototype.toString),_=function(t){return"function"==typeof t},w={getter:function(t,e,n){if(!h)throw new TypeError("getters require true ES5 support");Object.defineProperty(t,e,{configurable:!0,enumerable:!1,get:n})},proxy:function(t,e,n){if(!h)throw new TypeError("getters require true ES5 support");var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,{configurable:r.configurable,enumerable:r.enumerable,get:function(){return t[e]},set:function(n){t[e]=n}})},redefine:function(t,e,n){if(h){var r=Object.getOwnPropertyDescriptor(t,e);r.value=n,Object.defineProperty(t,e,r)}else t[e]=n},defineByDescriptor:function(t,e,n){h?Object.defineProperty(t,e,n):"value"in n&&(t[e]=n.value)},preserveToString:function(t,e){e&&_(e.toString)&&g(t,"toString",e.toString.bind(e),!0)}},x=Object.create||function(t,e){var n=function(){};n.prototype=t;var r=new n;return void 0!==e&&a(e).forEach(function(t){w.defineByDescriptor(r,t,e[t])}),r},T=function(t,e){return!!Object.setPrototypeOf&&l(function(){var n=function e(n){var r=new t(n);return Object.setPrototypeOf(r,e.prototype),r};return Object.setPrototypeOf(n,t),n.prototype=x(t.prototype,{constructor:{value:n}}),e(n)})},S=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r)return r;throw new Error("unable to locate global object")}(),E=S.isFinite,O=Function.call.bind(String.prototype.indexOf),M=Function.apply.bind(Array.prototype.indexOf),P=Function.call.bind(Array.prototype.concat),C=Function.call.bind(String.prototype.slice),A=Function.call.bind(Array.prototype.push),k=Function.apply.bind(Array.prototype.push),I=Function.call.bind(Array.prototype.shift),R=Math.max,j=Math.min,D=Math.floor,L=Math.abs,N=Math.exp,B=Math.log,F=Math.sqrt,U=Function.call.bind(Object.prototype.hasOwnProperty),W=function(){},V=S.Map,H=V&&V.prototype.delete,z=V&&V.prototype.get,G=V&&V.prototype.has,X=V&&V.prototype.set,q=S.Symbol||{},Y=q.species||"@@species",J=Number.isNaN||function(t){return t!==t},K=Number.isFinite||function(t){return"number"==typeof t&&E(t)},Z=_(Math.sign)?Math.sign:function(t){var e=Number(t);return 0===e?e:J(e)?e:e<0?-1:1},Q=function(t){var e=Number(t);return e<-1||J(e)?NaN:0===e||e===1/0?e:-1===e?-1/0:1+e-1==0?e:e*(B(1+e)/(1+e-1))},$=function(t){return"[object Arguments]"===b(t)},tt=function(t){return null!==t&&"object"===(void 0===t?"undefined":s(t))&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==b(t)&&"[object Function]"===b(t.callee)},et=$(arguments)?$:tt,nt={primitive:function(t){return null===t||"function"!=typeof t&&"object"!==(void 0===t?"undefined":s(t))},string:function(t){return"[object String]"===b(t)},regex:function(t){return"[object RegExp]"===b(t)},symbol:function(t){return"function"==typeof S.Symbol&&"symbol"===(void 0===t?"undefined":s(t))}},rt=function(t,e,n){var r=t[e];g(t,e,n,!0),w.preserveToString(t[e],r)},it="function"==typeof q&&"function"==typeof q.for&&nt.symbol(q()),ot=nt.symbol(q.iterator)?q.iterator:"_es6-shim iterator_";S.Set&&"function"==typeof(new S.Set)["@@iterator"]&&(ot="@@iterator"),S.Reflect||g(S,"Reflect",{},!0);var at=S.Reflect,st=String,ut="undefined"!=typeof document&&document?document.all:null,lt=null==ut?function(t){return null==t}:function(t){return null==t&&t!==ut},ct={Call:function(t,n){var r=arguments.length>2?arguments[2]:[];if(!ct.IsCallable(t))throw new TypeError(t+" is not a function");return e(t,n,r)},RequireObjectCoercible:function(t,e){if(lt(t))throw new TypeError(e||"Cannot call method on "+t);return t},TypeIsObject:function(t){return void 0!==t&&null!==t&&!0!==t&&!1!==t&&("function"==typeof t||"object"===(void 0===t?"undefined":s(t))||t===ut)},ToObject:function(t,e){return Object(ct.RequireObjectCoercible(t,e))},IsCallable:_,IsConstructor:function(t){return ct.IsCallable(t)},ToInt32:function(t){return ct.ToNumber(t)>>0},ToUint32:function(t){return ct.ToNumber(t)>>>0},ToNumber:function(t){if("[object Symbol]"===b(t))throw new TypeError("Cannot convert a Symbol value to a number");return+t},ToInteger:function(t){var e=ct.ToNumber(t);return J(e)?0:0!==e&&K(e)?(e>0?1:-1)*D(L(e)):e},ToLength:function(t){var e=ct.ToInteger(t);return e<=0?0:e>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e},SameValue:function(t,e){return t===e?0!==t||1/t==1/e:J(t)&&J(e)},SameValueZero:function(t,e){return t===e||J(t)&&J(e)},IsIterable:function(t){return ct.TypeIsObject(t)&&(void 0!==t[ot]||et(t))},GetIterator:function(e){if(et(e))return new t(e,"value");var n=ct.GetMethod(e,ot);if(!ct.IsCallable(n))throw new TypeError("value is not an iterable");var r=ct.Call(n,e);if(!ct.TypeIsObject(r))throw new TypeError("bad iterator");return r},GetMethod:function(t,e){var n=ct.ToObject(t)[e];if(!lt(n)){if(!ct.IsCallable(n))throw new TypeError("Method not callable: "+e);return n}},IteratorComplete:function(t){return!!t.done},IteratorClose:function(t,e){var n=ct.GetMethod(t,"return");if(void 0!==n){var r,i;try{r=ct.Call(n,t)}catch(t){i=t}if(!e){if(i)throw i;if(!ct.TypeIsObject(r))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(t){var e=arguments.length>1?t.next(arguments[1]):t.next();if(!ct.TypeIsObject(e))throw new TypeError("bad iterator");return e},IteratorStep:function(t){var e=ct.IteratorNext(t);return!ct.IteratorComplete(e)&&e},Construct:function(t,e,n,r){var i=void 0===n?t:n;if(!r&&at.construct)return at.construct(t,e,i);var o=i.prototype;ct.TypeIsObject(o)||(o=Object.prototype);var a=x(o),s=ct.Call(t,a,e);return ct.TypeIsObject(s)?s:a},SpeciesConstructor:function(t,e){var n=t.constructor;if(void 0===n)return e;if(!ct.TypeIsObject(n))throw new TypeError("Bad constructor");var r=n[Y];if(lt(r))return e;if(!ct.IsConstructor(r))throw new TypeError("Bad @@species");return r},CreateHTML:function(t,e,n,r){var i=ct.ToString(t),o="<"+e;if(""!==n){o+=" "+n+'="'+ct.ToString(r).replace(/"/g,"&quot;")+'"'}return o+">"+i+"</"+e+">"},IsRegExp:function(t){if(!ct.TypeIsObject(t))return!1;var e=t[q.match];return void 0!==e?!!e:nt.regex(t)},ToString:function(t){return st(t)}};if(h&&it){var ht=function(t){if(nt.symbol(q[t]))return q[t];var e=q.for("Symbol."+t);return Object.defineProperty(q,t,{configurable:!1,enumerable:!1,writable:!1,value:e}),e};if(!nt.symbol(q.search)){var ft=ht("search"),pt=String.prototype.search;g(RegExp.prototype,ft,function(t){return ct.Call(pt,t,[this])});var dt=function(t){var e=ct.RequireObjectCoercible(this);if(!lt(t)){var n=ct.GetMethod(t,ft);if(void 0!==n)return ct.Call(n,t,[e])}return ct.Call(pt,e,[ct.ToString(t)])};rt(String.prototype,"search",dt)}if(!nt.symbol(q.replace)){var yt=ht("replace"),vt=String.prototype.replace;g(RegExp.prototype,yt,function(t,e){return ct.Call(vt,t,[this,e])});var gt=function(t,e){var n=ct.RequireObjectCoercible(this);if(!lt(t)){var r=ct.GetMethod(t,yt);if(void 0!==r)return ct.Call(r,t,[n,e])}return ct.Call(vt,n,[ct.ToString(t),e])};rt(String.prototype,"replace",gt)}if(!nt.symbol(q.split)){var mt=ht("split"),bt=String.prototype.split;g(RegExp.prototype,mt,function(t,e){return ct.Call(bt,t,[this,e])});var _t=function(t,e){var n=ct.RequireObjectCoercible(this);if(!lt(t)){var r=ct.GetMethod(t,mt);if(void 0!==r)return ct.Call(r,t,[n,e])}return ct.Call(bt,n,[ct.ToString(t),e])};rt(String.prototype,"split",_t)}var wt=nt.symbol(q.match),xt=wt&&function(){var t={};return t[q.match]=function(){return 42},42!=="a".match(t)}();if(!wt||xt){var Tt=ht("match"),St=String.prototype.match;g(RegExp.prototype,Tt,function(t){return ct.Call(St,t,[this])});var Et=function(t){var e=ct.RequireObjectCoercible(this);if(!lt(t)){var n=ct.GetMethod(t,Tt);if(void 0!==n)return ct.Call(n,t,[e])}return ct.Call(St,e,[ct.ToString(t)])};rt(String.prototype,"match",Et)}}var Ot=function(t,e,n){w.preserveToString(e,t),Object.setPrototypeOf&&Object.setPrototypeOf(t,e),h?p(Object.getOwnPropertyNames(t),function(r){r in W||n[r]||w.proxy(t,r,e)}):p(Object.keys(t),function(r){r in W||n[r]||(e[r]=t[r])}),e.prototype=t.prototype,w.redefine(t.prototype,"constructor",e)},Mt=function(){return this},Pt=function(t){h&&!U(t,Y)&&w.getter(t,Y,Mt)},Ct=function(t,e){var n=e||function(){return this};g(t,ot,n),!t[ot]&&nt.symbol(ot)&&(t[ot]=n)},At=function(t,e,n){h?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:n}):t[e]=n},kt=function(t,e,n){if(At(t,e,n),!ct.SameValue(t[e],n))throw new TypeError("property is nonconfigurable")},It=function(t,e,n,r){if(!ct.TypeIsObject(t))throw new TypeError("Constructor requires `new`: "+e.name);var i=e.prototype;ct.TypeIsObject(i)||(i=n);var o=x(i);for(var a in r)if(U(r,a)){var s=r[a];g(o,a,s,!0)}return o};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var Rt=String.fromCodePoint;rt(String,"fromCodePoint",function(t){return ct.Call(Rt,this,arguments)})}var jt={fromCodePoint:function(t){for(var e,n=[],r=0,i=arguments.length;r<i;r++){if(e=Number(arguments[r]),!ct.SameValue(e,ct.ToInteger(e))||e<0||e>1114111)throw new RangeError("Invalid code point "+e);e<65536?A(n,String.fromCharCode(e)):(e-=65536,A(n,String.fromCharCode(55296+(e>>10))),A(n,String.fromCharCode(e%1024+56320)))}return n.join("")},raw:function(t){var e=ct.ToObject(t,"bad callSite"),n=ct.ToObject(e.raw,"bad raw value"),r=n.length,i=ct.ToLength(r);if(i<=0)return"";for(var o,a,s,u,l=[],c=0;c<i&&(o=ct.ToString(c),s=ct.ToString(n[o]),A(l,s),!(c+1>=i));)a=c+1<arguments.length?arguments[c+1]:"",u=ct.ToString(a),A(l,u),c+=1;return l.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&rt(String,"raw",jt.raw),m(String,jt);var Dt=function t(e,n){if(n<1)return"";if(n%2)return t(e,n-1)+e;var r=t(e,n/2);return r+r},Lt={repeat:function(t){var e=ct.ToString(ct.RequireObjectCoercible(this)),n=ct.ToInteger(t);if(n<0||n>=1/0)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return Dt(e,n)},startsWith:function(t){var e=ct.ToString(ct.RequireObjectCoercible(this));if(ct.IsRegExp(t))throw new TypeError('Cannot call method "startsWith" with a regex');var n,r=ct.ToString(t);arguments.length>1&&(n=arguments[1]);var i=R(ct.ToInteger(n),0);return C(e,i,i+r.length)===r},endsWith:function(t){var e=ct.ToString(ct.RequireObjectCoercible(this));if(ct.IsRegExp(t))throw new TypeError('Cannot call method "endsWith" with a regex');var n,r=ct.ToString(t),i=e.length;arguments.length>1&&(n=arguments[1]);var o=void 0===n?i:ct.ToInteger(n),a=j(R(o,0),i);return C(e,a-r.length,a)===r},includes:function(t){if(ct.IsRegExp(t))throw new TypeError('"includes" does not accept a RegExp');var e,n=ct.ToString(t);return arguments.length>1&&(e=arguments[1]),-1!==O(this,n,e)},codePointAt:function(t){var e=ct.ToString(ct.RequireObjectCoercible(this)),n=ct.ToInteger(t),r=e.length;if(n>=0&&n<r){var i=e.charCodeAt(n),o=n+1===r;if(i<55296||i>56319||o)return i;var a=e.charCodeAt(n+1);return a<56320||a>57343?i:1024*(i-55296)+(a-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&rt(String.prototype,"includes",Lt.includes),String.prototype.startsWith&&String.prototype.endsWith){var Nt=u(function(){return"/a/".startsWith(/a/)}),Bt=l(function(){return!1==="abc".startsWith("a",1/0)});Nt&&Bt||(rt(String.prototype,"startsWith",Lt.startsWith),rt(String.prototype,"endsWith",Lt.endsWith))}if(it){l(function(){var t=/a/;return t[q.match]=!1,"/a/".startsWith(t)})||rt(String.prototype,"startsWith",Lt.startsWith);l(function(){var t=/a/;return t[q.match]=!1,"/a/".endsWith(t)})||rt(String.prototype,"endsWith",Lt.endsWith);l(function(){var t=/a/;return t[q.match]=!1,"/a/".includes(t)})||rt(String.prototype,"includes",Lt.includes)}m(String.prototype,Lt);var Ft=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),Ut=new RegExp("(^["+Ft+"]+)|(["+Ft+"]+$)","g"),Wt=function(){return ct.ToString(ct.RequireObjectCoercible(this)).replace(Ut,"")},Vt=["","​","￾"].join(""),Ht=new RegExp("["+Vt+"]","g"),zt=/^[-+]0x[0-9a-f]+$/i,Gt=Vt.trim().length!==Vt.length;g(String.prototype,"trim",Wt,Gt);var Xt=function(t){return{value:t,done:0===arguments.length}},qt=function(t){ct.RequireObjectCoercible(t),this._s=ct.ToString(t),this._i=0};qt.prototype.next=function(){var t=this._s,e=this._i;if(void 0===t||e>=t.length)return this._s=void 0,Xt();var n,r,i=t.charCodeAt(e);return i<55296||i>56319||e+1===t.length?r=1:(n=t.charCodeAt(e+1),r=n<56320||n>57343?1:2),this._i=e+r,Xt(t.substr(e,r))},Ct(qt.prototype),Ct(String.prototype,function(){return new qt(this)});var Yt={from:function(t){var e,r=this;arguments.length>1&&(e=arguments[1]);var i,o;if(void 0===e)i=!1;else{if(!ct.IsCallable(e))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2]),i=!0}var a,s,u,l=void 0!==(et(t)||ct.GetMethod(t,ot));if(l){s=ct.IsConstructor(r)?Object(new r):[];var c,h,f=ct.GetIterator(t);for(u=0;;){if(!1===(c=ct.IteratorStep(f)))break;h=c.value;try{i&&(h=void 0===o?e(h,u):n(e,o,h,u)),s[u]=h}catch(t){throw ct.IteratorClose(f,!0),t}u+=1}a=u}else{var p=ct.ToObject(t);a=ct.ToLength(p.length),s=ct.IsConstructor(r)?Object(new r(a)):new Array(a);var d;for(u=0;u<a;++u)d=p[u],i&&(d=void 0===o?e(d,u):n(e,o,d,u)),kt(s,u,d)}return s.length=a,s},of:function(){for(var t=arguments.length,e=this,n=o(e)||!ct.IsCallable(e)?new Array(t):ct.Construct(e,[t]),r=0;r<t;++r)kt(n,r,arguments[r]);return n.length=t,n}};m(Array,Yt),Pt(Array),t=function(t,e){this.i=0,this.array=t,this.kind=e},m(t.prototype,{next:function(){var e=this.i,n=this.array;if(!(this instanceof t))throw new TypeError("Not an ArrayIterator");if(void 0!==n)for(var r=ct.ToLength(n.length);e<r;e++){var i,o=this.kind;return"key"===o?i=e:"value"===o?i=n[e]:"entry"===o&&(i=[e,n[e]]),this.i=e+1,Xt(i)}return this.array=void 0,Xt()}}),Ct(t.prototype),Array.of===Yt.of||function(){var t=function(t){this.length=t};t.prototype=[];var e=Array.of.apply(t,[1,2]);return e instanceof t&&2===e.length}()||rt(Array,"of",Yt.of);var Jt={copyWithin:function(t,e){var n,r=ct.ToObject(this),i=ct.ToLength(r.length),o=ct.ToInteger(t),a=ct.ToInteger(e),s=o<0?R(i+o,0):j(o,i),u=a<0?R(i+a,0):j(a,i);arguments.length>2&&(n=arguments[2]);var l=void 0===n?i:ct.ToInteger(n),c=l<0?R(i+l,0):j(l,i),h=j(c-u,i-s),f=1;for(u<s&&s<u+h&&(f=-1,u+=h-1,s+=h-1);h>0;)u in r?r[s]=r[u]:delete r[s],u+=f,s+=f,h-=1;return r},fill:function(t){var e;arguments.length>1&&(e=arguments[1]);var n;arguments.length>2&&(n=arguments[2]);var r=ct.ToObject(this),i=ct.ToLength(r.length);e=ct.ToInteger(void 0===e?0:e),n=ct.ToInteger(void 0===n?i:n);for(var o=e<0?R(i+e,0):j(e,i),a=n<0?i+n:n,s=o;s<i&&s<a;++s)r[s]=t;return r},find:function(t){var e=ct.ToObject(this),r=ct.ToLength(e.length);if(!ct.IsCallable(t))throw new TypeError("Array#find: predicate must be a function");for(var i,o=arguments.length>1?arguments[1]:null,a=0;a<r;a++)if(i=e[a],o){if(n(t,o,i,a,e))return i}else if(t(i,a,e))return i},findIndex:function(t){var e=ct.ToObject(this),r=ct.ToLength(e.length);if(!ct.IsCallable(t))throw new TypeError("Array#findIndex: predicate must be a function");for(var i=arguments.length>1?arguments[1]:null,o=0;o<r;o++)if(i){if(n(t,i,e[o],o,e))return o}else if(t(e[o],o,e))return o;return-1},keys:function(){return new t(this,"key")},values:function(){return new t(this,"value")},entries:function(){return new t(this,"entry")}};if(Array.prototype.keys&&!ct.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!ct.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ot]&&(m(Array.prototype,{values:Array.prototype[ot]}),nt.symbol(q.unscopables)&&(Array.prototype[q.unscopables].values=!0)),f&&Array.prototype.values&&"values"!==Array.prototype.values.name){var Kt=Array.prototype.values;rt(Array.prototype,"values",function(){return ct.Call(Kt,this,arguments)}),g(Array.prototype,ot,Array.prototype.values,!0)}m(Array.prototype,Jt),1/[!0].indexOf(!0,-0)<0&&g(Array.prototype,"indexOf",function(t){var e=M(this,arguments);return 0===e&&1/e<0?0:e},!0),Ct(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&Ct(Object.getPrototypeOf([].values()));var Zt=function(){return l(function(){return 0===Array.from({length:-1}).length})}(),Qt=function(){var t=Array.from([0].entries());return 1===t.length&&o(t[0])&&0===t[0][0]&&0===t[0][1]}();if(Zt&&Qt||rt(Array,"from",Yt.from),!function(){return l(function(){return Array.from([0],void 0)})}()){var $t=Array.from;rt(Array,"from",function(t){return arguments.length>1&&void 0!==arguments[1]?ct.Call($t,this,arguments):n($t,this,t)})}var te=-(Math.pow(2,32)-1),ee=function(t,e){var r={length:te};return r[e?(r.length>>>0)-1:0]=!0,l(function(){return n(t,r,function(){throw new RangeError("should not reach here")},[]),!0})};if(!ee(Array.prototype.forEach)){var ne=Array.prototype.forEach;rt(Array.prototype,"forEach",function(t){return ct.Call(ne,this.length>=0?this:[],arguments)})}if(!ee(Array.prototype.map)){var re=Array.prototype.map;rt(Array.prototype,"map",function(t){return ct.Call(re,this.length>=0?this:[],arguments)})}if(!ee(Array.prototype.filter)){var ie=Array.prototype.filter;rt(Array.prototype,"filter",function(t){return ct.Call(ie,this.length>=0?this:[],arguments)})}if(!ee(Array.prototype.some)){var oe=Array.prototype.some;rt(Array.prototype,"some",function(t){return ct.Call(oe,this.length>=0?this:[],arguments)})}if(!ee(Array.prototype.every)){var ae=Array.prototype.every;rt(Array.prototype,"every",function(t){return ct.Call(ae,this.length>=0?this:[],arguments)})}if(!ee(Array.prototype.reduce)){var se=Array.prototype.reduce;rt(Array.prototype,"reduce",function(t){return ct.Call(se,this.length>=0?this:[],arguments)})}if(!ee(Array.prototype.reduceRight,!0)){var ue=Array.prototype.reduceRight;rt(Array.prototype,"reduceRight",function(t){return ct.Call(ue,this.length>=0?this:[],arguments)})}var le=8!==Number("0o10"),ce=2!==Number("0b10"),he=v(Vt,function(t){return 0===Number(t+0+t)});if(le||ce||he){var fe=Number,pe=/^0b[01]+$/i,de=/^0o[0-7]+$/i,ye=pe.test.bind(pe),ve=de.test.bind(de),ge=function(t){var e;if("function"==typeof t.valueOf&&(e=t.valueOf(),nt.primitive(e)))return e;if("function"==typeof t.toString&&(e=t.toString(),nt.primitive(e)))return e;throw new TypeError("No default value")},me=Ht.test.bind(Ht),be=zt.test.bind(zt),_e=function(){var t=function(e){var n;"string"==typeof(n=arguments.length>0?nt.primitive(e)?e:ge(e):0)&&(n=ct.Call(Wt,n),ye(n)?n=parseInt(C(n,2),2):ve(n)?n=parseInt(C(n,2),8):(me(n)||be(n))&&(n=NaN));var r=this,i=l(function(){return fe.prototype.valueOf.call(r),!0});return r instanceof t&&!i?new fe(n):fe(n)};return t}();Ot(fe,_e,{}),m(_e,{NaN:fe.NaN,MAX_VALUE:fe.MAX_VALUE,MIN_VALUE:fe.MIN_VALUE,NEGATIVE_INFINITY:fe.NEGATIVE_INFINITY,POSITIVE_INFINITY:fe.POSITIVE_INFINITY}),Number=_e,w.redefine(S,"Number",_e)}var we=Math.pow(2,53)-1;m(Number,{MAX_SAFE_INTEGER:we,MIN_SAFE_INTEGER:-we,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:K,isInteger:function(t){return K(t)&&ct.ToInteger(t)===t},isSafeInteger:function(t){return Number.isInteger(t)&&L(t)<=Number.MAX_SAFE_INTEGER},isNaN:J}),g(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt),1===[,1].find(function(){return!0})&&rt(Array.prototype,"find",Jt.find),0!==[,1].findIndex(function(){return!0})&&rt(Array.prototype,"findIndex",Jt.findIndex);var xe=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),Te=function(t,e){h&&xe(t,e)&&Object.defineProperty(t,e,{enumerable:!1})},Se=function(){for(var t=Number(this),e=arguments.length,n=e-t,r=new Array(n<0?0:n),i=t;i<e;++i)r[i-t]=arguments[i];return r},Ee=function(t){return function(e,n){return e[n]=t[n],e}},Oe=function(t,e){var n,r=a(Object(e));return ct.IsCallable(Object.getOwnPropertySymbols)&&(n=y(Object.getOwnPropertySymbols(Object(e)),xe(e))),d(P(r,n||[]),Ee(e),t)},Me={assign:function(t,e){var n=ct.ToObject(t,"Cannot convert undefined or null to object");return d(ct.Call(Se,1,arguments),Oe,n)},is:function(t,e){return ct.SameValue(t,e)}};if(Object.assign&&Object.preventExtensions&&function(){var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}}()&&rt(Object,"assign",Me.assign),m(Object,Me),h){var Pe={setPrototypeOf:function(t,e){var r,i=function(t,e){if(!ct.TypeIsObject(t))throw new TypeError("cannot set prototype on a non-object");if(null!==e&&!ct.TypeIsObject(e))throw new TypeError("can only set prototype to an object or null"+e)},o=function(t,e){return i(t,e),n(r,t,e),t};try{r=t.getOwnPropertyDescriptor(t.prototype,"__proto__").set,n(r,{},null)}catch(e){if(t.prototype!=={}.__proto__)return;r=function(t){this.__proto__=t},o.polyfill=o(o({},null),t.prototype)instanceof t}return o}(Object)};m(Object,Pe)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&function(){var t=Object.create(null),e=Object.getPrototypeOf,n=Object.setPrototypeOf;Object.getPrototypeOf=function(n){var r=e(n);return r===t?null:r},Object.setPrototypeOf=function(e,r){return n(e,null===r?t:r)},Object.setPrototypeOf.polyfill=!1}(),!!u(function(){return Object.keys("foo")})){var Ce=Object.keys;rt(Object,"keys",function(t){return Ce(ct.ToObject(t))}),a=Object.keys}if(u(function(){return Object.keys(/a/g)})){var Ae=Object.keys;rt(Object,"keys",function(t){if(nt.regex(t)){var e=[];for(var n in t)U(t,n)&&A(e,n);return e}return Ae(t)}),a=Object.keys}if(Object.getOwnPropertyNames){if(!!u(function(){return Object.getOwnPropertyNames("foo")})){var ke="object"===("undefined"==typeof window?"undefined":s(window))?Object.getOwnPropertyNames(window):[],Ie=Object.getOwnPropertyNames;rt(Object,"getOwnPropertyNames",function(t){var e=ct.ToObject(t);if("[object Window]"===b(e))try{return Ie(e)}catch(t){return P([],ke)}return Ie(e)})}}if(Object.getOwnPropertyDescriptor){if(!!u(function(){return Object.getOwnPropertyDescriptor("foo","bar")})){var Re=Object.getOwnPropertyDescriptor;rt(Object,"getOwnPropertyDescriptor",function(t,e){return Re(ct.ToObject(t),e)})}}if(Object.seal){if(!!u(function(){return Object.seal("foo")})){var je=Object.seal;rt(Object,"seal",function(t){return ct.TypeIsObject(t)?je(t):t})}}if(Object.isSealed){if(!!u(function(){return Object.isSealed("foo")})){var De=Object.isSealed;rt(Object,"isSealed",function(t){return!ct.TypeIsObject(t)||De(t)})}}if(Object.freeze){if(!!u(function(){return Object.freeze("foo")})){var Le=Object.freeze;rt(Object,"freeze",function(t){return ct.TypeIsObject(t)?Le(t):t})}}if(Object.isFrozen){if(!!u(function(){return Object.isFrozen("foo")})){var Ne=Object.isFrozen;rt(Object,"isFrozen",function(t){return!ct.TypeIsObject(t)||Ne(t)})}}if(Object.preventExtensions){if(!!u(function(){return Object.preventExtensions("foo")})){var Be=Object.preventExtensions;rt(Object,"preventExtensions",function(t){return ct.TypeIsObject(t)?Be(t):t})}}if(Object.isExtensible){if(!!u(function(){return Object.isExtensible("foo")})){var Fe=Object.isExtensible;rt(Object,"isExtensible",function(t){return!!ct.TypeIsObject(t)&&Fe(t)})}}if(Object.getPrototypeOf){if(!!u(function(){return Object.getPrototypeOf("foo")})){var Ue=Object.getPrototypeOf;rt(Object,"getPrototypeOf",function(t){return Ue(ct.ToObject(t))})}}var We=h&&function(){var t=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return t&&ct.IsCallable(t.get)}();if(h&&!We){var Ve=function(){if(!ct.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t};w.getter(RegExp.prototype,"flags",Ve)}var He=h&&l(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),ze=it&&h&&function(){var t=/./;return t[q.match]=!1,RegExp(t)===t}(),Ge=l(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),Xe=Ge&&l(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!Ge||!Xe){var qe=RegExp.prototype.toString;g(RegExp.prototype,"toString",function(){var t=ct.RequireObjectCoercible(this);return nt.regex(t)?n(qe,t):"/"+st(t.source)+"/"+st(t.flags)},!0),w.preserveToString(RegExp.prototype.toString,qe)}if(h&&(!He||ze)){var Ye=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,Je=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},Ke=function(){return this.source},Ze=ct.IsCallable(Je.get)?Je.get:Ke,Qe=RegExp,$e=function(){return function t(e,n){var r=ct.IsRegExp(e);if(!(this instanceof t)&&r&&void 0===n&&e.constructor===t)return e;var i=e,o=n;return nt.regex(e)?(i=ct.Call(Ze,e),o=void 0===n?ct.Call(Ye,e):n,new t(i,o)):(r&&(i=e.source,o=void 0===n?e.flags:n),new Qe(e,n))}}();Ot(Qe,$e,{$input:!0}),RegExp=$e,w.redefine(S,"RegExp",$e)}if(h){var tn={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};p(a(tn),function(t){t in RegExp&&!(tn[t]in RegExp)&&w.getter(RegExp,tn[t],function(){return RegExp[t]})})}Pt(RegExp);var en=1/Number.EPSILON,nn=function(t){return t+en-en},rn=Math.pow(2,-23),on=Math.pow(2,127)*(2-rn),an=Math.pow(2,-126),sn=Math.E,un=Math.LOG2E,ln=Math.LOG10E,cn=Number.prototype.clz;delete Number.prototype.clz;var hn={acosh:function(t){var e=Number(t);if(J(e)||t<1)return NaN;if(1===e)return 0;if(e===1/0)return e;var n=1/(e*e);if(e<2)return Q(e-1+F(1-n)*e);var r=e/2;return Q(r+F(1-n)*r-1)+1/un},asinh:function(t){var e=Number(t);if(0===e||!E(e))return e;var n=L(e),r=n*n,i=Z(e);return n<1?i*Q(n+r/(F(r+1)+1)):i*(Q(n/2+F(1+1/r)*n/2-1)+1/un)},atanh:function(t){var e=Number(t);if(0===e)return e;if(-1===e)return-1/0;if(1===e)return 1/0;if(J(e)||e<-1||e>1)return NaN;var n=L(e);return Z(e)*Q(2*n/(1-n))/2},cbrt:function(t){var e=Number(t);if(0===e)return e;var n,r=e<0;return r&&(e=-e),e===1/0?n=1/0:(n=N(B(e)/3),n=(e/(n*n)+2*n)/3),r?-n:n},clz32:function(t){var e=Number(t),n=ct.ToUint32(e);return 0===n?32:cn?ct.Call(cn,n):31-D(B(n+.5)*un)},cosh:function(t){var e=Number(t);if(0===e)return 1;if(J(e))return NaN;if(!E(e))return 1/0;var n=N(L(e)-1);return(n+1/(n*sn*sn))*(sn/2)},expm1:function(t){var e=Number(t);if(e===-1/0)return-1;if(!E(e)||0===e)return e;if(L(e)>.5)return N(e)-1;for(var n=e,r=0,i=1;r+n!==r;)r+=n,i+=1,n*=e/i;return r},hypot:function(t,e){for(var n=0,r=0,i=0;i<arguments.length;++i){var o=L(Number(arguments[i]));r<o?(n*=r/o*(r/o),n+=1,r=o):n+=o>0?o/r*(o/r):o}return r===1/0?1/0:r*F(n)},log2:function(t){return B(t)*un},log10:function(t){return B(t)*ln},log1p:Q,sign:Z,sinh:function(t){var e=Number(t);if(!E(e)||0===e)return e;var n=L(e);if(n<1){var r=Math.expm1(n);return Z(e)*r*(1+1/(r+1))/2}var i=N(n-1);return Z(e)*(i-1/(i*sn*sn))*(sn/2)},tanh:function(t){var e=Number(t);return J(e)||0===e?e:e>=20?1:e<=-20?-1:(Math.expm1(e)-Math.expm1(-e))/(N(e)+N(-e))},trunc:function(t){var e=Number(t);return e<0?-D(-e):D(e)},imul:function(t,e){var n=ct.ToUint32(t),r=ct.ToUint32(e),i=n>>>16&65535,o=65535&n,a=r>>>16&65535,s=65535&r;return o*s+(i*s+o*a<<16>>>0)|0},fround:function(t){var e=Number(t);if(0===e||e===1/0||e===-1/0||J(e))return e;var n=Z(e),r=L(e);if(r<an)return n*nn(r/an/rn)*an*rn;var i=(1+rn/Number.EPSILON)*r,o=i-(i-r);return o>on||J(o)?n*(1/0):n*o}},fn=function(t,e,n){return L(1-t/e)/Number.EPSILON<(n||8)};m(Math,hn),g(Math,"sinh",hn.sinh,Math.sinh(710)===1/0),g(Math,"cosh",hn.cosh,Math.cosh(710)===1/0),g(Math,"log1p",hn.log1p,-1e-17!==Math.log1p(-1e-17)),g(Math,"asinh",hn.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),g(Math,"asinh",hn.asinh,Math.asinh(1e300)===1/0),g(Math,"atanh",hn.atanh,0===Math.atanh(1e-300)),g(Math,"tanh",hn.tanh,-2e-17!==Math.tanh(-2e-17)),g(Math,"acosh",hn.acosh,Math.acosh(Number.MAX_VALUE)===1/0),g(Math,"acosh",hn.acosh,!fn(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON))),g(Math,"cbrt",hn.cbrt,!fn(Math.cbrt(1e-300),1e-100)),g(Math,"sinh",hn.sinh,-2e-17!==Math.sinh(-2e-17));var pn=Math.expm1(10);g(Math,"expm1",hn.expm1,pn>22025.465794806718||pn<22025.465794806718);var dn=Math.round,yn=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),vn=en+1,gn=2*en-1,mn=[vn,gn].every(function(t){return Math.round(t)===t});g(Math,"round",function(t){var e=D(t),n=-1===e?-0:e+1;return t-e<.5?e:n},!yn||!mn),w.preserveToString(Math.round,dn);var bn=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=hn.imul,w.preserveToString(Math.imul,bn)),2!==Math.imul.length&&rt(Math,"imul",function(t,e){return ct.Call(bn,Math,arguments)});var _n=function(){var t=S.setTimeout;if("function"==typeof t||"object"===(void 0===t?"undefined":s(t))){ct.IsPromise=function(t){return!!ct.TypeIsObject(t)&&void 0!==t._promise};var e,r=function(t){if(!ct.IsConstructor(t))throw new TypeError("Bad promise constructor");var e=this,n=function(t,n){if(void 0!==e.resolve||void 0!==e.reject)throw new TypeError("Bad Promise implementation!");e.resolve=t,e.reject=n};if(e.resolve=void 0,e.reject=void 0,e.promise=new t(n),!ct.IsCallable(e.resolve)||!ct.IsCallable(e.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&ct.IsCallable(window.postMessage)&&(e=function(){var t=[],e=function(e){A(t,e),window.postMessage("zero-timeout-message","*")},n=function(e){if(e.source===window&&"zero-timeout-message"===e.data){if(e.stopPropagation(),0===t.length)return;I(t)()}};return window.addEventListener("message",n,!0),e});var o,a,u=ct.IsCallable(S.setImmediate)?S.setImmediate:"object"===(void 0===i?"undefined":s(i))&&i.nextTick?i.nextTick:function(){var t=S.Promise,e=t&&t.resolve&&t.resolve();return e&&function(t){return e.then(t)}}()||(ct.IsCallable(e)?e():function(e){t(e,0)}),l=function(t){return t},c=function(t){throw t},h={},f=function(t,e,n){u(function(){p(t,e,n)})},p=function(t,e,n){var r,i;if(e===h)return t(n);try{r=t(n),i=e.resolve}catch(t){r=t,i=e.reject}i(r)},d=function(t,e){var n=t._promise,r=n.reactionLength;if(r>0&&(f(n.fulfillReactionHandler0,n.reactionCapability0,e),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var i=1,o=0;i<r;i++,o+=3)f(n[o+0],n[o+2],e),t[o+0]=void 0,t[o+1]=void 0,t[o+2]=void 0;n.result=e,n.state=1,n.reactionLength=0},y=function(t,e){var n=t._promise,r=n.reactionLength;if(r>0&&(f(n.rejectReactionHandler0,n.reactionCapability0,e),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var i=1,o=0;i<r;i++,o+=3)f(n[o+1],n[o+2],e),t[o+0]=void 0,t[o+1]=void 0,t[o+2]=void 0;n.result=e,n.state=2,n.reactionLength=0},v=function(t){var e=!1;return{resolve:function(n){var r;if(!e){if(e=!0,n===t)return y(t,new TypeError("Self resolution"));if(!ct.TypeIsObject(n))return d(t,n);try{r=n.then}catch(e){return y(t,e)}if(!ct.IsCallable(r))return d(t,n);u(function(){b(t,n,r)})}},reject:function(n){if(!e)return e=!0,y(t,n)}}},g=function(t,e,r,i){t===a?n(t,e,r,i,h):n(t,e,r,i)},b=function(t,e,n){var r=v(t),i=r.resolve,o=r.reject;try{g(n,e,i,o)}catch(t){o(t)}},_=function(){var t=function(e){if(!(this instanceof t))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!ct.IsCallable(e))throw new TypeError("not a valid resolver");var n=It(this,t,o,{_promise:{result:void 0,state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),r=v(n),i=r.reject;try{e(r.resolve,i)}catch(t){i(t)}return n};return t}();o=_.prototype;var w=function(t,e,n,r){var i=!1;return function(o){if(!i&&(i=!0,e[t]=o,0==--r.count)){(0,n.resolve)(e)}}},x=function(t,e,n){for(var r,i,o=t.iterator,a=[],s={count:1},u=0;;){try{if(!1===(r=ct.IteratorStep(o))){t.done=!0;break}i=r.value}catch(e){throw t.done=!0,e}a[u]=void 0;var l=e.resolve(i),c=w(u,a,n,s);s.count+=1,g(l.then,l,c,n.reject),u+=1}if(0==--s.count){(0,n.resolve)(a)}return n.promise},T=function(t,e,n){for(var r,i,o,a=t.iterator;;){try{if(!1===(r=ct.IteratorStep(a))){t.done=!0;break}i=r.value}catch(e){throw t.done=!0,e}o=e.resolve(i),g(o.then,o,n.resolve,n.reject)}return n.promise};return m(_,{all:function(t){var e=this;if(!ct.TypeIsObject(e))throw new TypeError("Promise is not object");var n,i,o=new r(e);try{return n=ct.GetIterator(t),i={iterator:n,done:!1},x(i,e,o)}catch(t){var a=t;if(i&&!i.done)try{ct.IteratorClose(n,!0)}catch(t){a=t}var s=o.reject;return s(a),o.promise}},race:function(t){var e=this;if(!ct.TypeIsObject(e))throw new TypeError("Promise is not object");var n,i,o=new r(e);try{return n=ct.GetIterator(t),i={iterator:n,done:!1},T(i,e,o)}catch(t){var a=t;if(i&&!i.done)try{ct.IteratorClose(n,!0)}catch(t){a=t}var s=o.reject;return s(a),o.promise}},reject:function(t){var e=this;if(!ct.TypeIsObject(e))throw new TypeError("Bad promise constructor");var n=new r(e);return(0,n.reject)(t),n.promise},resolve:function(t){var e=this;if(!ct.TypeIsObject(e))throw new TypeError("Bad promise constructor");if(ct.IsPromise(t)){var n=t.constructor;if(n===e)return t}var i=new r(e);return(0,i.resolve)(t),i.promise}}),m(o,{catch:function(t){return this.then(null,t)},then:function(t,e){var n=this;if(!ct.IsPromise(n))throw new TypeError("not a promise");var i,o=ct.SpeciesConstructor(n,_);i=arguments.length>2&&arguments[2]===h&&o===_?h:new r(o);var a,s=ct.IsCallable(t)?t:l,u=ct.IsCallable(e)?e:c,p=n._promise;if(0===p.state){if(0===p.reactionLength)p.fulfillReactionHandler0=s,p.rejectReactionHandler0=u,p.reactionCapability0=i;else{var d=3*(p.reactionLength-1);p[d+0]=s,p[d+1]=u,p[d+2]=i}p.reactionLength+=1}else if(1===p.state)a=p.result,f(s,i,a);else{if(2!==p.state)throw new TypeError("unexpected Promise state");a=p.result,f(u,i,a)}return i.promise}}),h=new r(_),a=o.then,_}}();if(S.Promise&&(delete S.Promise.accept,delete S.Promise.defer,delete S.Promise.prototype.chain),"function"==typeof _n){m(S,{Promise:_n});var wn=T(S.Promise,function(t){return t.resolve(42).then(function(){})instanceof t}),xn=!u(function(){return S.Promise.reject(42).then(null,5).then(null,W)}),Tn=u(function(){return S.Promise.call(3,W)}),Sn=function(t){var e=t.resolve(5);e.constructor={};var n=t.resolve(e);try{n.then(null,W).then(null,W)}catch(t){return!0}return e===n}(S.Promise),En=h&&function(){var t=0,e=Object.defineProperty({},"then",{get:function(){t+=1}});return Promise.resolve(e),1===t}(),On=function t(e){var n=new Promise(e);e(3,function(){}),this.then=n.then,this.constructor=t};On.prototype=Promise.prototype,On.all=Promise.all;var Mn=l(function(){return!!On.all([1,2])});if(wn&&xn&&Tn&&!Sn&&En&&!Mn||(Promise=_n,rt(S,"Promise",_n)),1!==Promise.all.length){var Pn=Promise.all;rt(Promise,"all",function(t){return ct.Call(Pn,this,arguments)})}if(1!==Promise.race.length){var Cn=Promise.race;rt(Promise,"race",function(t){return ct.Call(Cn,this,arguments)})}if(1!==Promise.resolve.length){var An=Promise.resolve;rt(Promise,"resolve",function(t){return ct.Call(An,this,arguments)})}if(1!==Promise.reject.length){var kn=Promise.reject;rt(Promise,"reject",function(t){return ct.Call(kn,this,arguments)})}Te(Promise,"all"),Te(Promise,"race"),Te(Promise,"resolve"),Te(Promise,"reject"),Pt(Promise)}var In=function(t){var e=a(d(t,function(t,e){return t[e]=!0,t},{}));return t.join(":")===e.join(":")},Rn=In(["z","a","bb"]),jn=In(["z",1,"a","3",2]);if(h){var Dn=function(t,e){return e||Rn?lt(t)?"^"+ct.ToString(t):"string"==typeof t?"$"+t:"number"==typeof t?jn?t:"n"+t:"boolean"==typeof t?"b"+t:null:null},Ln=function(){return Object.create?Object.create(null):{}},Nn=function(t,e,r){if(o(r)||nt.string(r))p(r,function(t){if(!ct.TypeIsObject(t))throw new TypeError("Iterator value "+t+" is not an entry object");e.set(t[0],t[1])});else if(r instanceof t)n(t.prototype.forEach,r,function(t,n){e.set(n,t)});else{var i,a;if(!lt(r)){if(a=e.set,!ct.IsCallable(a))throw new TypeError("bad map");i=ct.GetIterator(r)}if(void 0!==i)for(;;){var s=ct.IteratorStep(i);if(!1===s)break;var u=s.value;try{if(!ct.TypeIsObject(u))throw new TypeError("Iterator value "+u+" is not an entry object");n(a,e,u[0],u[1])}catch(t){throw ct.IteratorClose(i,!0),t}}}},Bn=function(t,e,r){if(o(r)||nt.string(r))p(r,function(t){e.add(t)});else if(r instanceof t)n(t.prototype.forEach,r,function(t){e.add(t)});else{var i,a;if(!lt(r)){if(a=e.add,!ct.IsCallable(a))throw new TypeError("bad set");i=ct.GetIterator(r)}if(void 0!==i)for(;;){var s=ct.IteratorStep(i);if(!1===s)break;var u=s.value;try{n(a,e,u)}catch(t){throw ct.IteratorClose(i,!0),t}}}},Fn={Map:function(){var t={},e=function(t,e){this.key=t,this.value=e,this.next=null,this.prev=null};e.prototype.isRemoved=function(){return this.key===t};var r=function(t){return!!t._es6map},i=function(t,e){if(!ct.TypeIsObject(t)||!r(t))throw new TypeError("Method Map.prototype."+e+" called on incompatible receiver "+ct.ToString(t))},o=function(t,e){i(t,"[[MapIterator]]"),this.head=t._head,this.i=this.head,this.kind=e};o.prototype={isMapIterator:!0,next:function(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var t=this.i,e=this.kind,n=this.head;if(void 0===this.i)return Xt();for(;t.isRemoved()&&t!==n;)t=t.prev;for(var r;t.next!==n;)if(t=t.next,!t.isRemoved())return r="key"===e?t.key:"value"===e?t.value:[t.key,t.value],this.i=t,Xt(r);return this.i=void 0,Xt()}},Ct(o.prototype);var a,s=function t(){if(!(this instanceof t))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var n=It(this,t,a,{_es6map:!0,_head:null,_map:V?new V:null,_size:0,_storage:Ln()}),r=new e(null,null);return r.next=r.prev=r,n._head=r,arguments.length>0&&Nn(t,n,arguments[0]),n};return a=s.prototype,w.getter(a,"size",function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size}),m(a,{get:function(t){i(this,"get");var e,n=Dn(t,!0);if(null!==n)return e=this._storage[n],e?e.value:void 0;if(this._map)return e=z.call(this._map,t),e?e.value:void 0;for(var r=this._head,o=r;(o=o.next)!==r;)if(ct.SameValueZero(o.key,t))return o.value},has:function(t){i(this,"has");var e=Dn(t,!0);if(null!==e)return void 0!==this._storage[e];if(this._map)return G.call(this._map,t);for(var n=this._head,r=n;(r=r.next)!==n;)if(ct.SameValueZero(r.key,t))return!0;return!1},set:function(t,n){i(this,"set");var r,o=this._head,a=o,s=Dn(t,!0);if(null!==s){if(void 0!==this._storage[s])return this._storage[s].value=n,this;r=this._storage[s]=new e(t,n),a=o.prev}else this._map&&(G.call(this._map,t)?z.call(this._map,t).value=n:(r=new e(t,n),X.call(this._map,t,r),a=o.prev));for(;(a=a.next)!==o;)if(ct.SameValueZero(a.key,t))return a.value=n,this;return r=r||new e(t,n),ct.SameValue(-0,t)&&(r.key=0),r.next=this._head,r.prev=this._head.prev,r.prev.next=r,r.next.prev=r,this._size+=1,this},delete:function(e){i(this,"delete");var n=this._head,r=n,o=Dn(e,!0);if(null!==o){if(void 0===this._storage[o])return!1;r=this._storage[o].prev,delete this._storage[o]}else if(this._map){if(!G.call(this._map,e))return!1;r=z.call(this._map,e).prev,H.call(this._map,e)}for(;(r=r.next)!==n;)if(ct.SameValueZero(r.key,e))return r.key=t,r.value=t,r.prev.next=r.next,r.next.prev=r.prev,this._size-=1,!0;return!1},clear:function(){i(this,"clear"),this._map=V?new V:null,this._size=0,this._storage=Ln();for(var e=this._head,n=e,r=n.next;(n=r)!==e;)n.key=t,n.value=t,r=n.next,n.next=n.prev=e;e.next=e.prev=e},keys:function(){return i(this,"keys"),new o(this,"key")},values:function(){return i(this,"values"),new o(this,"value")},entries:function(){return i(this,"entries"),new o(this,"key+value")},forEach:function(t){i(this,"forEach");for(var e=arguments.length>1?arguments[1]:null,r=this.entries(),o=r.next();!o.done;o=r.next())e?n(t,e,o.value[1],o.value[0],this):t(o.value[1],o.value[0],this)}}),Ct(a,a.entries),s}(),Set:function(){var t,e=function(t){return t._es6set&&void 0!==t._storage},r=function(t,n){if(!ct.TypeIsObject(t)||!e(t))throw new TypeError("Set.prototype."+n+" called on incompatible receiver "+ct.ToString(t))},i=function e(){if(!(this instanceof e))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var n=It(this,e,t,{_es6set:!0,"[[SetData]]":null,_storage:Ln()});if(!n._es6set)throw new TypeError("bad set");return arguments.length>0&&Bn(e,n,arguments[0]),n};t=i.prototype;var o=function(t){var e=t;if("^null"===e)return null;if("^undefined"!==e){var n=e.charAt(0);return"$"===n?C(e,1):"n"===n?+C(e,1):"b"===n?"btrue"===e:+e}},s=function(t){if(!t["[[SetData]]"]){var e=new Fn.Map;t["[[SetData]]"]=e,p(a(t._storage),function(t){var n=o(t);e.set(n,n)}),t["[[SetData]]"]=e}t._storage=null};w.getter(i.prototype,"size",function(){return r(this,"size"),this._storage?a(this._storage).length:(s(this),this["[[SetData]]"].size)}),m(i.prototype,{has:function(t){r(this,"has");var e;return this._storage&&null!==(e=Dn(t))?!!this._storage[e]:(s(this),this["[[SetData]]"].has(t))},add:function(t){r(this,"add");var e;return this._storage&&null!==(e=Dn(t))?(this._storage[e]=!0,this):(s(this),this["[[SetData]]"].set(t,t),this)},delete:function(t){r(this,"delete");var e;if(this._storage&&null!==(e=Dn(t))){var n=U(this._storage,e);return delete this._storage[e]&&n}return s(this),this["[[SetData]]"].delete(t)},clear:function(){r(this,"clear"),this._storage&&(this._storage=Ln()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){return r(this,"values"),s(this),new u(this["[[SetData]]"].values())},entries:function(){return r(this,"entries"),s(this),new u(this["[[SetData]]"].entries())},forEach:function(t){r(this,"forEach");var e=arguments.length>1?arguments[1]:null,i=this;s(i),this["[[SetData]]"].forEach(function(r,o){e?n(t,e,o,o,i):t(o,o,i)})}}),g(i.prototype,"keys",i.prototype.values,!0),Ct(i.prototype,i.prototype.values);var u=function(t){this.it=t};return u.prototype={isSetIterator:!0,next:function(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}},Ct(u.prototype),i}()};if(S.Set&&!Set.prototype.delete&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys)&&(S.Set=Fn.Set),S.Map||S.Set){l(function(){return 2===new Map([[1,2]]).get(1)})||(S.Map=function t(){if(!(this instanceof t))throw new TypeError('Constructor Map requires "new"');var e=new V;return arguments.length>0&&Nn(t,e,arguments[0]),delete e.constructor,Object.setPrototypeOf(e,S.Map.prototype),e},S.Map.prototype=x(V.prototype),g(S.Map.prototype,"constructor",S.Map,!0),w.preserveToString(S.Map,V));var Un=new Map,Wn=function(){var t=new Map([[1,0],[2,0],[3,0],[4,0]]);return t.set(-0,t),t.get(0)===t&&t.get(-0)===t&&t.has(0)&&t.has(-0)}(),Vn=Un.set(1,2)===Un;Wn&&Vn||rt(Map.prototype,"set",function(t,e){return n(X,this,0===t?0:t,e),this}),Wn||(m(Map.prototype,{get:function(t){return n(z,this,0===t?0:t)},has:function(t){return n(G,this,0===t?0:t)}},!0),w.preserveToString(Map.prototype.get,z),w.preserveToString(Map.prototype.has,G));var Hn=new Set,zn=Set.prototype.delete&&Set.prototype.add&&Set.prototype.has&&function(t){return t.delete(0),t.add(-0),!t.has(0)}(Hn),Gn=Hn.add(1)===Hn;if(!zn||!Gn){var Xn=Set.prototype.add;Set.prototype.add=function(t){return n(Xn,this,0===t?0:t),this},w.preserveToString(Set.prototype.add,Xn)}if(!zn){var qn=Set.prototype.has;Set.prototype.has=function(t){return n(qn,this,0===t?0:t)},w.preserveToString(Set.prototype.has,qn);var Yn=Set.prototype.delete;Set.prototype.delete=function(t){return n(Yn,this,0===t?0:t)},w.preserveToString(Set.prototype.delete,Yn)}var Jn=T(S.Map,function(t){var e=new t([]);return e.set(42,42),e instanceof t}),Kn=Object.setPrototypeOf&&!Jn,Zn=function(){try{return!(S.Map()instanceof S.Map)}catch(t){return t instanceof TypeError}}();0===S.Map.length&&!Kn&&Zn||(S.Map=function t(){if(!(this instanceof t))throw new TypeError('Constructor Map requires "new"');var e=new V;return arguments.length>0&&Nn(t,e,arguments[0]),delete e.constructor,Object.setPrototypeOf(e,t.prototype),e},S.Map.prototype=V.prototype,g(S.Map.prototype,"constructor",S.Map,!0),w.preserveToString(S.Map,V));var Qn=T(S.Set,function(t){var e=new t([]);return e.add(42,42),e instanceof t}),$n=Object.setPrototypeOf&&!Qn,tr=function(){try{return!(S.Set()instanceof S.Set)}catch(t){return t instanceof TypeError}}();if(0!==S.Set.length||$n||!tr){var er=S.Set;S.Set=function t(){if(!(this instanceof t))throw new TypeError('Constructor Set requires "new"');var e=new er;return arguments.length>0&&Bn(t,e,arguments[0]),delete e.constructor,Object.setPrototypeOf(e,t.prototype),e},S.Set.prototype=er.prototype,g(S.Set.prototype,"constructor",S.Set,!0),w.preserveToString(S.Set,er)}var nr=new S.Map,rr=!l(function(){return nr.keys().next().done});if(("function"!=typeof S.Map.prototype.clear||0!==(new S.Set).size||0!==nr.size||"function"!=typeof S.Map.prototype.keys||"function"!=typeof S.Set.prototype.keys||"function"!=typeof S.Map.prototype.forEach||"function"!=typeof S.Set.prototype.forEach||c(S.Map)||c(S.Set)||"function"!=typeof nr.keys().next||rr||!Jn)&&m(S,{Map:Fn.Map,Set:Fn.Set},!0),S.Set.prototype.keys!==S.Set.prototype.values&&g(S.Set.prototype,"keys",S.Set.prototype.values,!0),Ct(Object.getPrototypeOf((new S.Map).keys())),Ct(Object.getPrototypeOf((new S.Set).keys())),f&&"has"!==S.Set.prototype.has.name){var ir=S.Set.prototype.has;rt(S.Set.prototype,"has",function(t){return n(ir,this,t)})}}m(S,Fn),Pt(S.Map),Pt(S.Set)}var or=function(t){if(!ct.TypeIsObject(t))throw new TypeError("target must be an object")},ar={apply:function(){return ct.Call(ct.Call,null,arguments)},construct:function(t,e){if(!ct.IsConstructor(t))throw new TypeError("First argument must be a constructor.");var n=arguments.length>2?arguments[2]:t;if(!ct.IsConstructor(n))throw new TypeError("new.target must be a constructor.");return ct.Construct(t,e,n,"internal")},deleteProperty:function(t,e){if(or(t),h){var n=Object.getOwnPropertyDescriptor(t,e);if(n&&!n.configurable)return!1}return delete t[e]},has:function(t,e){return or(t),e in t}};Object.getOwnPropertyNames&&Object.assign(ar,{ownKeys:function(t){or(t);var e=Object.getOwnPropertyNames(t);return ct.IsCallable(Object.getOwnPropertySymbols)&&k(e,Object.getOwnPropertySymbols(t)),e}});var sr=function(t){return!u(t)};if(Object.preventExtensions&&Object.assign(ar,{isExtensible:function(t){return or(t),Object.isExtensible(t)},preventExtensions:function(t){return or(t),sr(function(){return Object.preventExtensions(t)})}}),h){var ur=function(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e);if(!r){var i=Object.getPrototypeOf(t);if(null===i)return;return ur(i,e,n)}return"value"in r?r.value:r.get?ct.Call(r.get,n):void 0},lr=function(t,e,r,i){var o=Object.getOwnPropertyDescriptor(t,e);if(!o){var a=Object.getPrototypeOf(t);if(null!==a)return lr(a,e,r,i);o={value:void 0,writable:!0,enumerable:!0,configurable:!0}}if("value"in o){if(!o.writable)return!1;if(!ct.TypeIsObject(i))return!1;return Object.getOwnPropertyDescriptor(i,e)?at.defineProperty(i,e,{value:r}):at.defineProperty(i,e,{value:r,writable:!0,enumerable:!0,configurable:!0})}return!!o.set&&(n(o.set,i,r),!0)};Object.assign(ar,{defineProperty:function(t,e,n){return or(t),sr(function(){return Object.defineProperty(t,e,n)})},getOwnPropertyDescriptor:function(t,e){return or(t),Object.getOwnPropertyDescriptor(t,e)},get:function(t,e){or(t);var n=arguments.length>2?arguments[2]:t;return ur(t,e,n)},set:function(t,e,n){or(t);var r=arguments.length>3?arguments[3]:t;return lr(t,e,n,r)}})}if(Object.getPrototypeOf){var cr=Object.getPrototypeOf;ar.getPrototypeOf=function(t){return or(t),cr(t)}}if(Object.setPrototypeOf&&ar.getPrototypeOf){var hr=function(t,e){for(var n=e;n;){if(t===n)return!0;n=ar.getPrototypeOf(n)}return!1};Object.assign(ar,{setPrototypeOf:function(t,e){if(or(t),null!==e&&!ct.TypeIsObject(e))throw new TypeError("proto must be an object or null");return e===at.getPrototypeOf(t)||!(at.isExtensible&&!at.isExtensible(t))&&(!hr(t,e)&&(Object.setPrototypeOf(t,e),!0))}})}var fr=function(t,e){if(ct.IsCallable(S.Reflect[t])){l(function(){return S.Reflect[t](1),S.Reflect[t](NaN),S.Reflect[t](!0),!0})&&rt(S.Reflect,t,e)}else g(S.Reflect,t,e)};Object.keys(ar).forEach(function(t){fr(t,ar[t])});var pr=S.Reflect.getPrototypeOf;if(f&&pr&&"getPrototypeOf"!==pr.name&&rt(S.Reflect,"getPrototypeOf",function(t){return n(pr,S.Reflect,t)}),S.Reflect.setPrototypeOf&&l(function(){return S.Reflect.setPrototypeOf(1,{}),!0})&&rt(S.Reflect,"setPrototypeOf",ar.setPrototypeOf),S.Reflect.defineProperty&&(l(function(){var t=!S.Reflect.defineProperty(1,"test",{value:1}),e="function"!=typeof Object.preventExtensions||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return t&&e})||rt(S.Reflect,"defineProperty",ar.defineProperty)),S.Reflect.construct&&(l(function(){var t=function(){};return S.Reflect.construct(function(){},[],t)instanceof t})||rt(S.Reflect,"construct",ar.construct)),"Invalid Date"!==String(new Date(NaN))){var dr=Date.prototype.toString,yr=function(){var t=+this;return t!==t?"Invalid Date":ct.Call(dr,this)};rt(Date.prototype,"toString",yr)}var vr={anchor:function(t){return ct.CreateHTML(this,"a","name",t)},big:function(){return ct.CreateHTML(this,"big","","")},blink:function(){return ct.CreateHTML(this,"blink","","")},bold:function(){return ct.CreateHTML(this,"b","","")},fixed:function(){return ct.CreateHTML(this,"tt","","")},fontcolor:function(t){return ct.CreateHTML(this,"font","color",t)},fontsize:function(t){return ct.CreateHTML(this,"font","size",t)},italics:function(){return ct.CreateHTML(this,"i","","")},link:function(t){return ct.CreateHTML(this,"a","href",t)},small:function(){return ct.CreateHTML(this,"small","","")},strike:function(){return ct.CreateHTML(this,"strike","","")},sub:function(){return ct.CreateHTML(this,"sub","","")},sup:function(){return ct.CreateHTML(this,"sup","","")}};p(Object.keys(vr),function(t){var e=String.prototype[t],r=!1;if(ct.IsCallable(e)){var i=n(e,"",' " '),o=P([],i.match(/"/g)).length;r=i!==i.toLowerCase()||o>2}else r=!0;r&&rt(String.prototype,t,vr[t])});var gr=function(){if(!it)return!1;var t="object"===("undefined"==typeof JSON?"undefined":s(JSON))&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!t)return!1;if(void 0!==t(q()))return!0;if("[null]"!==t([q()]))return!0;var e={a:q()};return e[q()]=!0,"{}"!==t(e)}(),mr=l(function(){return!it||"{}"===JSON.stringify(Object(q()))&&"[{}]"===JSON.stringify([Object(q())])});if(gr||!mr){var br=JSON.stringify;rt(JSON,"stringify",function(t){if("symbol"!==(void 0===t?"undefined":s(t))){var e;arguments.length>1&&(e=arguments[1]);var r=[t];if(o(e))r.push(e);else{var i=ct.IsCallable(e)?e:null,a=function(t,e){var r=i?n(i,this,t,e):e;if("symbol"!==(void 0===r?"undefined":s(r)))return nt.symbol(r)?Ee({})(r):r};r.push(a)}return arguments.length>2&&r.push(arguments[2]),br.apply(this,r)}})}return S})}).call(e,n(1),n(129))},function(t,e,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(o,a,s,u){function l(t,e,n){return setTimeout(d(t,n),e)}function c(t,e,n){return!!Array.isArray(t)&&(h(t,n[e],n),!0)}function h(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==u)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function f(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=o.console&&(o.console.warn||o.console.log);return i&&i.call(o.console,r,n),t.apply(this,arguments)}}function p(t,e,n){var r,i=e.prototype;r=t.prototype=Object.create(i),r.constructor=t,r._super=i,n&&yt(r,n)}function d(t,e){return function(){return t.apply(e,arguments)}}function y(t,e){return(void 0===t?"undefined":i(t))==mt?t.apply(e?e[0]||u:u,e):t}function v(t,e){return t===u?e:t}function g(t,e,n){h(w(e),function(e){t.addEventListener(e,n,!1)})}function m(t,e,n){h(w(e),function(e){t.removeEventListener(e,n,!1)})}function b(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function _(t,e){return t.indexOf(e)>-1}function w(t){return t.trim().split(/\s+/g)}function x(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function T(t){return Array.prototype.slice.call(t,0)}function S(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];x(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function E(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<vt.length;){if(n=vt[o],(r=n?n+i:e)in t)return r;o++}return u}function O(){return St++}function M(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||o}function P(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){y(t.options.enable,[t])&&n.handler(e)},this.init()}function C(t){var e=t.options.inputClass;return new(e||(Mt?H:Pt?X:Ot?Y:V))(t,A)}function A(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&At&&r-i==0,a=e&(It|Rt)&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,k(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function k(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=j(e)),i>1&&!n.firstMultiple?n.firstMultiple=j(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=e.center=D(r);e.timeStamp=wt(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=F(s,u),e.distance=B(s,u),I(n,e),e.offsetDirection=N(e.deltaX,e.deltaY);var l=L(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=_t(l.x)>_t(l.y)?l.x:l.y,e.scale=a?W(a.pointers,r):1,e.rotation=a?U(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,R(n,e);var c=t.element;b(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}function I(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==At&&o.eventType!==It||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}function R(t,e){var n,r,i,o,a=t.lastInterval||e,s=e.timeStamp-a.timeStamp;if(e.eventType!=Rt&&(s>Ct||a.velocity===u)){var l=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,h=L(s,l,c);r=h.x,i=h.y,n=_t(h.x)>_t(h.y)?h.x:h.y,o=N(l,c),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}function j(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:bt(t.pointers[n].clientX),clientY:bt(t.pointers[n].clientY)},n++;return{timeStamp:wt(),pointers:e,center:D(e),deltaX:t.deltaX,deltaY:t.deltaY}}function D(t){var e=t.length;if(1===e)return{x:bt(t[0].clientX),y:bt(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:bt(n/e),y:bt(r/e)}}function L(t,e,n){return{x:e/t||0,y:n/t||0}}function N(t,e){return t===e?jt:_t(t)>=_t(e)?t<0?Dt:Lt:e<0?Nt:Bt}function B(t,e,n){n||(n=Vt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function F(t,e,n){n||(n=Vt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}function U(t,e){return F(e[1],e[0],Ht)+F(t[1],t[0],Ht)}function W(t,e){return B(e[0],e[1],Ht)/B(t[0],t[1],Ht)}function V(){this.evEl=Gt,this.evWin=Xt,this.pressed=!1,P.apply(this,arguments)}function H(){this.evEl=Jt,this.evWin=Kt,P.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function z(){this.evTarget=Qt,this.evWin=$t,this.started=!1,P.apply(this,arguments)}function G(t,e){var n=T(t.touches),r=T(t.changedTouches);return e&(It|Rt)&&(n=S(n.concat(r),"identifier",!0)),[n,r]}function X(){this.evTarget=ee,this.targetIds={},P.apply(this,arguments)}function q(t,e){var n=T(t.touches),r=this.targetIds;if(e&(At|kt)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=T(t.changedTouches),s=[],u=this.target;if(o=n.filter(function(t){return b(t.target,u)}),e===At)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(It|Rt)&&delete r[a[i].identifier],i++;return s.length?[S(o.concat(s),"identifier",!0),s]:void 0}function Y(){P.apply(this,arguments);var t=d(this.handler,this);this.touch=new X(this.manager,t),this.mouse=new V(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function J(t,e){t&At?(this.primaryTouch=e.changedPointers[0].identifier,K.call(this,e)):t&(It|Rt)&&K.call(this,e)}function K(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)};setTimeout(i,ne)}}function Z(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=re&&a<=re)return!0}return!1}function Q(t,e){this.manager=t,this.set(e)}function $(t){if(_(t,ue))return ue;var e=_(t,le),n=_(t,ce);return e&&n?ue:e||n?e?le:ce:_(t,se)?se:ae}function tt(t){this.options=yt({},this.defaults,t||{}),this.id=O(),this.manager=null,this.options.enable=v(this.options.enable,!0),this.state=fe,this.simultaneous={},this.requireFail=[]}function et(t){return t&ge?"cancel":t&ye?"end":t&de?"move":t&pe?"start":""}function nt(t){return t==Bt?"down":t==Nt?"up":t==Dt?"left":t==Lt?"right":""}function rt(t,e){var n=e.manager;return n?n.get(t):t}function it(){tt.apply(this,arguments)}function ot(){it.apply(this,arguments),this.pX=null,this.pY=null}function at(){it.apply(this,arguments)}function st(){tt.apply(this,arguments),this._timer=null,this._input=null}function ut(){it.apply(this,arguments)}function lt(){it.apply(this,arguments)}function ct(){tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ht(t,e){return e=e||{},e.recognizers=v(e.recognizers,ht.defaults.preset),new ft(t,e)}function ft(t,e){this.options=yt({},ht.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=C(this),this.touchAction=new Q(this,this.options.touchAction),pt(this,!0),h(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function pt(t,e){var n=t.element;if(n.style){var r;h(t.options.cssProps,function(i,o){r=E(n.style,o),e?(t.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=t.oldCssProps[r]||""}),e||(t.oldCssProps={})}}function dt(t,e){var n=a.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var yt,vt=["","webkit","Moz","MS","ms","o"],gt=a.createElement("div"),mt="function",bt=Math.round,_t=Math.abs,wt=Date.now;yt="function"!=typeof Object.assign?function(t){if(t===u||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==u&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var xt=f(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===u)&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),Tt=f(function(t,e){return xt(t,e,!0)},"merge","Use `assign`."),St=1,Et=/mobile|tablet|ip(ad|hone|od)|android/i,Ot="ontouchstart"in o,Mt=E(o,"PointerEvent")!==u,Pt=Ot&&Et.test(navigator.userAgent),Ct=25,At=1,kt=2,It=4,Rt=8,jt=1,Dt=2,Lt=4,Nt=8,Bt=16,Ft=Dt|Lt,Ut=Nt|Bt,Wt=Ft|Ut,Vt=["x","y"],Ht=["clientX","clientY"];P.prototype={handler:function(){},init:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(M(this.element),this.evWin,this.domHandler)}};var zt={mousedown:At,mousemove:kt,mouseup:It},Gt="mousedown",Xt="mousemove mouseup";p(V,P,{handler:function(t){var e=zt[t.type];e&At&&0===t.button&&(this.pressed=!0),e&kt&&1!==t.which&&(e=It),this.pressed&&(e&It&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var qt={pointerdown:At,pointermove:kt,pointerup:It,pointercancel:Rt,pointerout:Rt},Yt={2:"touch",3:"pen",4:"mouse",5:"kinect"},Jt="pointerdown",Kt="pointermove pointerup pointercancel";o.MSPointerEvent&&!o.PointerEvent&&(Jt="MSPointerDown",Kt="MSPointerMove MSPointerUp MSPointerCancel"),p(H,P,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=qt[r],o=Yt[t.pointerType]||t.pointerType,a="touch"==o,s=x(e,t.pointerId,"pointerId");i&At&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(It|Rt)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var Zt={touchstart:At,touchmove:kt,touchend:It,touchcancel:Rt},Qt="touchstart",$t="touchstart touchmove touchend touchcancel";p(z,P,{handler:function(t){var e=Zt[t.type];if(e===At&&(this.started=!0),this.started){var n=G.call(this,t,e);e&(It|Rt)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var te={touchstart:At,touchmove:kt,touchend:It,touchcancel:Rt},ee="touchstart touchmove touchend touchcancel";p(X,P,{handler:function(t){var e=te[t.type],n=q.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var ne=2500,re=25;p(Y,P,{handler:function(t,e,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)J.call(this,e,n);else if(i&&Z.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ie=E(gt.style,"touchAction"),oe=ie!==u,ae="auto",se="manipulation",ue="none",le="pan-x",ce="pan-y",he=function(){if(!oe)return!1;var t={},e=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||o.CSS.supports("touch-action",n)}),t}();Q.prototype={set:function(t){"compute"==t&&(t=this.compute()),oe&&this.manager.element.style&&he[t]&&(this.manager.element.style[ie]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return h(this.manager.recognizers,function(e){y(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),$(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var r=this.actions,i=_(r,ue)&&!he[ue],o=_(r,ce)&&!he[ce],a=_(r,le)&&!he[le];if(i){var s=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(s&&u&&l)return}return a&&o?void 0:i||o&&n&Ft||a&&n&Ut?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var fe=1,pe=2,de=4,ye=8,ve=ye,ge=16;tt.prototype={defaults:{},set:function(t){return yt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(c(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=rt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return c(t,"dropRecognizeWith",this)?this:(t=rt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(c(t,"requireFailure",this))return this;var e=this.requireFail;return t=rt(t,this),-1===x(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(c(t,"dropRequireFailure",this))return this;t=rt(t,this);var e=x(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,r=this.state;r<ye&&e(n.options.event+et(r)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),r>=ye&&e(n.options.event+et(r))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|fe)))return!1;t++}return!0},recognize:function(t){var e=yt({},t);if(!y(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(ve|ge|32)&&(this.state=fe),this.state=this.process(e),this.state&(pe|de|ye|ge)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},p(it,tt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(pe|de),i=this.attrTest(t);return r&&(n&Rt||!i)?e|ge:r||i?n&It?e|ye:e&pe?e|de:pe:32}}),p(ot,it,{defaults:{event:"pan",threshold:10,pointers:1,direction:Wt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Ft&&e.push(ce),t&Ut&&e.push(le),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&Ft?(i=0===o?jt:o<0?Dt:Lt,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?jt:a<0?Nt:Bt,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return it.prototype.attrTest.call(this,t)&&(this.state&pe||!(this.state&pe)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=nt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),p(at,it,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ue]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&pe)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),p(st,tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ae]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(It|Rt)&&!i)this.reset();else if(t.eventType&At)this.reset(),this._timer=l(function(){this.state=ve,this.tryEmit()},e.time,this);else if(t.eventType&It)return ve;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ve&&(t&&t.eventType&It?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=wt(),this.manager.emit(this.options.event,this._input)))}}),p(ut,it,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ue]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&pe)}}),p(lt,it,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ft|Ut,pointers:1},getTouchAction:function(){return ot.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Ft|Ut)?e=t.overallVelocity:n&Ft?e=t.overallVelocityX:n&Ut&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&_t(e)>this.options.velocity&&t.eventType&It},emit:function(t){var e=nt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),p(ct,tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[se]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&At&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=It)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||B(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=l(function(){this.state=ve,this.tryEmit()},e.interval,this),pe):ve}return 32},failTimeout:function(){return this._timer=l(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ve&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ht.VERSION="2.0.7",ht.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[ut,{enable:!1}],[at,{enable:!1},["rotate"]],[lt,{direction:Ft}],[ot,{direction:Ft},["swipe"]],[ct],[ct,{event:"doubletap",taps:2},["tap"]],[st]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};ft.prototype={set:function(t){return yt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&ve)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(pe|de|ye)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof tt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(c(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(c(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=x(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==u&&e!==u){var n=this.handlers;return h(w(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==u){var n=this.handlers;return h(w(t),function(t){e?n[t]&&n[t].splice(x(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&dt(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&pt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},yt(ht,{INPUT_START:At,INPUT_MOVE:kt,INPUT_END:It,INPUT_CANCEL:Rt,STATE_POSSIBLE:fe,STATE_BEGAN:pe,STATE_CHANGED:de,STATE_ENDED:ye,STATE_RECOGNIZED:ve,STATE_CANCELLED:ge,STATE_FAILED:32,DIRECTION_NONE:jt,DIRECTION_LEFT:Dt,DIRECTION_RIGHT:Lt,DIRECTION_UP:Nt,DIRECTION_DOWN:Bt,DIRECTION_HORIZONTAL:Ft,DIRECTION_VERTICAL:Ut,DIRECTION_ALL:Wt,Manager:ft,Input:P,TouchAction:Q,TouchInput:X,MouseInput:V,PointerEventInput:H,TouchMouseInput:Y,SingleTouchInput:z,Recognizer:tt,AttrRecognizer:it,Tap:ct,Pan:ot,Swipe:lt,Pinch:at,Rotate:ut,Press:st,on:g,off:m,each:h,merge:Tt,extend:xt,assign:yt,inherit:p,bindFn:d,prefixed:E}),(void 0!==o?o:"undefined"!=typeof self?self:{}).Hammer=ht,(r=function(){return ht}.call(e,n,e,t))!==u&&(t.exports=r)}(window,document)},function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,u=r(t),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)o.call(n,c)&&(u[c]=n[c]);if(i){s=i(n);for(var h=0;h<s.length;h++)a.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(t,e,n){"use strict";var r=new ArrayBuffer(0),i=function(t,e,n,i){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=i||t.STATIC_DRAW,this.data=r,n&&this.upload(n),this._updateID=0};i.prototype.upload=function(t,e,n){n||this.bind();var r=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?r.bufferSubData(this.type,e,t):r.bufferData(this.type,t,this.drawType),this.data=t},i.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},i.createVertexBuffer=function(t,e,n){return new i(t,t.ARRAY_BUFFER,e,n)},i.createIndexBuffer=function(t,e,n){return new i(t,t.ELEMENT_ARRAY_BUFFER,e,n)},i.create=function(t,e,n,r){return new i(t,e,n,r)},i.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=i},function(t,e,n){"use strict";var r=n(90),i=function(t,e,n){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=n||100};i.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new r(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},i.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},i.prototype.clear=function(t,e,n,r){this.bind();var i=this.gl;i.clearColor(t,e,n,r),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)},i.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},i.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},i.prototype.resize=function(t,e){var n=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(n.bindRenderbuffer(n.RENDERBUFFER,this.stencil),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t,e))},i.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},i.createRGBA=function(t,e,n,o){var a=r.fromData(t,null,e,n);a.enableNearestScaling(),a.enableWrapClamp();var s=new i(t,e,n);return s.enableTexture(a),s.unbind(),s},i.createFloat32=function(t,e,n,o){var a=new r.fromData(t,o,e,n);a.enableNearestScaling(),a.enableWrapClamp();var s=new i(t,e,n);return s.enableTexture(a),s.unbind(),s},t.exports=i},function(t,e,n){"use strict";var r=n(92),i=n(94),o=n(95),a=n(98),s=n(96),u=function(t,e,n,u,l){this.gl=t,u&&(e=a(e,u),n=a(n,u)),this.program=r(t,e,n,l),this.attributes=i(t,this.program),this.uniformData=o(t,this.program),this.uniforms=s(t,this.uniformData)};u.prototype.bind=function(){return this.gl.useProgram(this.program),this},u.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},t.exports=u},function(t,e,n){"use strict";function r(t,e){if(this.nativeVaoExtension=null,r.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var n=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(n),attribState:new Array(n)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var i=n(91);r.prototype.constructor=r,t.exports=r,r.FORCE_NATIVE=!1,r.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},r.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},r.prototype.activate=function(){for(var t=this.gl,e=null,n=0;n<this.attributes.length;n++){var r=this.attributes[n];e!==r.buffer&&(r.buffer.bind(),e=r.buffer),t.vertexAttribPointer(r.attribute.location,r.attribute.size,r.type||t.FLOAT,r.normalized||!1,r.stride||0,r.start||0)}return i(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},r.prototype.addAttribute=function(t,e,n,r,i,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:n||this.gl.FLOAT,normalized:r||!1,stride:i||0,start:o||0}),this.dirty=!0,this},r.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},r.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},r.prototype.draw=function(t,e,n){var r=this.gl;return this.indexBuffer?r.drawElements(t,e||this.indexBuffer.data.length,r.UNSIGNED_SHORT,2*(n||0)):r.drawArrays(t,n,e||this.getSize()),this},r.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},r.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},function(t,e,n){"use strict";var r=function(t,e){var n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!n)throw new Error("This browser does not support webGL. Try using the canvas renderer");return n};t.exports=r},function(t,e,n){"use strict";t.exports={compileProgram:n(92),defaultValue:n(93),extractAttributes:n(94),extractUniforms:n(95),generateUniformAccessObject:n(96),setPrecision:n(98),mapSize:n(97),mapType:n(42)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=n(21),l=r(u),c=n(50),h=r(c),f=n(13),p=r(f),d=n(104),y=r(d),v=n(48),g=r(v),m=n(5),b=n(2),_=n(0),w=n(43),x=r(w),T=n(186),S=r(T),E=n(22),O=r(E),M=void 0,P=new m.Matrix,C=new m.Point,A=new Float32Array(4),k=new Float32Array(4),I=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(this,e);var r=o(this,t.call(this));return r.fillAlpha=1,r.lineWidth=0,r.nativeLines=n,r.lineColor=0,r.graphicsData=[],r.tint=16777215,r._prevTint=16777215,r.blendMode=_.BLEND_MODES.NORMAL,r.currentPath=null,r._webGL={},r.isMask=!1,r.boundsPadding=0,r._localBounds=new x.default,r.dirty=0,r.fastRectDirty=-1,r.clearDirty=0,r.boundsDirty=-1,r.cachedSpriteDirty=!1,r._spriteRect=null,r._fastRect=!1,r}return a(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var n=0;n<this.graphicsData.length;++n)t.graphicsData.push(this.graphicsData[n].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=n,this.currentPath)if(this.currentPath.shape.points.length){var r=new m.Polygon(this.currentPath.shape.points.slice(-2));r.closed=!1,this.drawShape(r)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},e.prototype.moveTo=function(t,e){var n=new m.Polygon([t,e]);return n.closed=!1,this.drawShape(n),this},e.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty++,this},e.prototype.quadraticCurveTo=function(t,e,n,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i=this.currentPath.shape.points,o=0,a=0;0===i.length&&this.moveTo(0,0);for(var s=i[i.length-2],u=i[i.length-1],l=1;l<=20;++l){var c=l/20;o=s+(t-s)*c,a=u+(e-u)*c,i.push(o+(t+(n-t)*c-o)*c,a+(e+(r-e)*c-a)*c)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,e,n,r,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,s=a[a.length-2],u=a[a.length-1];return a.length-=2,(0,S.default)(s,u,t,e,n,r,i,o,a),this.dirty++,this},e.prototype.arcTo=function(t,e,n,r,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,a=o[o.length-2],s=o[o.length-1],u=s-e,l=a-t,c=r-e,h=n-t,f=Math.abs(u*h-l*c);if(f<1e-8||0===i)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var p=u*u+l*l,d=c*c+h*h,y=u*c+l*h,v=i*Math.sqrt(p)/f,g=i*Math.sqrt(d)/f,m=v*y/p,b=g*y/d,_=v*h+g*l,w=v*c+g*u,x=l*(g+m),T=u*(g+m),S=h*(v+b),E=c*(v+b),O=Math.atan2(T-w,x-_),M=Math.atan2(E-w,S-_);this.arc(_+t,w+e,i,O,M,l*c>h*u)}return this.dirty++,this},e.prototype.arc=function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(r===i)return this;!o&&i<=r?i+=2*Math.PI:o&&r<=i&&(r+=2*Math.PI);var a=i-r,s=40*Math.ceil(Math.abs(a)/(2*Math.PI));if(0===a)return this;var u=t+Math.cos(r)*n,l=e+Math.sin(r)*n,c=this.currentPath?this.currentPath.shape.points:null;c?c[c.length-2]===u&&c[c.length-1]===l||c.push(u,l):(this.moveTo(u,l),c=this.currentPath.shape.points);for(var h=a/(2*s),f=2*h,p=Math.cos(h),d=Math.sin(h),y=s-1,v=y%1/y,g=0;g<=y;++g){var m=g+v*g,b=h+r+f*m,_=Math.cos(b),w=-Math.sin(b);c.push((p*_+d*w)*n+t,(p*-w+d*_)*n+e)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,n,r){return this.drawShape(new m.Rectangle(t,e,n,r)),this},e.prototype.drawRoundedRect=function(t,e,n,r,i){return this.drawShape(new m.RoundedRectangle(t,e,n,r,i)),this},e.prototype.drawCircle=function(t,e,n){return this.drawShape(new m.Circle(t,e,n)),this},e.prototype.drawEllipse=function(t,e,n,r){return this.drawShape(new m.Ellipse(t,e,n,r)),this},e.prototype.drawPolygon=function(t){var e=t,n=!0;if(e instanceof m.Polygon&&(n=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;++r)e[r]=arguments[r]}var i=new m.Polygon(e);return i.closed=n,this.drawShape(i),this},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===_.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new g.default(new p.default(p.default.WHITE)));var n=this._spriteRect;if(16777215===this.tint)n.tint=this.graphicsData[0].fillColor;else{var r=A,i=k;(0,b.hex2rgb)(this.graphicsData[0].fillColor,r),(0,b.hex2rgb)(this.tint,i),r[0]*=i[0],r[1]*=i[1],r[2]*=i[2],n.tint=(0,b.rgb2hex)(r)}n.alpha=this.graphicsData[0].fillAlpha,n.worldAlpha=this.worldAlpha*n.alpha,n.blendMode=this.blendMode,n._texture._frame.width=e.width,n._texture._frame.height=e.height,n.transform.worldTransform=this.transform.worldTransform,n.anchor.set(-e.x/e.width,-e.y/e.height),n._onAnchorUpdate(),n._renderWebGL(t)},e.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,C);for(var e=this.graphicsData,n=0;n<e.length;++n){var r=e[n];if(r.fill&&(r.shape&&r.shape.contains(C.x,C.y))){if(r.holes)for(var i=0;i<r.holes.length;i++){var o=r.holes[i];if(o.contains(C.x,C.y))return!1}return!0}}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0;if(this.graphicsData.length)for(var i=0,o=0,a=0,s=0,u=0,l=0;l<this.graphicsData.length;l++){var c=this.graphicsData[l],h=c.type,f=c.lineWidth;if(i=c.shape,h===_.SHAPES.RECT||h===_.SHAPES.RREC)o=i.x-f/2,a=i.y-f/2,s=i.width+f,u=i.height+f,t=o<t?o:t,e=o+s>e?o+s:e,n=a<n?a:n,r=a+u>r?a+u:r;else if(h===_.SHAPES.CIRC)o=i.x,a=i.y,s=i.radius+f/2,u=i.radius+f/2,t=o-s<t?o-s:t,e=o+s>e?o+s:e,n=a-u<n?a-u:n,r=a+u>r?a+u:r;else if(h===_.SHAPES.ELIP)o=i.x,a=i.y,s=i.width+f/2,u=i.height+f/2,t=o-s<t?o-s:t,e=o+s>e?o+s:e,n=a-u<n?a-u:n,r=a+u>r?a+u:r;else for(var p=i.points,d=0,y=0,v=0,g=0,m=0,b=0,w=0,x=0,T=0;T+2<p.length;T+=2)o=p[T],a=p[T+1],d=p[T+2],y=p[T+3],v=Math.abs(d-o),g=Math.abs(y-a),u=f,(s=Math.sqrt(v*v+g*g))<1e-9||(m=(u/s*g+v)/2,b=(u/s*v+g)/2,w=(d+o)/2,x=(y+a)/2,t=w-m<t?w-m:t,e=w+m>e?w+m:e,n=x-b<n?x-b:n,r=x+b>r?x+b:r)}else t=0,e=0,n=0,r=0;var S=this.boundsPadding;this._localBounds.minX=t-S,this._localBounds.maxX=e+S,this._localBounds.minY=n-S,this._localBounds.maxY=r+S},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new y.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t);return this.graphicsData.push(e),e.type===_.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getLocalBounds(),r=h.default.create(n.width,n.height,t,e);M||(M=new O.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(P),P.invert(),P.tx-=n.x,P.ty-=n.y,M.render(this,r,!0,P);var i=p.default.fromCanvas(r.baseTexture._canvasRenderTarget.canvas,t,"graphics");return i.baseTexture.resolution=e,i.baseTexture.update(),i},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var n=0;n<this.graphicsData.length;++n)this.graphicsData[n].destroy();for(var r in this._webgl)for(var i=0;i<this._webgl[r].data.length;++i)this._webgl[r].data[i].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},e}(l.default);e.default=I,I._SPRITE_TEXTURE=null},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(22),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=n(0),s=function(){function t(e){r(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,n=e.context,r=t.worldAlpha,i=t.transform.worldTransform,o=e.resolution;this._prevTint!==this.tint&&(this.dirty=!0),n.setTransform(i.a*o,i.b*o,i.c*o,i.d*o,i.tx*o,i.ty*o),t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1),e.setBlendMode(t.blendMode);for(var s=0;s<t.graphicsData.length;s++){var u=t.graphicsData[s],l=u.shape,c=u._fillTint,h=u._lineTint;if(n.lineWidth=u.lineWidth,u.type===a.SHAPES.POLY){n.beginPath(),this.renderPolygon(l.points,l.closed,n);for(var f=0;f<u.holes.length;f++)this.renderPolygon(u.holes[f].points,!0,n);u.fill&&(n.globalAlpha=u.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),u.lineWidth&&(n.globalAlpha=u.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke())}else if(u.type===a.SHAPES.RECT)(u.fillColor||0===u.fillColor)&&(n.globalAlpha=u.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fillRect(l.x,l.y,l.width,l.height)),u.lineWidth&&(n.globalAlpha=u.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.strokeRect(l.x,l.y,l.width,l.height));else if(u.type===a.SHAPES.CIRC)n.beginPath(),n.arc(l.x,l.y,l.radius,0,2*Math.PI),n.closePath(),u.fill&&(n.globalAlpha=u.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),u.lineWidth&&(n.globalAlpha=u.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke());else if(u.type===a.SHAPES.ELIP){var p=2*l.width,d=2*l.height,y=l.x-p/2,v=l.y-d/2;n.beginPath();var g=p/2*.5522848,m=d/2*.5522848,b=y+p,_=v+d,w=y+p/2,x=v+d/2;n.moveTo(y,x),n.bezierCurveTo(y,x-m,w-g,v,w,v),n.bezierCurveTo(w+g,v,b,x-m,b,x),n.bezierCurveTo(b,x+m,w+g,_,w,_),n.bezierCurveTo(w-g,_,y,x+m,y,x),n.closePath(),u.fill&&(n.globalAlpha=u.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),u.lineWidth&&(n.globalAlpha=u.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke())}else if(u.type===a.SHAPES.RREC){var T=l.x,S=l.y,E=l.width,O=l.height,M=l.radius,P=Math.min(E,O)/2|0;M=M>P?P:M,n.beginPath(),n.moveTo(T,S+M),n.lineTo(T,S+O-M),n.quadraticCurveTo(T,S+O,T+M,S+O),n.lineTo(T+E-M,S+O),n.quadraticCurveTo(T+E,S+O,T+E,S+O-M),n.lineTo(T+E,S+M),n.quadraticCurveTo(T+E,S,T+E-M,S),n.lineTo(T+M,S),n.quadraticCurveTo(T,S,T,S+M),n.closePath(),(u.fillColor||0===u.fillColor)&&(n.globalAlpha=u.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),u.lineWidth&&(n.globalAlpha=u.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,n=(t.tint>>8&255)/255,r=(255&t.tint)/255,i=0;i<t.graphicsData.length;++i){var o=t.graphicsData[i],a=0|o.fillColor,s=0|o.lineColor;o._fillTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*n*255<<8)+(255&a)/255*r*255,o._lineTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*n*255<<8)+(255&s)/255*r*255}},t.prototype.renderPolygon=function(t,e,n){n.moveTo(t[0],t[1]);for(var r=1;r<t.length/2;++r)n.lineTo(t[2*r],t[2*r+1]);e&&n.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=s,o.default.registerPlugin("graphics",s)},function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],l=0,c=0,h=0,f=0,p=0;u.push(t,e);for(var d=1,y=0;d<=20;++d)y=d/20,l=1-y,c=l*l,h=c*l,f=y*y,p=f*y,u.push(h*t+3*c*y*n+3*l*f*i+p*a,h*e+3*c*y*r+3*l*f*o+p*s);return u}e.__esModule=!0,e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=n(2),l=n(0),c=n(31),h=r(c),f=n(30),p=r(f),d=n(188),y=r(d),v=n(189),g=r(v),m=n(191),b=r(m),_=n(192),w=r(_),x=n(193),T=r(x),S=n(190),E=r(S),O=function(t){function e(n){i(this,e);var r=o(this,t.call(this,n));return r.graphicsDataPool=[],r.primitiveShader=null,r.gl=n.gl,r.CONTEXT_UID=0,r}return a(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new g.default(this.gl)},e.prototype.destroy=function(){h.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,n=e.gl,r=void 0,i=t._webGL[this.CONTEXT_UID];i&&t.dirty===i.dirty||(this.updateGraphics(t),i=t._webGL[this.CONTEXT_UID]);var o=this.primitiveShader;e.bindShader(o),e.state.setBlendMode(t.blendMode);for(var a=0,s=i.data.length;a<s;a++){r=i.data[a];var l=r.shader;e.bindShader(l),l.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),l.uniforms.tint=(0,u.hex2rgb)(t.tint),l.uniforms.alpha=t.worldAlpha,e.bindVao(r.vao),r.nativeLines?n.drawArrays(n.LINES,0,r.points.length/6):r.vao.draw(n.TRIANGLE_STRIP,r.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,n=t._webGL[this.CONTEXT_UID];if(n||(n=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),n.dirty=t.dirty,t.clearDirty!==n.clearDirty){n.clearDirty=t.clearDirty;for(var r=0;r<n.data.length;r++)this.graphicsDataPool.push(n.data[r]);n.data.length=0,n.lastIndex=0}for(var i=void 0,o=void 0,a=n.lastIndex;a<t.graphicsData.length;a++){var s=t.graphicsData[a];i=this.getWebGLData(n,0),s.nativeLines&&s.lineWidth&&(o=this.getWebGLData(n,0,!0),n.lastIndex++),s.type===l.SHAPES.POLY&&(0,b.default)(s,i,o),s.type===l.SHAPES.RECT?(0,w.default)(s,i,o):s.type===l.SHAPES.CIRC||s.type===l.SHAPES.ELIP?(0,E.default)(s,i,o):s.type===l.SHAPES.RREC&&(0,T.default)(s,i,o),n.lastIndex++}this.renderer.bindVao(null);for(var u=0;u<n.data.length;u++)i=n.data[u],i.dirty&&i.upload()},e.prototype.getWebGLData=function(t,e,n){var r=t.data[t.data.length-1];return(!r||r.nativeLines!==n||r.points.length>32e4)&&(r=this.graphicsDataPool.pop()||new y.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),r.nativeLines=n,r.reset(e),t.data.push(r)),r.dirty=!0,r},e}(h.default);e.default=O,p.default.registerPlugin("graphics",O)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(9),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=function(){function t(e,n,i){r(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=o.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=n,this.vao=new o.default.VertexArrayObject(e,i).addIndex(this.indexBuffer).addAttribute(this.buffer,n.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,n.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();e.default=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var s=n(28),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(n){return r(this,e),i(this,t.call(this,n,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return o(e,t),e}(u.default);e.default=l},function(t,e,n){"use strict";function r(t,e,n){var r=t.shape,i=r.x,u=r.y,l=void 0,c=void 0;if(t.type===a.SHAPES.CIRC?(l=r.radius,c=r.radius):(l=r.width,c=r.height),0!==l&&0!==c){var h=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(r.width+r.height)),f=2*Math.PI/h;if(t.fill){var p=(0,s.hex2rgb)(t.fillColor),d=t.fillAlpha,y=p[0]*d,v=p[1]*d,g=p[2]*d,m=e.points,b=e.indices,_=m.length/6;b.push(_);for(var w=0;w<h+1;w++)m.push(i,u,y,v,g,d),m.push(i+Math.sin(f*w)*l,u+Math.cos(f*w)*c,y,v,g,d),b.push(_++,_++);b.push(_-1)}if(t.lineWidth){var x=t.points;t.points=[];for(var T=0;T<h+1;T++)t.points.push(i+Math.sin(f*T)*l,u+Math.cos(f*T)*c);(0,o.default)(t,e,n),t.points=x}}}e.__esModule=!0,e.default=r;var i=n(29),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=n(0),s=n(2)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){t.points=t.shape.points.slice();var r=t.points;if(t.fill&&r.length>=6){for(var i=[],o=t.holes,u=0;u<o.length;u++){var c=o[u];i.push(r.length/2),r=r.concat(c.points)}var h=e.points,f=e.indices,p=r.length/2,d=(0,s.hex2rgb)(t.fillColor),y=t.fillAlpha,v=d[0]*y,g=d[1]*y,m=d[2]*y,b=(0,l.default)(r,i,2);if(!b)return;for(var _=h.length/6,w=0;w<b.length;w+=3)f.push(b[w]+_),f.push(b[w]+_),f.push(b[w+1]+_),f.push(b[w+2]+_),f.push(b[w+2]+_);for(var x=0;x<p;x++)h.push(r[2*x],r[2*x+1],v,g,m,y)}t.lineWidth>0&&(0,a.default)(t,e,n)}e.__esModule=!0,e.default=i;var o=n(29),a=r(o),s=n(2),u=n(86),l=r(u)},function(t,e,n){"use strict";function r(t,e,n){var r=t.shape,i=r.x,s=r.y,u=r.width,l=r.height;if(t.fill){var c=(0,a.hex2rgb)(t.fillColor),h=t.fillAlpha,f=c[0]*h,p=c[1]*h,d=c[2]*h,y=e.points,v=e.indices,g=y.length/6;y.push(i,s),y.push(f,p,d,h),y.push(i+u,s),y.push(f,p,d,h),y.push(i,s+l),y.push(f,p,d,h),y.push(i+u,s+l),y.push(f,p,d,h),v.push(g,g,g+1,g+2,g+3,g+3)}if(t.lineWidth){var m=t.points;t.points=[i,s,i+u,s,i+u,s+l,i,s+l,i,s],(0,o.default)(t,e,n),t.points=m}}e.__esModule=!0,e.default=r;var i=n(29),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=n(2)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var r=t.shape,i=r.x,o=r.y,s=r.width,l=r.height,f=r.radius,p=[];if(p.push(i,o+f),a(i,o+l-f,i,o+l,i+f,o+l,p),a(i+s-f,o+l,i+s,o+l,i+s,o+l-f,p),a(i+s,o+f,i+s,o,i+s-f,o,p),a(i+f,o,i,o,i,o+f+1e-10,p),t.fill){for(var d=(0,h.hex2rgb)(t.fillColor),y=t.fillAlpha,v=d[0]*y,g=d[1]*y,m=d[2]*y,b=e.points,_=e.indices,w=b.length/6,x=(0,u.default)(p,null,2),T=0,S=x.length;T<S;T+=3)_.push(x[T]+w),_.push(x[T]+w),_.push(x[T+1]+w),_.push(x[T+2]+w),_.push(x[T+2]+w);for(var E=0,O=p.length;E<O;E++)b.push(p[E],p[++E],v,g,m,y)}if(t.lineWidth){var M=t.points;t.points=p,(0,c.default)(t,e,n),t.points=M}}function o(t,e,n){return t+(e-t)*n}function a(t,e,n,r,i,a){for(var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],u=s,l=0,c=0,h=0,f=0,p=0,d=0,y=0,v=0;y<=20;++y)v=y/20,l=o(t,n,v),c=o(e,r,v),h=o(n,i,v),f=o(r,a,v),p=o(l,h,v),d=o(c,f,v),u.push(p,d);return u}e.__esModule=!0,e.default=i;var s=n(86),u=r(s),l=n(29),c=r(l),h=n(2)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(47),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=n(0),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t),this.x=e,this.y=n,this.radius=i,this.type=a.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.radius*this.radius,r=this.x-t,i=this.y-e;return r*=r,i*=i,r+i<=n},t.prototype.getBounds=function(){return new o.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();e.default=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(47),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=n(0),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t),this.x=e,this.y=n,this.width=i,this.height=o,this.type=a.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,r=(e-this.y)/this.height;return n*=n,r*=r,n+r<=1},t.prototype.getBounds=function(){return new o.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();e.default=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(46),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=n(0),s=function(){function t(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];if(r(this,t),Array.isArray(n[0])&&(n=n[0]),n[0]instanceof o.default){for(var s=[],u=0,l=n.length;u<l;u++)s.push(n[u].x,n[u].y);n=s}this.closed=!0,this.points=n,this.type=a.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var n=!1,r=this.points.length/2,i=0,o=r-1;i<r;o=i++){var a=this.points[2*i],s=this.points[2*i+1],u=this.points[2*o],l=this.points[2*o+1];s>e!=l>e&&t<(e-s)/(l-s)*(u-a)+a&&(n=!n)}return n},t}();e.default=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(0),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;r(this,t),this.x=e,this.y=n,this.width=o,this.height=a,this.radius=s,this.type=i.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var n=t-(this.x+this.radius),r=e-(this.y+this.radius),i=this.radius*this.radius;if(n*n+r*r<=i)return!0;if((n=t-(this.x+this.width-this.radius))*n+r*r<=i)return!0;if(r=e-(this.y+this.height-this.radius),n*n+r*r<=i)return!0;if((n=t-(this.x+this.radius))*n+r*r<=i)return!0}return!1},t}();e.default=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(0),o=function(){function t(e){r(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var n=t.alpha,r=t.transform.worldTransform,i=e.resolution;e.context.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=n},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,n=t.graphicsData.length;if(0!==n){e.beginPath();for(var r=0;r<n;r++){var o=t.graphicsData[r],a=o.shape;if(o.type===i.SHAPES.POLY){var s=a.points;e.moveTo(s[0],s[1]);for(var u=1;u<s.length/2;u++)e.lineTo(s[2*u],s[2*u+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&e.closePath()}else if(o.type===i.SHAPES.RECT)e.rect(a.x,a.y,a.width,a.height),e.closePath();else if(o.type===i.SHAPES.CIRC)e.arc(a.x,a.y,a.radius,0,2*Math.PI),e.closePath();else if(o.type===i.SHAPES.ELIP){var l=2*a.width,c=2*a.height,h=a.x-l/2,f=a.y-c/2,p=l/2*.5522848,d=c/2*.5522848,y=h+l,v=f+c,g=h+l/2,m=f+c/2;e.moveTo(h,m),e.bezierCurveTo(h,m-d,g-p,f,g,f),e.bezierCurveTo(g+p,f,y,m-d,y,m),e.bezierCurveTo(y,m+d,g+p,v,g,v),e.bezierCurveTo(g-p,v,h,m+d,h,m),e.closePath()}else if(o.type===i.SHAPES.RREC){var b=a.x,_=a.y,w=a.width,x=a.height,T=a.radius,S=Math.min(w,x)/2|0;T=T>S?S:T,e.moveTo(b,_+T),e.lineTo(b,_+x-T),e.quadraticCurveTo(b,_+x,b+T,_+x),e.lineTo(b+w-T,_+x),e.quadraticCurveTo(b+w,_+x,b+w,_+x-T),e.lineTo(b+w,_+T),e.quadraticCurveTo(b+w,_,b+w-T,_),e.lineTo(b+T,_),e.quadraticCurveTo(b,_,b,_+T),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore()},t.prototype.destroy=function(){},t}();e.default=o},function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,a.default)()?(t[i.BLEND_MODES.NORMAL]="source-over",t[i.BLEND_MODES.ADD]="lighter",t[i.BLEND_MODES.MULTIPLY]="multiply",t[i.BLEND_MODES.SCREEN]="screen",t[i.BLEND_MODES.OVERLAY]="overlay",t[i.BLEND_MODES.DARKEN]="darken",t[i.BLEND_MODES.LIGHTEN]="lighten",t[i.BLEND_MODES.COLOR_DODGE]="color-dodge",t[i.BLEND_MODES.COLOR_BURN]="color-burn",t[i.BLEND_MODES.HARD_LIGHT]="hard-light",t[i.BLEND_MODES.SOFT_LIGHT]="soft-light",t[i.BLEND_MODES.DIFFERENCE]="difference",t[i.BLEND_MODES.EXCLUSION]="exclusion",t[i.BLEND_MODES.HUE]="hue",t[i.BLEND_MODES.SATURATION]="saturate",t[i.BLEND_MODES.COLOR]="color",t[i.BLEND_MODES.LUMINOSITY]="luminosity"):(t[i.BLEND_MODES.NORMAL]="source-over",t[i.BLEND_MODES.ADD]="lighter",t[i.BLEND_MODES.MULTIPLY]="source-over",t[i.BLEND_MODES.SCREEN]="source-over",t[i.BLEND_MODES.OVERLAY]="source-over",t[i.BLEND_MODES.DARKEN]="source-over",t[i.BLEND_MODES.LIGHTEN]="source-over",t[i.BLEND_MODES.COLOR_DODGE]="source-over",t[i.BLEND_MODES.COLOR_BURN]="source-over",t[i.BLEND_MODES.HARD_LIGHT]="source-over",t[i.BLEND_MODES.SOFT_LIGHT]="source-over",t[i.BLEND_MODES.DIFFERENCE]="source-over",t[i.BLEND_MODES.EXCLUSION]="source-over",t[i.BLEND_MODES.HUE]="source-over",t[i.BLEND_MODES.SATURATION]="source-over",t[i.BLEND_MODES.COLOR]="source-over",t[i.BLEND_MODES.LUMINOSITY]="source-over"),t[i.BLEND_MODES.NORMAL_NPM]=t[i.BLEND_MODES.NORMAL],t[i.BLEND_MODES.ADD_NPM]=t[i.BLEND_MODES.ADD],t[i.BLEND_MODES.SCREEN_NPM]=t[i.BLEND_MODES.SCREEN],t}e.__esModule=!0,e.default=r;var i=n(0),o=n(109),a=function(t){return t&&t.__esModule?t:{default:t}}(o)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(0),o=n(4),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=function(){function t(e){r(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=a.default.GC_MAX_IDLE,this.checkCountMax=a.default.GC_MAX_CHECK_COUNT,this.mode=a.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==i.GC_MODES.MANUAL&&++this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,n=!1,r=0;r<e.length;r++){var i=e[r];!i._glRenderTargets&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[r]=null,n=!0)}if(n){for(var o=0,a=0;a<e.length;a++)null!==e[a]&&(e[o++]=e[a]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},t}();e.default=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(9),o=n(0),a=n(32),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=n(2),l=function(){function t(e){r(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var n=this.gl,r=!!t._glRenderTargets;if(!t.hasLoaded)return null;var a=this.renderer.boundTextures;if(void 0===e){e=0;for(var u=0;u<a.length;++u)if(a[u]===t){e=u;break}}a[e]=t,n.activeTexture(n.TEXTURE0+e);var l=t._glTextures[this.renderer.CONTEXT_UID];if(l)r?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):l.upload(t.source);else{if(r){var c=new s.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);c.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=c,l=c.texture}else l=new i.GLTexture(this.gl,null,null,null,null),l.bind(e),l.premultiplyAlpha=!0,l.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=l,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&l.enableMipmap(),t.wrapMode===o.WRAP_MODES.CLAMP?l.enableWrapClamp():t.wrapMode===o.WRAP_MODES.REPEAT?l.enableWrapRepeat():l.enableWrapMirrorRepeat()):l.enableWrapClamp(),t.scaleMode===o.SCALE_MODES.NEAREST?l.enableNearestScaling():l.enableLinearScaling()}return l},t.prototype.destroyTexture=function(t,e){if(t=t.baseTexture||t,t.hasLoaded&&t._glTextures[this.renderer.CONTEXT_UID]&&(this.renderer.unbindTexture(t),t._glTextures[this.renderer.CONTEXT_UID].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.renderer.CONTEXT_UID],!e)){var n=this._managedTextures.indexOf(t);-1!==n&&(0,u.removeItems)(this._managedTextures,n,1)}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();e.default=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(209),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=function(){function t(e){r(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,o.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[4]){this.activeState[4]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var n=1;n<this.maxAttribs;n++)this.gl.disableVertexAttribArray(n)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();e.default=a},function(t,e,n){"use strict";function r(t,e,n){var r=i(t),o=i(e);return Object.assign(r,o)}function i(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),n={},r=void 0,i=t.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<i.length;o++){var a=i[o].trim();if(a.indexOf("uniform")>-1){var u=a.split(" "),l=u[1],c=u[2],h=1;c.indexOf("[")>-1&&(r=c.split(/\[|]/),c=r[0],h*=Number(r[1])),c.match(e)||(n[c]={value:s(l,h),name:c,type:l})}}return n}e.__esModule=!0,e.default=r;var o=n(9),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=a.default.shader.defaultValue},function(t,e,n){"use strict";function r(t,e,n){var r=t.identity();return r.translate(e.x/n.width,e.y/n.height),r.scale(n.width,n.height),r}function i(t,e,n){var r=t.identity();r.translate(e.x/n.width,e.y/n.height);var i=n.width/e.width,o=n.height/e.height;return r.scale(i,o),r}function o(t,e,n,r){var i=r.worldTransform.copy(a.Matrix.TEMP_MATRIX),o=r._texture.baseTexture,s=t.identity(),u=n.height/n.width;s.translate(e.x/n.width,e.y/n.height),s.scale(1,u);var l=n.width/o.width,c=n.height/o.height;return i.tx/=o.width*l,i.ty/=o.width*l,i.invert(),s.prepend(i),s.scale(1,1/u),s.scale(l,c),s.translate(r.anchor.x,r.anchor.y),s}e.__esModule=!0,e.calculateScreenSpaceMatrix=r,e.calculateNormalizedScreenSpaceMatrix=i,e.calculateSpriteMatrix=o;var a=n(5)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=n(23),l=r(u),c=n(32),h=r(c),f=n(112),p=r(f),d=n(5),y=n(28),v=r(y),g=n(204),m=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(g),b=n(41),_=r(b),w=function t(){a(this,t),this.renderTarget=null,this.sourceFrame=new d.Rectangle,this.destinationFrame=new d.Rectangle,this.filters=[],this.target=null,this.resolution=1},x=function(t){function e(n){a(this,e);var r=i(this,t.call(this,n));return r.gl=r.renderer.gl,r.quad=new p.default(r.gl,n.state.attribState),r.shaderCache={},r.pool={},r.filterData=null,r}return o(e,t),e.prototype.pushFilter=function(t,e){var n=this.renderer,r=this.filterData;if(!r){r=this.renderer._activeRenderTarget.filterStack;var i=new w;i.sourceFrame=i.destinationFrame=this.renderer._activeRenderTarget.size,i.renderTarget=n._activeRenderTarget,this.renderer._activeRenderTarget.filterData=r={index:0,stack:[i]},this.filterData=r}var o=r.stack[++r.index];o||(o=r.stack[r.index]=new w);var a=e[0].resolution,s=0|e[0].padding,u=t.filterArea||t.getBounds(!0),l=o.sourceFrame,c=o.destinationFrame;l.x=(u.x*a|0)/a,l.y=(u.y*a|0)/a,l.width=(u.width*a|0)/a,l.height=(u.height*a|0)/a,r.stack[0].renderTarget.transform||e[0].autoFit&&l.fit(r.stack[0].destinationFrame),l.pad(s),c.width=l.width,c.height=l.height;var h=this.getPotRenderTarget(n.gl,l.width,l.height,a);o.target=t,o.filters=e,o.resolution=a,o.renderTarget=h,h.setFrame(c,l),n.bindRenderTarget(h),h.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],n=t.stack[t.index];this.quad.map(n.renderTarget.size,n.sourceFrame).upload();var r=n.filters;if(1===r.length)r[0].apply(this,n.renderTarget,e.renderTarget,!1,n),this.freePotRenderTarget(n.renderTarget);else{var i=n.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,n.sourceFrame.width,n.sourceFrame.height,n.resolution);o.setFrame(n.destinationFrame,n.sourceFrame),o.clear();var a=0;for(a=0;a<r.length-1;++a){r[a].apply(this,i,o,!0,n);var s=i;i=o,o=s}r[a].apply(this,i,e.renderTarget,!1,n),this.freePotRenderTarget(i),this.freePotRenderTarget(o)}0===--t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,n,r){var i=this.renderer,o=i.gl,a=t.glShaders[i.CONTEXT_UID];a||(t.glShaderKey?(a=this.shaderCache[t.glShaderKey])||(a=new v.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[i.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=a):a=t.glShaders[i.CONTEXT_UID]=new v.default(this.gl,t.vertexSrc,t.fragmentSrc),i.bindVao(null),this.quad.initVao(a)),i.bindVao(this.quad.vao),i.bindRenderTarget(n),r&&(o.disable(o.SCISSOR_TEST),i.clear(),o.enable(o.SCISSOR_TEST)),n===i.maskManager.scissorRenderTarget&&i.maskManager.pushScissorMask(null,i.maskManager.scissorData),i.bindShader(a);var s=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=s,this.syncUniforms(a,t),i.state.setBlendMode(t.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var n=e.uniformData,r=e.uniforms,i=1,o=void 0;if(t.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var a=t.uniforms.filterArea;a[0]=o.renderTarget.size.width,a[1]=o.renderTarget.size.height,a[2]=o.sourceFrame.x,a[3]=o.sourceFrame.y,t.uniforms.filterArea=a}if(t.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var s=t.uniforms.filterClamp;s[0]=0,s[1]=0,s[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,s[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,t.uniforms.filterClamp=s}for(var u in n)if("sampler2D"===n[u].type&&0!==r[u]){if(r[u].baseTexture)t.uniforms[u]=this.renderer.bindTexture(r[u].baseTexture,i);else{t.uniforms[u]=i;var l=this.renderer.gl;this.renderer.boundTextures[i]=this.renderer.emptyTextures[i],l.activeTexture(l.TEXTURE0+i),r[u].texture.bind()}i++}else if("mat3"===n[u].type)void 0!==r[u].a?t.uniforms[u]=r[u].toArray(!0):t.uniforms[u]=r[u];else if("vec2"===n[u].type)if(void 0!==r[u].x){var c=t.uniforms[u]||new Float32Array(2);c[0]=r[u].x,c[1]=r[u].y,t.uniforms[u]=c}else t.uniforms[u]=r[u];else"float"===n[u].type?t.uniforms.data[u].value!==n[u]&&(t.uniforms[u]=r[u]):t.uniforms[u]=r[u]},e.prototype.getRenderTarget=function(t,e){var n=this.filterData.stack[this.filterData.index],r=this.getPotRenderTarget(this.renderer.gl,n.sourceFrame.width,n.sourceFrame.height,e||n.resolution);return r.setFrame(n.destinationFrame,n.sourceFrame),r},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return m.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return m.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var n=this.filterData.stack[this.filterData.index];return m.calculateSpriteMatrix(t,n.sourceFrame,n.renderTarget.size,e)},e.prototype.destroy=function(){this.shaderCache={},this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,n,r){e=_.default.nextPow2(e*r),n=_.default.nextPow2(n*r);var i=(65535&e)<<16|65535&n;this.pool[i]||(this.pool[i]=[]);var o=this.pool[i].pop();if(!o){var a=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),o=new h.default(t,e,n,null,1),t.bindTexture(t.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)}return o.resolution=r,o.defaultFrame.width=o.size.width=e/r,o.defaultFrame.height=o.size.height=n/r,o},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var n=0;n<e.length;n++)e[n].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){var e=t.size.width*t.resolution,n=t.size.height*t.resolution,r=(65535&e)<<16|65535&n;this.pool[r].push(t)},e}(l.default);e.default=x},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=n(23),l=r(u),c=n(111),h=r(c),f=function(t){function e(n){i(this,e);var r=o(this,t.call(this,n));return r.scissor=!1,r.scissorData=null,r.scissorRenderTarget=null,r.enableScissor=!0,r.alphaMaskPool=[],r.alphaMaskIndex=0,r}return a(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var n=e.worldTransform,r=Math.atan2(n.b,n.a);r=Math.round(r*(180/Math.PI)),r%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var n=this.alphaMaskPool[this.alphaMaskIndex];n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new h.default(e)]),n[0].resolution=this.renderer.resolution,n[0].maskSprite=e,t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,n),this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var n=this.renderer._activeRenderTarget,r=e.getBounds();r.fit(n.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var i=this.renderer.resolution;this.renderer.gl.scissor(r.x*i,(n.root?n.size.height-r.y-r.height:r.y)*i,r.width*i,r.height*i),this.scissorRenderTarget=n,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(l.default);e.default=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var s=n(23),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(n){r(this,e);var o=i(this,t.call(this,n));return o.stencilMaskStack=null,o}return o(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,n=this.stencilMaskStack;0===n.length&&(e.enable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.stencilFunc(e.ALWAYS,1,1)),n.push(t),e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,n.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack,n=e.pop();0===e.length?t.disable(t.STENCIL_TEST):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(n),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,e.length),t.stencilOp(t.KEEP,t.KEEP,t.KEEP))},e.prototype.destroy=function(){u.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(u.default);e.default=l},function(t,e,n){"use strict";function r(t,e){var n=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(n){var r=document.createElement("canvas");r.width=1,r.height=1,e=a.default.createContext(r)}for(var o=e.createShader(e.FRAGMENT_SHADER);;){var u=s.replace(/%forloop%/gi,i(t));if(e.shaderSource(o,u),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS))break;t=t/2|0}return n&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t}function i(t){for(var e="",n=0;n<t;++n)n>0&&(e+="\nelse "),n<t-1&&(e+="if(test == "+n+".0){}");return e}e.__esModule=!0,e.default=r;var o=n(9),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[i.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[i.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[i.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.DST_ALPHA,t.ONE,t.DST_ALPHA],e[i.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_COLOR],e}e.__esModule=!0,e.default=r;var i=n(0)},function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[i.DRAW_MODES.POINTS]=t.POINTS,e[i.DRAW_MODES.LINES]=t.LINES,e[i.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[i.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[i.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[i.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[i.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e}e.__esModule=!0,e.default=r;var i=n(0)},function(t,e,n){"use strict";function r(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}e.__esModule=!0,e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(22),a=r(o),s=n(0),u=n(5),l=n(49),c=r(l),h=new u.Matrix,f=function(){function t(e){i(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,n=this.renderer,r=e._frame.width,i=e._frame.height,o=t.transform.worldTransform,a=0,l=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(n.setBlendMode(t.blendMode),e.valid)){n.context.globalAlpha=t.worldAlpha;var f=e.baseTexture.scaleMode===s.SCALE_MODES.LINEAR;n.smoothProperty&&n.context[n.smoothProperty]!==f&&(n.context[n.smoothProperty]=f),e.trim?(a=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,l=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(a=(.5-t.anchor.x)*e.orig.width,l=(.5-t.anchor.y)*e.orig.height),e.rotate&&(o.copy(h),o=h,u.GroupD8.matrixAppendRotationInv(o,e.rotate,a,l),a=0,l=0),a-=r/2,l-=i/2,n.roundPixels?(n.context.setTransform(o.a,o.b,o.c,o.d,o.tx*n.resolution|0,o.ty*n.resolution|0),a|=0,l|=0):n.context.setTransform(o.a,o.b,o.c,o.d,o.tx*n.resolution,o.ty*n.resolution);var p=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=c.default.getTintedTexture(t,t.tint)),n.context.drawImage(t.tintedTexture,0,0,r*p,i*p,a*n.resolution,l*n.resolution,r*n.resolution,i*n.resolution)):n.context.drawImage(e.baseTexture.source,e._frame.x*p,e._frame.y*p,r*p,i*p,a*n.resolution,l*n.resolution,r*n.resolution,i*n.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();e.default=f,a.default.registerPlugin("sprite",f)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(e){r(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();e.default=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=n(31),l=r(u),c=n(30),h=r(c),f=n(118),p=r(f),d=n(215),y=r(d),v=n(208),g=r(v),m=n(213),b=r(m),_=n(4),w=r(_),x=n(2),T=n(9),S=r(T),E=n(41),O=r(E),M=0,P=0,C=function(t){function e(n){i(this,e);var r=o(this,t.call(this,n));r.vertSize=5,r.vertByteSize=4*r.vertSize,r.size=w.default.SPRITE_BATCH_SIZE,r.buffers=[];for(var a=1;a<=O.default.nextPow2(r.size);a*=2)r.buffers.push(new b.default(4*a*r.vertByteSize));r.indices=(0,p.default)(r.size),r.shader=null,r.currentIndex=0,r.groups=[];for(var s=0;s<r.size;s++)r.groups[s]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return r.sprites=[],r.vertexBuffers=[],r.vaos=[],r.vaoMax=2,r.vertexCount=0,r.renderer.on("prerender",r.onPrerender,r),r}return a(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),w.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,g.default)(this.MAX_TEXTURES,t)),this.shader=(0,y.default)(t,this.MAX_TEXTURES),this.indexBuffer=S.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,n=0;n<this.vaoMax;n++){var r=this.vertexBuffers[n]=S.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),i=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(r,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(r,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(r,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&i.addAttribute(r,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[n]=i}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,n=O.default.nextPow2(this.currentIndex),r=O.default.log2(n),i=this.buffers[r],o=this.sprites,a=this.groups,s=i.float32View,u=i.uint32View,l=this.boundTextures,c=this.renderer.boundTextures,h=this.renderer.textureGC.count,f=0,p=void 0,d=void 0,y=1,v=0,g=a[0],m=void 0,b=void 0,_=x.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];g.textureCount=0,g.start=0,g.blend=_,M++;var T=void 0;for(T=0;T<e;++T)l[T]=c[T],l[T]._virtalBoundId=T;for(T=0;T<this.currentIndex;++T){var E=o[T];p=E._texture.baseTexture;var C=x.premultiplyBlendMode[Number(p.premultipliedAlpha)][E.blendMode];if(_!==C&&(_=C,d=null,v=e,M++),d!==p&&(d=p,p._enabled!==M)){if(v===e&&(M++,g.size=T-g.start,v=0,g=a[y++],g.blend=_,g.textureCount=0,g.start=T),p.touched=h,-1===p._virtalBoundId)for(var A=0;A<e;++A){var k=(A+P)%e,I=l[k];if(I._enabled!==M){P++,I._virtalBoundId=-1,p._virtalBoundId=k,l[k]=p;break}}p._enabled=M,g.textureCount++,g.ids[v]=p._virtalBoundId,g.textures[v++]=p}if(m=E.vertexData,b=E._texture._uvs.uvsUint32,this.renderer.roundPixels){var R=this.renderer.resolution;s[f]=(m[0]*R|0)/R,s[f+1]=(m[1]*R|0)/R,s[f+5]=(m[2]*R|0)/R,s[f+6]=(m[3]*R|0)/R,s[f+10]=(m[4]*R|0)/R,s[f+11]=(m[5]*R|0)/R,s[f+15]=(m[6]*R|0)/R,s[f+16]=(m[7]*R|0)/R}else s[f]=m[0],s[f+1]=m[1],s[f+5]=m[2],s[f+6]=m[3],s[f+10]=m[4],s[f+11]=m[5],s[f+15]=m[6],s[f+16]=m[7];u[f+2]=b[0],u[f+7]=b[1],u[f+12]=b[2],u[f+17]=b[3];var j=Math.min(E.worldAlpha,1),D=j<1&&p.premultipliedAlpha?(0,x.premultiplyTint)(E._tintRGB,j):E._tintRGB+(255*j<<24);u[f+3]=u[f+8]=u[f+13]=u[f+18]=D,s[f+4]=s[f+9]=s[f+14]=s[f+19]=p._virtalBoundId,f+=20}if(g.size=T-g.start,w.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var L=this.shader.attributes,N=this.vertexBuffers[this.vertexCount]=S.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),B=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(N,L.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(N,L.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(N,L.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);L.aTextureId&&B.addAttribute(N,L.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=B}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!1),this.vertexCount++}for(T=0;T<e;++T)c[T]._virtalBoundId=-1;for(T=0;T<y;++T){for(var F=a[T],U=F.textureCount,W=0;W<U;W++)d=F.textures[W],c[F.ids[W]]!==d&&this.renderer.bindTexture(d,F.ids[W],!0),d._virtalBoundId=-1;this.renderer.state.setBlendMode(F.blend),t.drawElements(t.TRIANGLES,6*F.size,t.UNSIGNED_SHORT,6*F.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),w.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var n=0;n<this.buffers.length;++n)this.buffers[n].destroy()},e}(l.default);e.default=C,h.default.registerPlugin("sprite",C)},function(t,e,n){"use strict";function r(t,e){var n=s;n=n.replace(/%count%/gi,e),n=n.replace(/%forloop%/gi,i(e));for(var r=new a.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",n),o=[],u=0;u<e;u++)o[u]=u;return r.bind(),r.uniforms.uSamplers=o,r}function i(t){var e="";e+="\n",e+="\n";for(var n=0;n<t;n++)n>0&&(e+="\nelse "),n<t-1&&(e+="if(textureId == "+n+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}e.__esModule=!0,e.default=r;var o=n(28),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=(n(10),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(48),c=r(l),h=n(13),f=r(h),p=n(5),d=n(2),y=n(0),v=n(4),g=r(v),m=n(114),b=r(m),_=n(113),w=r(_),x=n(226),T=r(x),S={texture:!0,children:!1,baseTexture:!0},E=function(t){function e(n,r,a){i(this,e),a=a||document.createElement("canvas"),a.width=3,a.height=3;var s=f.default.fromCanvas(a,g.default.SCALE_MODE,"text");s.orig=new p.Rectangle,s.trim=new p.Rectangle;var u=o(this,t.call(this,s));return f.default.addToCache(u._texture,u._texture.baseTexture.textureCacheIds[0]),u.canvas=a,u.context=u.canvas.getContext("2d"),u.resolution=g.default.RESOLUTION,u._text=null,u._style=null,u._styleListener=null,u._font="",u.text=n,u.style=r,u.localStyleID=-1,u}return a(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var n=this.context,r=w.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),i=r.width,o=r.height,a=r.lines,s=r.lineHeight,u=r.lineWidths,l=r.maxLineWidth,c=r.fontProperties;this.canvas.width=Math.ceil((i+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((o+2*e.padding)*this.resolution),n.scale(this.resolution,this.resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.strokeStyle=e.stroke,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;var h=void 0,f=void 0;if(e.dropShadow){n.fillStyle=e.dropShadowColor,n.globalAlpha=e.dropShadowAlpha,n.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(n.shadowColor=e.dropShadowColor);for(var p=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,d=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,y=0;y<a.length;y++)h=e.strokeThickness/2,f=e.strokeThickness/2+y*s+c.ascent,"right"===e.align?h+=l-u[y]:"center"===e.align&&(h+=(l-u[y])/2),e.fill&&(this.drawLetterSpacing(a[y],h+p+e.padding,f+d+e.padding),e.stroke&&e.strokeThickness&&(n.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(a[y],h+p+e.padding,f+d+e.padding,!0),n.strokeStyle=e.stroke))}n.shadowBlur=0,n.globalAlpha=1,n.fillStyle=this._generateFillStyle(e,a);for(var v=0;v<a.length;v++)h=e.strokeThickness/2,f=e.strokeThickness/2+v*s+c.ascent,"right"===e.align?h+=l-u[v]:"center"===e.align&&(h+=(l-u[v])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(a[v],h+e.padding,f+e.padding,!0),e.fill&&this.drawLetterSpacing(a[v],h+e.padding,f+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this._style,o=i.letterSpacing;if(0===o)return void(r?this.context.strokeText(t,e,n):this.context.fillText(t,e,n));for(var a=String.prototype.split.call(t,""),s=e,u=0,l="";u<t.length;)l=a[u++],r?this.context.strokeText(l,s,n):this.context.fillText(l,s,n),s+=this.context.measureText(l).width+o},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,T.default)(t);t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0)}var n=this._texture,r=this._style,i=r.trim?0:r.padding,o=n.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=t.width,o.realHeight=t.height,o.width=t.width/this.resolution,o.height=t.height/this.resolution,n.trim.width=n._frame.width=t.width/this.resolution,n.trim.height=n._frame.height=t.height/this.resolution,n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-2*i,n.orig.height=n._frame.height-2*i,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var n=void 0,r=void 0,i=void 0,o=void 0,a=this.canvas.width/this.resolution,s=this.canvas.height/this.resolution,u=t.fill.slice(),l=t.fillGradientStops.slice();if(!l.length)for(var c=u.length+1,h=1;h<c;++h)l.push(h/c);if(u.unshift(t.fill[0]),l.unshift(0),u.push(t.fill[t.fill.length-1]),l.push(1),t.fillGradientType===y.TEXT_GRADIENT.LINEAR_VERTICAL){n=this.context.createLinearGradient(a/2,0,a/2,s),r=(u.length+1)*e.length,i=0;for(var f=0;f<e.length;f++){i+=1;for(var p=0;p<u.length;p++)o="number"==typeof l[p]?l[p]/e.length+f/e.length:i/r,n.addColorStop(o,u[p]),i++}}else{n=this.context.createLinearGradient(0,s/2,a,s/2),r=u.length+1,i=1;for(var d=0;d<u.length;d++)o="number"==typeof l[d]?l[d]:i/r,n.addColorStop(o,u[d]),i++}return n},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},S,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},u(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,d.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,d.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){t=t||{},t instanceof b.default?this._style=t:this._style=new b.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null===t||void 0===t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(c.default);e.default=E},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(3),a=n(2),s=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r(this,t),this.baseTexture=e,this.textures={},this.data=n,this.resolution=this._updateResolution(i||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return i(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,n=(0,a.getResolutionOfUrl)(t,null);return null===n&&(n=void 0!==e?parseFloat(e):1),1!==n&&(this.baseTexture.resolution=n,this.baseTexture.update()),n},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var n=e,r=t.BATCH_SIZE;n-e<r&&n<this._frameKeys.length;){var i=this._frameKeys[n],a=this._frames[i].frame;if(a){var s=null,u=null,l=new o.Rectangle(0,0,this._frames[i].sourceSize.w/this.resolution,this._frames[i].sourceSize.h/this.resolution);s=this._frames[i].rotated?new o.Rectangle(a.x/this.resolution,a.y/this.resolution,a.h/this.resolution,a.w/this.resolution):new o.Rectangle(a.x/this.resolution,a.y/this.resolution,a.w/this.resolution,a.h/this.resolution),this._frames[i].trimmed&&(u=new o.Rectangle(this._frames[i].spriteSourceSize.x/this.resolution,this._frames[i].spriteSourceSize.y/this.resolution,a.w/this.resolution,a.h/this.resolution)),this.textures[i]=new o.Texture(this.baseTexture,s,l,u,this._frames[i].rotated?2:0),o.Texture.addToCache(this.textures[i],i)}n++}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():e._parseComplete()},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(4),s=r(a),u=n(0),l=n(219),c=r(l),h=function(){function t(){var e=this;i(this,t),this._head=new c.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/s.default.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.UPDATE_PRIORITY.NORMAL;return this._addListener(new c.default(t,e,n))},t.prototype.addOnce=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.UPDATE_PRIORITY.NORMAL;return this._addListener(new c.default(t,e,n,!0))},t.prototype._addListener=function(t){var e=this._head.next,n=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}else t.connect(n);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var n=this._head.next;n;)n=n.match(t,e)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*s.default.TARGET_FPMS*this.speed;for(var n=this._head,r=n.next;r;)r=r.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},o(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,s.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();e.default=h},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r(this,t),this.fn=e,this.context=n,this.priority=i,this.once=o,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.previous;return this.next=t?null:e,this.previous=null,e},t}();e.default=i},function(t,e,n){"use strict";function r(){return!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}e.__esModule=!0,e.default=r},function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,a||(a=document.createElement("a")),a.href=t,t=o.default.parse(a.href);var n=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&n&&t.protocol===e.protocol?"":"anonymous"}e.__esModule=!0,e.default=r;var i=n(133),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=void 0},function(t,e,n){"use strict";function r(){for(var t=[],e=[],n=0;n<32;n++)t[n]=n,e[n]=n;t[i.BLEND_MODES.NORMAL_NPM]=i.BLEND_MODES.NORMAL,t[i.BLEND_MODES.ADD_NPM]=i.BLEND_MODES.ADD,t[i.BLEND_MODES.SCREEN_NPM]=i.BLEND_MODES.SCREEN,e[i.BLEND_MODES.NORMAL]=i.BLEND_MODES.NORMAL_NPM,e[i.BLEND_MODES.ADD]=i.BLEND_MODES.ADD_NPM,e[i.BLEND_MODES.SCREEN]=i.BLEND_MODES.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}e.__esModule=!0,e.default=r;var i=n(0)},function(t,e,n){"use strict";function r(t){return o.default.tablet||o.default.phone?4:t}e.__esModule=!0,e.default=r;var i=n(87),o=function(t){return t&&t.__esModule?t:{default:t}}(i)},function(t,e,n){"use strict";function r(t,e){if(t&&e)for(var n=Object.keys(e),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}}function i(t,e){a.push(t,e)}function o(){for(var t=0;t<a.length;t+=2)r(a[t],a[t+1]);a.length=0}e.__esModule=!0,e.mixin=r,e.delayMixin=i,e.performMixins=o;var a=[]},function(t,e,n){"use strict";function r(t){t.__plugins={},t.registerPlugin=function(e,n){t.__plugins[e]=n},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}e.__esModule=!0,e.default={mixin:function(t){r(t)}}},function(t,e,n){"use strict";function r(t){var e=t.width,n=t.height,r=t.getContext("2d"),i=r.getImageData(0,0,e,n),o=i.data,a=o.length,s={top:null,left:null,right:null,bottom:null},u=void 0,l=void 0,c=void 0;for(u=0;u<a;u+=4)0!==o[u+3]&&(l=u/4%e,c=~~(u/4/e),null===s.top&&(s.top=c),null===s.left?s.left=l:l<s.left&&(s.left=l),null===s.right?s.right=l+1:s.right<l&&(s.right=l+1),null===s.bottom?s.bottom=c:s.bottom<c&&(s.bottom=c));return e=s.right-s.left,n=s.bottom-s.top+1,{height:n,width:e,data:r.getImageData(s.left,s.top,e,n)}}e.__esModule=!0,e.default=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(u),c=function(t){function e(n,o){r(this,e);var a=i(this,t.call(this,n[0]instanceof l.Texture?n[0]:n[0].texture));return a._textures=null,a._durations=null,a.textures=n,a._autoUpdate=!1!==o,a.animationSpeed=1,a.loop=!0,a.onComplete=null,a.onFrameChange=null,a.onLoop=null,a._currentTime=0,a.playing=!1,a}return o(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&l.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&l.ticker.shared.add(this.update,this,l.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n?this.onLoop():this.animationSpeed<0&&this.currentFrame>n&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e)},e.fromFrames=function(t){for(var n=[],r=0;r<t.length;++r)n.push(l.Texture.fromFrame(t[r]));return new e(n)},e.fromImages=function(t){for(var n=[],r=0;r<t.length;++r)n.push(l.Texture.fromImage(t[r]));return new e(n)},s(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof l.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(l.Sprite);e.default=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(3),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(l),h=n(106),f=r(h),p=n(4),d=r(p),y=function(t){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e);var a=o(this,t.call(this));return a._textWidth=0,a._textHeight=0,a._glyphs=[],a._font={tint:void 0!==r.tint?r.tint:16777215,align:r.align||"left",name:null,size:0},a.font=r.font,a._text=n,a._maxWidth=0,a._maxLineHeight=0,a._anchor=new f.default(function(){a.dirty=!0},a,0,0),a.dirty=!1,a.updateText(),a}return a(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],n=this._font.size/t.size,r=new c.Point,i=[],o=[],a=null,s=0,u=0,l=0,h=-1,f=0,p=0,d=0,y=0;y<this.text.length;y++){var v=this.text.charCodeAt(y);if(/(\s)/.test(this.text.charAt(y))&&(h=y,f=s),/(?:\r\n|\r|\n)/.test(this.text.charAt(y)))o.push(s),u=Math.max(u,s),l++,r.x=0,r.y+=t.lineHeight,a=null;else if(-1!==h&&this._maxWidth>0&&r.x*n>this._maxWidth)c.utils.removeItems(i,h-p,y-h),y=h,h=-1,++p,o.push(f),u=Math.max(u,f),l++,r.x=0,r.y+=t.lineHeight,a=null;else{var g=t.chars[v];g&&(a&&g.kerning[a]&&(r.x+=g.kerning[a]),i.push({texture:g.texture,line:l,charCode:v,position:new c.Point(r.x+g.xOffset,r.y+g.yOffset)}),s=r.x+(g.texture.width+g.xOffset),r.x+=g.xAdvance,d=Math.max(d,g.yOffset+g.texture.height),a=v)}}o.push(s),u=Math.max(u,s);for(var m=[],b=0;b<=l;b++){var _=0;"right"===this._font.align?_=u-o[b]:"center"===this._font.align&&(_=(u-o[b])/2),m.push(_)}for(var w=i.length,x=this.tint,T=0;T<w;T++){var S=this._glyphs[T];S?S.texture=i[T].texture:(S=new c.Sprite(i[T].texture),this._glyphs.push(S)),S.position.x=(i[T].position.x+m[i[T].line])*n,S.position.y=i[T].position.y*n,S.scale.x=S.scale.y=n,S.tint=x,S.parent||this.addChild(S)}for(var E=w;E<this._glyphs.length;++E)this.removeChild(this._glyphs[E]);if(this._textWidth=u*n,this._textHeight=(r.y+t.lineHeight)*n,0!==this.anchor.x||0!==this.anchor.y)for(var O=0;O<w;O++)this._glyphs[O].x-=this._textWidth*this.anchor.x,this._glyphs[O].y-=this._textHeight*this.anchor.y;this._maxLineHeight=d*n},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,n){var r={},i=t.getElementsByTagName("info")[0],o=t.getElementsByTagName("common")[0],a=n.baseTexture.resolution||d.default.RESOLUTION;r.font=i.getAttribute("face"),r.size=parseInt(i.getAttribute("size"),10),r.lineHeight=parseInt(o.getAttribute("lineHeight"),10)/a,r.chars={};for(var s=t.getElementsByTagName("char"),u=0;u<s.length;u++){var l=s[u],h=parseInt(l.getAttribute("id"),10),f=new c.Rectangle(parseInt(l.getAttribute("x"),10)/a+n.frame.x/a,parseInt(l.getAttribute("y"),10)/a+n.frame.y/a,parseInt(l.getAttribute("width"),10)/a,parseInt(l.getAttribute("height"),10)/a);r.chars[h]={xOffset:parseInt(l.getAttribute("xoffset"),10)/a,yOffset:parseInt(l.getAttribute("yoffset"),10)/a,xAdvance:parseInt(l.getAttribute("xadvance"),10)/a,kerning:{},texture:new c.Texture(n.baseTexture,f)}}for(var p=t.getElementsByTagName("kerning"),y=0;y<p.length;y++){var v=p[y],g=parseInt(v.getAttribute("first"),10)/a,m=parseInt(v.getAttribute("second"),10)/a,b=parseInt(v.getAttribute("amount"),10)/a;r.chars[m]&&(r.chars[m].kerning[g]=b)}return e.fonts[r.font]=r,r},u(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(c.Container);e.default=y,y.fonts={}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(3),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(l),h=n(49),f=r(h),p=n(119),d=r(p),y=new c.Point,v=function(t){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;i(this,e);var s=o(this,t.call(this,n));return s.tileTransform=new c.TransformStatic,s._width=r,s._height=a,s._canvasPattern=null,s.uvTransform=n.transform||new d.default(n),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return a(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture)},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var n=t.context,r=this.worldTransform,i=t.resolution,o=e.baseTexture,a=o.resolution,s=this.tilePosition.x/this.tileScale.x%e._frame.width*a,u=this.tilePosition.y/this.tileScale.y%e._frame.height*a;if(!this._canvasPattern){var l=new c.CanvasRenderTarget(e._frame.width,e._frame.height,a);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=f.default.getTintedTexture(this,this.tint)),l.context.drawImage(this.tintedTexture,0,0)):l.context.drawImage(o.source,-e._frame.x*a,-e._frame.y*a),this._canvasPattern=l.context.createPattern(l.canvas,"repeat")}n.globalAlpha=this.worldAlpha,n.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),t.setBlendMode(this.blendMode),n.fillStyle=this._canvasPattern,n.scale(this.tileScale.x/a,this.tileScale.y/a);var h=this.anchor.x*-this._width,p=this.anchor.y*-this._height;this.uvRespectAnchor?(n.translate(s,u),n.fillRect(-s+h,-u+p,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a)):(n.translate(s+h,u+p),n.fillRect(-s,-u,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,n,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new c.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,y);var e=this._width,n=this._height,r=-e*this.anchor._x;if(y.x>=r&&y.x<r+e){var i=-n*this.anchor._y;if(y.y>=i&&y.y<i+n)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},e.from=function(t,n,r){return new e(c.Texture.from(t),n,r)},e.fromFrame=function(t,n,r){var i=c.utils.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(i,n,r)},e.fromImage=function(t,n,r,i,o){return new e(c.Texture.fromImage(t,i,o),n,r)},u(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(c.Sprite);e.default=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(3),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(o),s=n(13),u=r(s),l=n(16),c=r(l),h=n(2),f=a.DisplayObject,p=new a.Matrix;f.prototype._cacheAsBitmap=!1,f.prototype._cacheData=!1;var d=function t(){i(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(f.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new d),e=this._cacheData,e.originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),f.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},f.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var n=this.getLocalBounds().clone();if(this._filters){var r=this._filters[0].padding;n.pad(r)}var i=t._activeRenderTarget,o=t.filterManager.filterStack,s=a.RenderTexture.create(0|n.width,0|n.height),l="cacheAsBitmap_"+(0,h.uid)();this._cacheData.textureCacheId=l,c.default.addToCache(s.baseTexture,l),u.default.addToCache(s,l);var f=p;f.tx=-n.x,f.ty=-n.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,s,!0,f,!0),t.bindRenderTarget(i),t.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var d=new a.Sprite(s);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-n.x/n.width,d.anchor.y=-n.y/n.height,d.alpha=e,d._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=d.containsPoint.bind(d)}},f.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(t))},f.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),n=this.alpha;this.alpha=1;var r=t.context,i=a.RenderTexture.create(0|e.width,0|e.height),o="cacheAsBitmap_"+(0,h.uid)();this._cacheData.textureCacheId=o,c.default.addToCache(i.baseTexture,o),u.default.addToCache(i,o);var s=p;this.transform.localTransform.copy(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,i,!0,s,!1),t.context=r,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var l=new a.Sprite(i);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-e.x/e.width,l.anchor.y=-e.y/e.height,l._bounds=this._bounds,l.alpha=n,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=l,this.containsPoint=l.containsPoint.bind(l)}},f.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},f.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},f.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,c.default.removeFromCache(this._cacheData.textureCacheId),u.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},f.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},function(t,e,n){"use strict";var r=n(3),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r);i.DisplayObject.prototype.name=null,i.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},function(t,e,n){"use strict";var r=n(3),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r);i.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var s=n(3),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(s),l=n(0),c=(n(10),new u.Matrix),h=function(t){function e(n){r(this,e);var o=i(this,t.call(this,n));return o.shader=null,o.simpleShader=null,o.quad=null,o}return o(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new u.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n    gl_FragColor = sample * color ;\n}\n"),this.simpleShader=new u.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n    gl_FragColor = sample * color;\n}\n"),this.renderer.bindVao(null),this.quad=new u.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.renderer,n=this.quad;e.bindVao(n.vao);var r=n.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&(r=n.uvs,r[0]=r[6]=-t.anchor.x,r[1]=r[3]=-t.anchor.y,r[2]=r[4]=1-t.anchor.x,r[5]=r[7]=1-t.anchor.y),n.upload();var i=t._texture,o=i.baseTexture,a=t.tileTransform.localTransform,s=t.uvTransform,h=o.isPowerOfTwo&&i.frame.width===o.width&&i.frame.height===o.height;h&&(o._glTextures[e.CONTEXT_UID]?h=o.wrapMode!==l.WRAP_MODES.CLAMP:o.wrapMode===l.WRAP_MODES.CLAMP&&(o.wrapMode=l.WRAP_MODES.REPEAT));var f=h?this.simpleShader:this.shader;e.bindShader(f);var p=i.width,d=i.height,y=t._width,v=t._height;c.set(a.a*p/y,a.b*p/v,a.c*d/y,a.d*d/v,a.tx/y,a.ty/v),c.invert(),h?c.prepend(s.mapCoord):(f.uniforms.uMapCoord=s.mapCoord.toArray(!0),f.uniforms.uClampFrame=s.uClampFrame,f.uniforms.uClampOffset=s.uClampOffset),f.uniforms.uTransform=c.toArray(!0),f.uniforms.uColor=u.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,f.uniforms.uColor,o.premultipliedAlpha),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=e.bindTexture(i),e.setBlendMode(u.utils.correctBlendMode(t.blendMode,o.premultipliedAlpha)),n.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(u.ObjectRenderer);e.default=h,u.WebGLRenderer.registerPlugin("tilingSprite",h)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(3),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(l),h=n(121),f=r(h),p=n(122),d=r(p),y=function(t){function e(n,r,a,s){i(this,e);var u=o(this,t.call(this));return u.blurXFilter=new f.default(n,r,a,s),u.blurYFilter=new d.default(n,r,a,s),u.padding=0,u.resolution=a||c.settings.RESOLUTION,u.quality=r||4,u.blur=n||8,u}return a(e,t),e.prototype.apply=function(t,e,n){var r=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,r,!0),this.blurYFilter.apply(t,r,n,!1),t.returnRenderTarget(r)},u(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}}]),e}(c.Filter);e.default=y},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(u),c=(n(10),function(t){function e(){r(this,e);var n=i(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return n.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],n.alpha=1,n}return o(e,t),e.prototype._loadMatrix=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t;e&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n},e.prototype._multiply=function(t,e,n){return t[0]=e[0]*n[0]+e[1]*n[5]+e[2]*n[10]+e[3]*n[15],t[1]=e[0]*n[1]+e[1]*n[6]+e[2]*n[11]+e[3]*n[16],t[2]=e[0]*n[2]+e[1]*n[7]+e[2]*n[12]+e[3]*n[17],t[3]=e[0]*n[3]+e[1]*n[8]+e[2]*n[13]+e[3]*n[18],t[4]=e[0]*n[4]+e[1]*n[9]+e[2]*n[14]+e[3]*n[19]+e[4],t[5]=e[5]*n[0]+e[6]*n[5]+e[7]*n[10]+e[8]*n[15],t[6]=e[5]*n[1]+e[6]*n[6]+e[7]*n[11]+e[8]*n[16],t[7]=e[5]*n[2]+e[6]*n[7]+e[7]*n[12]+e[8]*n[17],t[8]=e[5]*n[3]+e[6]*n[8]+e[7]*n[13]+e[8]*n[18],t[9]=e[5]*n[4]+e[6]*n[9]+e[7]*n[14]+e[8]*n[19]+e[9],t[10]=e[10]*n[0]+e[11]*n[5]+e[12]*n[10]+e[13]*n[15],t[11]=e[10]*n[1]+e[11]*n[6]+e[12]*n[11]+e[13]*n[16],t[12]=e[10]*n[2]+e[11]*n[7]+e[12]*n[12]+e[13]*n[17],t[13]=e[10]*n[3]+e[11]*n[8]+e[12]*n[13]+e[13]*n[18],t[14]=e[10]*n[4]+e[11]*n[9]+e[12]*n[14]+e[13]*n[19]+e[14],t[15]=e[15]*n[0]+e[16]*n[5]+e[17]*n[10]+e[18]*n[15],t[16]=e[15]*n[1]+e[16]*n[6]+e[17]*n[11]+e[18]*n[16],t[17]=e[15]*n[2]+e[16]*n[7]+e[17]*n[12]+e[18]*n[17],t[18]=e[15]*n[3]+e[16]*n[8]+e[17]*n[13]+e[18]*n[18],t[19]=e[15]*n[4]+e[16]*n[9]+e[17]*n[14]+e[18]*n[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.greyscale=function(t,e){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var n=Math.cos(t),r=Math.sin(t),i=Math.sqrt,o=1/3,a=i(o),s=n+(1-n)*o,u=o*(1-n)-a*r,l=o*(1-n)+a*r,c=o*(1-n)+a*r,h=n+o*(1-n),f=o*(1-n)-a*r,p=o*(1-n)-a*r,d=o*(1-n)+a*r,y=n+o*(1-n),v=[s,u,l,0,0,c,h,f,0,0,p,d,y,0,0,0,0,0,1,0];this._loadMatrix(v,e)},e.prototype.contrast=function(t,e){var n=(t||0)+1,r=-128*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],n=2*t/3+1,r=-.5*(n-1),i=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){var e=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.colorTone=function(t,e,n,r,i){t=t||.2,e=e||.15,n=n||16770432,r=r||3375104;var o=(n>>16&255)/255,a=(n>>8&255)/255,s=(255&n)/255,u=(r>>16&255)/255,l=(r>>8&255)/255,c=(255&r)/255,h=[.3,.59,.11,0,0,o,a,s,t,0,u,l,c,e,0,o-u,a-l,s-c,0,0];this._loadMatrix(h,i)},e.prototype.night=function(t,e){t=t||.1;var n=[-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.predator=function(t,e){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},s(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(l.Filter));e.default=c,c.prototype.grayscale=c.prototype.greyscale},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(u),c=(n(10),function(t){function e(n,o){r(this,e);var a=new l.Matrix;n.renderable=!1;var s=i(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return s.maskSprite=n,s.maskMatrix=a,s.uniforms.mapSampler=n._texture,s.uniforms.filterMatrix=a,s.uniforms.scale={x:1,y:1},null!==o&&void 0!==o||(o=20),s.scale=new l.Point(o,o),s}return o(e,t),e.prototype.apply=function(t,e,n){var r=1/n.destinationFrame.width*(n.size.width/e.size.width);this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*r,this.uniforms.scale.y=this.scale.y*r,t.applyFilter(this,e,n)},s(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(l.Filter));e.default=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var s=n(3),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(s),l=(n(10),function(t){function e(){return r(this,e),i(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return o(e,t),e}(u.Filter));e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(237);Object.defineProperty(e,"FXAAFilter",{enumerable:!0,get:function(){return r(i).default}});var o=n(239);Object.defineProperty(e,"NoiseFilter",{enumerable:!0,get:function(){return r(o).default}});var a=n(236);Object.defineProperty(e,"DisplacementFilter",{enumerable:!0,get:function(){return r(a).default}});var s=n(234);Object.defineProperty(e,"BlurFilter",{enumerable:!0,get:function(){return r(s).default}});var u=n(121);Object.defineProperty(e,"BlurXFilter",{enumerable:!0,get:function(){return r(u).default}});var l=n(122);Object.defineProperty(e,"BlurYFilter",{enumerable:!0,get:function(){return r(l).default}});var c=n(235);Object.defineProperty(e,"ColorMatrixFilter",{enumerable:!0,get:function(){return r(c).default}});var h=n(240);Object.defineProperty(e,"VoidFilter",{enumerable:!0,get:function(){return r(h).default}})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(u),c=(n(10),function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();r(this,e);var a=i(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return a.noise=n,a.seed=o,a}return o(e,t),s(e,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),e}(l.Filter));e.default=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var s=n(3),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(s),l=(n(10),function(t){function e(){r(this,e);var n=i(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return n.glShaderKey="void",n}return o(e,t),e}(u.Filter));e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.shared=e.Resource=e.textureParser=e.getResourcePath=e.spritesheetParser=e.parseBitmapFontData=e.bitmapFontParser=e.Loader=void 0;var i=n(126);Object.defineProperty(e,"bitmapFontParser",{enumerable:!0,get:function(){return r(i).default}}),Object.defineProperty(e,"parseBitmapFontData",{enumerable:!0,get:function(){return i.parse}});var o=n(127);Object.defineProperty(e,"spritesheetParser",{enumerable:!0,get:function(){return r(o).default}}),Object.defineProperty(e,"getResourcePath",{enumerable:!0,get:function(){return o.getResourcePath}});var a=n(128);Object.defineProperty(e,"textureParser",{enumerable:!0,get:function(){return r(a).default}});var s=n(24);Object.defineProperty(e,"Resource",{enumerable:!0,get:function(){return s.Resource}});var u=n(99),l=r(u),c=n(242),h=r(c);e.Loader=h.default;var f=new h.default;f.destroy=function(){},e.shared=f;var p=l.default.prototype;p._loader=null,Object.defineProperty(p,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?f:new h.default}return this._loader}}),p._parentDestroy=p.destroy,p.destroy=function(t){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var u=n(24),l=r(u),c=n(253),h=n(12),f=r(h),p=n(128),d=r(p),y=n(127),v=r(y),g=n(126),m=r(g),b=function(t){function e(n,r){i(this,e);var a=o(this,t.call(this,n,r));f.default.call(a);for(var s=0;s<e._pixiMiddleware.length;++s)a.use(e._pixiMiddleware[s]());return a.onStart.add(function(t){return a.emit("start",t)}),a.onProgress.add(function(t,e){return a.emit("progress",t,e)}),a.onError.add(function(t,e,n){return a.emit("error",t,e,n)}),a.onLoad.add(function(t,e){return a.emit("load",t,e)}),a.onComplete.add(function(t,e){return a.emit("complete",t,e)}),a}return a(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e.prototype.destroy=function(){this.removeAllListeners(),this.reset()},e}(l.default);e.default=b;for(var _ in f.default.prototype)b.prototype[_]=f.default.prototype[_];b._pixiMiddleware=[c.blobMiddlewareFactory,d.default,v.default,m.default];var w=l.default.Resource;w.setExtensionXhrType("fnt",w.XHR_RESPONSE_TYPE.DOCUMENT)},function(t,e,n){"use strict";Math.sign||(Math.sign=function(t){return t=Number(t),0===t||isNaN(t)?t:t>0?1:-1})},function(t,e,n){"use strict";var r=n(177),i=function(t){return t&&t.__esModule?t:{default:t}}(r);Object.assign||(Object.assign=i.default)},function(t,e,n){"use strict";n(244),n(246),n(243),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},function(t,e,n){"use strict";(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var n=Date.now(),r=["ms","moz","webkit","o"],i=0;i<r.length&&!t.requestAnimationFrame;++i){var o=r[i];t.requestAnimationFrame=t[o+"RequestAnimationFrame"],t.cancelAnimationFrame=t[o+"CancelAnimationFrame"]||t[o+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+n-e;return r<0&&(r=0),n=e,setTimeout(function(){n=Date.now(),t(performance.now())},r)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(e,n(1))},function(t,e,n){"use strict";(function(t,r){var i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a){function s(t){throw new RangeError(L[t])}function u(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function l(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(D,"."),r+u(t.split("."),e).join(".")}function c(t){for(var e,n,r=[],i=0,o=t.length;i<o;)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<o?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function h(t){return u(t,function(t){var e="";return t>65535&&(t-=65536,e+=F(t>>>10&1023|55296),t=56320|1023&t),e+=F(t)}).join("")}function f(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:E}function p(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function d(t,e,n){var r=0;for(t=n?B(t/C):t>>1,t+=B(t/e);t>N*M>>1;r+=E)t=B(t/N);return B(r+(N+1)*t/(t+P))}function y(t){var e,n,r,i,o,a,u,l,c,p,y=[],v=t.length,g=0,m=k,b=A;for(n=t.lastIndexOf(I),n<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&s("not-basic"),y.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(o=g,a=1,u=E;i>=v&&s("invalid-input"),l=f(t.charCodeAt(i++)),(l>=E||l>B((S-g)/a))&&s("overflow"),g+=l*a,c=u<=b?O:u>=b+M?M:u-b,!(l<c);u+=E)p=E-c,a>B(S/p)&&s("overflow"),a*=p;e=y.length+1,b=d(g-o,e,0==o),B(g/e)>S-m&&s("overflow"),m+=B(g/e),g%=e,y.splice(g++,0,m)}return h(y)}function v(t){var e,n,r,i,o,a,u,l,h,f,y,v,g,m,b,_=[];for(t=c(t),v=t.length,e=k,n=0,o=A,a=0;a<v;++a)(y=t[a])<128&&_.push(F(y));for(r=i=_.length,i&&_.push(I);r<v;){for(u=S,a=0;a<v;++a)(y=t[a])>=e&&y<u&&(u=y);for(g=r+1,u-e>B((S-n)/g)&&s("overflow"),n+=(u-e)*g,e=u,a=0;a<v;++a)if(y=t[a],y<e&&++n>S&&s("overflow"),y==e){for(l=n,h=E;f=h<=o?O:h>=o+M?M:h-o,!(l<f);h+=E)b=l-f,m=E-f,_.push(F(p(f+b%m,0))),l=B(b/m);_.push(F(p(l,0))),o=d(n,g,r==i),n=0,++r}++n,++e}return _.join("")}function g(t){return l(t,function(t){return R.test(t)?y(t.slice(4).toLowerCase()):t})}function m(t){return l(t,function(t){return j.test(t)?"xn--"+v(t):t})}var b="object"==o(e)&&e&&!e.nodeType&&e,_="object"==o(t)&&t&&!t.nodeType&&t,w="object"==(void 0===r?"undefined":o(r))&&r;w.global!==w&&w.window!==w&&w.self!==w||(a=w);var x,T,S=2147483647,E=36,O=1,M=26,P=38,C=700,A=72,k=128,I="-",R=/^xn--/,j=/[^\x20-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=E-O,B=Math.floor,F=String.fromCharCode;if(x={version:"1.4.1",ucs2:{decode:c,encode:h},decode:y,encode:v,toASCII:m,toUnicode:g},"object"==o(n(134))&&n(134))void 0!==(i=function(){return x}.call(e,n,e,t))&&(t.exports=i);else if(b&&_)if(t.exports==b)_.exports=x;else for(T in x)x.hasOwnProperty(T)&&(b[T]=x[T]);else a.punycode=x}(void 0)}).call(e,n(258)(t),n(1))},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=t.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var h,f,p,d,y=t[c].replace(s,"%20"),v=y.indexOf(n);v>=0?(h=y.substr(0,v),f=y.substr(v+1)):(h=y,f=""),p=decodeURIComponent(h),d=decodeURIComponent(f),r(a,p)?i(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t){switch(void 0===t?"undefined":i(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,u){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"===(void 0===t?"undefined":i(t))?r(s(t),function(i){var s=encodeURIComponent(o(i))+n;return a(t[i])?r(t[i],function(t){return s+encodeURIComponent(o(t))}).join(e):s+encodeURIComponent(o(t[i]))}).join(e):u?encodeURIComponent(o(u))+n+encodeURIComponent(o(t)):""};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){"use strict";e.decode=e.parse=n(248),e.encode=e.stringify=n(249)},function(t,e,n){"use strict";function r(t,e,n){var r,i=t.length;if(!(e>=i||0===n)){n=e+n>i?i-e:n;var o=i-n;for(r=e;r<o;++r)t[r]=t[r+n];t.length=o}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var a="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":o(t)},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(88),l=r(u),c=n(89),h=r(c),f=n(130),p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(f),d=n(52),y=r(d),v=/(#[\w-]+)?$/,g=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;i(this,t),this.baseUrl=n,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,n){return e._loadResource(t,n)},this._queue=p.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new l.default,this.onError=new l.default,this.onLoad=new l.default,this.onStart=new l.default,this.onComplete=new l.default}return t.prototype.add=function(t,e,n,r){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"===(void 0===t?"undefined":a(t))&&(r=e||t.callback||t.onComplete,n=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(r=n,n=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(r=n,n=null),this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new y.default(t,e,n),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var o=n.parentResource,s=[],u=0;u<o.children.length;++u)o.children[u].isComplete||s.push(o.children[u]);var l=o.progressChunk*(s.length+1),c=l/(s.length+2);o.children.push(this.resources[t]),o.progressChunk=c;for(var h=0;h<s.length;++h)s[h].progressChunk=c;this.resources[t].progressChunk=c}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=this._queue._tasks.length,n=100/e,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=n;this._onStart(),this._queue.resume()}return this},t.prototype._prepareUrl=function(t){var e=(0,h.default)(t,{strictMode:!0}),n=void 0;if(n=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=v.exec(n)[0];n=n.substr(0,n.length-r.length),-1!==n.indexOf("?")?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=r}return n},t.prototype._loadResource=function(t,e){var n=this;t._dequeue=e,p.eachSeries(this._beforeMiddleware,function(e,r){e.call(n,t,function(){r(t.isComplete?{}:null)})},function(){t.isComplete?n._onLoad(t):(t._onLoadBinding=t.onComplete.once(n._onLoad,n),t.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),p.eachSeries(this._afterMiddleware,function(n,r){n.call(e,t,r)},function(){t.onAfterMiddleware.dispatch(t),e.progress+=t.progressChunk,e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()},!0)},s(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();e.default=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(){return function(t,e){if(!t.data)return void e();if(t.xhr&&t.xhrType===u.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var n=function(){var n=h.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=n,t.type=u.default.TYPE.IMAGE,t.data.onload=function(){h.revokeObjectURL(n),t.data.onload=null,e()},{v:void 0}}();if("object"===(void 0===n?"undefined":a(n)))return n.v}}else{var r=t.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return t.data=new Image,t.data.src="data:"+r+";base64,"+c.default.encodeBinary(t.xhr.responseText),t.type=u.default.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__esModule=!0;var a="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":o(t)};e.blobMiddlewareFactory=i;var s=n(52),u=r(s),l=n(131),c=r(l),h=window.URL||window.webkitURL},function(t,e,n){"use strict";function r(t,e,n){this.values=t,this.duration=e,this.options=n,this.onComplete=i.checkFunc(n.onComplete),this.onUpdate=i.checkFunc(n.onUpdate),this.ease=i.checkFunc(n.ease,o.linear),this.start=Date.now(),this.killed=!1,this.paused=!1,this._loop=!1,this.done=!1,this._pausedTimeDiff=0,this._animationMap=Object.keys(t).reduce(function(e,r){var o=i.checkNum(t[r]),a=i.checkNum(n[r]);return null!==o&&null!==a&&(e[r]=[o,a]),e},{}),this.keys=Object.keys(this._animationMap),this._run=this._run.bind(this),i.raf(this._run)}var i=n(256),o=n(132);r.prototype={_run:function(){var t=this;if(!this.killed&&!this.paused){var e=Date.now(),n=this.duration>0?(e-this.start)/this.duration:1;this.keys.forEach(function(e){var r=t._animationMap[e],o=t.ease(n);t.values[e]=i.lerp(r[0],r[1],o)}),n>=1?(this.done=!0,this.keys.forEach(function(e){return t.values[e]=t.options[e]}),this.onUpdate(this.values),this.onComplete(this.values),this._loop&&this.play()):(this.onUpdate(this.values),i.raf(this._run))}},kill:function(){this.killed=!0},pause:function(){this.paused||this.done||(this.paused=!0,this._pausedTimeDiff=Date.now()-this.start)},play:function(){(this.paused||this.done)&&(this.paused=!1,this.done=!1,this.start=Date.now()-this._pausedTimeDiff,this._pausedTimeDiff=0,i.raf(this._run))},restart:function(){var t=this;this.killed||(this.keys.forEach(function(e){return t.values[e]=t._animationMap[e][0]}),this.start=Date.now(),(this.paused||this.done)&&(this.done=!1,this.paused=!1,this.pausedTimeDiff=0,i.raf(this._run)))},loop:function(){return this._loop=!0,this.play(),this}},t.exports=r},function(t,e,n){"use strict";(function(e){t.exports=function(){for(var t=e.requestAnimationFrame,n=["ms","moz","webkit","o"],r=0;r<n.length&&!t;++r)t=e[n[r]+"RequestAnimationFrame"];if(!t){var i=0;t=function(t){var n=Date.now(),r=Math.max(0,16-(n-i)),o=e.setTimeout(function(){return t(n+r)},r);return i=n+r,o}}return t}()}).call(e,n(1))},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(255),o={lerp:function(t,e,n){return t+n*(e-t)},_check:function(t,e,n,i){return(void 0===e?"undefined":r(e))===t?e:i||n},checkNum:function(t,e){return o._check("number",t,null,e)},checkFunc:function(t,e){return o._check("function",t,function(t){return t},e)},raf:function(t){return i(t)}};t.exports=o},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"===(void 0===t?"undefined":r(t))&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";(function(e){function r(t){return t&&t.__esModule?t:{default:t}}var i=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(135),a=r(o),s=n(54),u=r(s),l=n(6),c=r(l),h=n(137),f=r(h),p=n(33),d=r(p),y=n(55),v=r(y),g=n(57),m=r(g),b=n(34),_=r(b),w=n(56),x=r(w),T=n(58),S=r(T),E=n(139),O=r(E),M=n(138),P=r(M);n(140);var C=new O.default;t.exports={core:a.default,JController:f.default,Animation:d.default,Bounds:v.default,IconStyle:m.default,Style:_.default,Font:x.default,Transform:S.default,Dispatcher:O.default,dispatcher:C,VERSION:"4.6.0",util:c.default,init:P.default},[["jmap",t.exports],["jungle",u.default]].forEach(function(t){var n=i(t,2),r=n[0],o=n[1];return Object.defineProperty(e,r,{writable:!1,value:o})}),n(136)("4.6.0"),f.default.getPlatformVersion=function(){return a.default.JCore.getJACSVersion()},f.default.getSDKVersion=function(){return"4.6.0"}}).call(e,n(1))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.x,i=e.y,o=e.width,a=e.height,s=e.mapId,u=e.matrix;r(this,t),this.x=t.validate(n),this.y=t.validate(i),this.width=t.validate(o),this.height=t.validate(a),this.mapId=t.validate(s),this.rotation=t.getRotationFromMatrix(u),this.rotation<0&&(this.rotation+=360)}return i(t,null,[{key:"validate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"number"==typeof t?t:0}},{key:"getRotationFromMatrix",value:function(t){if(!t||t.constructor!==String)return 0;var e=t.split("(")[1].split(")")[0].split(" "),n=+e[0],r=+e[1];return Math.round(Math.atan2(r,n)*(180/Math.PI))}}]),t}();t.exports=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.map=null,this.icons={amenities:{},pathTypes:{},styleByType:{}},this.interactivity={},this.hiddenLayers=[],this.visibleLayers=[],this.currentPaths=[],this.unitContents={},this.mapLabels={text:{labels:{allLevels:[]},loaded:{}},image:{labels:{allLevels:[]},loaded:{}}}}return i(t,[{key:"update",value:function(t){var e=this;Object.keys(t).forEach(function(n){return e[n]=t[n]})}},{key:"get",value:function(t){return this[t]}}]),t}();t.exports=o},function(t,e,n){"use strict";Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return o;i++}}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;for(var i=0|e,o=Math.max(i>=0?i:r-Math.abs(i),0);o<r;){if(function(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}(n[o],t))return!0;o++}return!1}})},function(t,e,n){"use strict";!function(t){t&&t.prototype&&null==t.prototype.children&&Object.defineProperty(t.prototype,"children",{get:function(){for(var t,e=0,n=this.childNodes,r=[];t=n[e++];)1===t.nodeType&&r.push(t);return r}})}(window.Node||window.Element)},function(t,e,n){"use strict";String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)})}])});